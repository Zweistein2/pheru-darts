(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{220:function(e,t,n){e.exports=n(480)},460:function(e,t,n){},469:function(e,t,n){},480:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(25),s=n(202),o=n(62),l=n(23),c=n(11),u="START_NEW_GAME",h="ADD_DART",p="UNDO_DART",d="EXIT_GAME",m="REMATCH",g=function(){return{type:d}},f={key:"SINGLE_OUT",text:"Single-Out"},y={key:"DOUBLE_OUT",text:"Double-Out"},b=[f,y],E={key:"SINGLE_IN",text:"Single-In"},v={key:"DOUBLE_IN",text:"Double-In"},O=[E,v];function C(e,t,n){return e-t.value*t.multiplier<=(n===f?0:1)}var D=function(e,t,n,a){for(var r=[],i=0;i<e.length;i++)r[i]={score:t,dartCount:0,average:0,checkInCondition:!1};for(var s,o,l,c=0,u=0,h=0,p=t;void 0!==e[c].aufnahmen[u]&&void 0!==e[c].aufnahmen[u][h];){s=c,o=u,l=h,r[c].dartCount++;var d=e[c].aufnahmen[u][h],m=d.value*d.multiplier,g=a===f||a===y&&2===d.multiplier,b=r[c].score,O=r[c].checkInCondition;0===h&&(p=b);var D=C(b,d,a);O||(O=n===E||n===v&&2===d.multiplier,r[c].checkInCondition=O),O&&(b-m===0&&g?b=0:D?b=p:b-=m),r[c].score=b,!D&&h<2?h++:(h=0,c<e.length-1?c++:(u++,c=0))}for(var S=0;S<e.length;S++){var k=0,T=S===c?e[S].aufnahmen.length-1:e[S].aufnahmen.length;if(T>0){var w=0;if(S===c)for(var j=e[S].aufnahmen[e[S].aufnahmen.length-1],I=0;I<j.length;I++)w+=j[I].value*j[I].multiplier;k=(t-(r[S].score+w))/T}k<0&&(k=0),k=k.toFixed(2),r[S].average=k}return{turnInformation:{current:{playerIndex:c,aufnahmeIndex:u,dartIndex:h},previous:{playerIndex:s,aufnahmeIndex:o,dartIndex:l}},playerInformation:r}};function S(e){for(var t=0;t<e.length;t++)e[t].aufnahmen=[];e[0].aufnahmen[0]=[]}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var n=t.players;return S(n),{players:n,score:t.score,checkInMode:t.checkInMode,checkOutMode:t.checkOutMode,training:t.training};case h:return function(e,t){var n=t.multiplier;if(25===t.value&&n>2)return e;0===t.value&&1!==n&&(n=1);var a=Object(c.a)({},t,{multiplier:n}),r=e.players,i=D(r,e.score,e.checkInMode,e.checkOutMode).turnInformation.current;r[i.playerIndex].aufnahmen[i.aufnahmeIndex][i.dartIndex]=a;var s=D(r,e.score,e.checkInMode,e.checkOutMode);i=s.turnInformation.current;var o,l=void 0;void 0===r[i.playerIndex].aufnahmen[i.aufnahmeIndex]&&(r[i.playerIndex].aufnahmen[i.aufnahmeIndex]=[],l=e.players[i.playerIndex].name+", "+s.playerInformation[i.playerIndex].score);for(var u=0;u<s.playerInformation.length;u++)if(0===s.playerInformation[u].score){o=r[u],l=r[u].name+" hat gewonnen!";break}return Object(c.a)({},e,{players:r,announcementText:l,winner:o})}(e,{value:t.value,multiplier:t.multiplier});case p:return function(e){var t=e.players,n=D(t,e.score,e.checkInMode,e.checkOutMode).turnInformation.current;if(0===n.playerIndex&&0===n.aufnahmeIndex&&0===n.dartIndex)return e;0===n.dartIndex&&t[n.playerIndex].aufnahmen.splice(n.aufnahmeIndex,1);var a=D(t,e.score,e.checkInMode,e.checkOutMode).turnInformation.previous;return t[a.playerIndex].aufnahmen[a.aufnahmeIndex].splice(a.dartIndex,1),Object(c.a)({},e,{players:t,announcementText:void 0,winner:void 0})}(e);case d:return null;case m:for(var a=e.players.slice();a[0]!==t.startingPlayer;)a.push(a.shift());return S(a),Object(c.a)({},e,{players:a,announcementText:void 0,winner:void 0});default:return e}},T=n(12),w=n(13);function j(e,t,n,a,r,i){var s={credentials:"include"};return"GET"!==t&&(s={body:JSON.stringify(n),headers:{"content-type":"application/json"},method:t,credentials:"include"}),fetch(e,s).then(function(t){if(t.ok){var n=t.headers.get("content-type");return n&&-1!==n.indexOf("application/json")?t.json():n&&-1!==n.indexOf("text/plain")?t.text():""}return t.json().then(function(t){return r(t),Promise.reject("Error fetching "+e+": Status: "+t.status+"; Message: "+t.message)})},function(t){return i(t),Promise.reject("Error fetching "+e+": "+t)}).then(function(e){return a(e)},function(e){return console.error(e)})}var I=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"fetchGet",value:function(e,t,n,a){return j(e,"GET",{},t,n,a)}},{key:"fetchPost",value:function(e,t,n,a,r){return j(e,"POST",t,n,a,r)}},{key:"fetchPut",value:function(e,t,n,a,r){return j(e,"PUT",t,n,a,r)}},{key:"fetchDelete",value:function(e,t,n,a,r){return j(e,"DELETE",t,n,a,r)}}]),e}(),N="https:",P="8443";function U(e){return{resourceUrls:{user:e+"/user",playerPermission:e+"/playerPermission",game:e+"/game",statistic:e+"/statistic",serverInformation:e+"/serverInformation",notification:e+"/notification"},loginUrl:e+"/login",logoutUrl:e+"/logout"}}var F=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"getConfig",value:function(){return"pheru.github.io"===window.location.hostname?U("https://darts.pheru.de"):U((e=window.location.hostname,N+"//"+e+":"+P));var e}}]),e}(),L=n(16),A=n(14),x=n(15),M=n(5);function _(e,t){return function(n){n.keyCode===e&&t()}}var R=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"ifEnterKey",value:function(e){return _(13,e)}},{key:"ifEscKey",value:function(e){return _(27,e)}}]),e}(),B="TYPE_INFORMATION",G=function(e){function t(e){var n;Object(T.a)(this,t);var a=void 0!==(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).props.item.modalType?n.getAppearanceByModalType(n.props.item.modalType):n.getAppearanceByModalType(B);return n.state={appearance:a},n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.item.modalType!==this.props.item.modalType&&void 0!==this.props.item.modalType){var t=this.getAppearanceByModalType(this.props.item.modalType);this.setState({appearance:t})}}},{key:"render",value:function(){var e=this;return r.a.createElement(M.j,{show:this.props.show,onKeyDown:function(t){e.props.item.modalType!==B&&"TYPE_WARNING"!==e.props.item.modalType&&"TYPE_ERROR"!==e.props.item.modalType||R.ifEnterKey(e.props.hide)(t),R.ifEscKey(e.props.hide)(t)}},r.a.createElement(M.j.Body,{style:{paddingTop:0,paddingBottom:0}},r.a.createElement("h3",null,r.a.createElement(M.h,{glyph:this.state.appearance.glyph,style:{color:this.state.appearance.color}}),r.a.createElement("strong",null," ",this.props.item.title)),r.a.createElement("h4",null,this.props.item.message)),r.a.createElement(M.j.Footer,null,r.a.createElement(M.c,{style:{width:100},bsStyle:this.state.appearance.bsStyle,onClick:function(){e.props.item.onConfirm&&e.props.item.onConfirm(),e.props.hide()}},"TYPE_CONFIRMATION"===this.props.item.modalType?"Ja":"OK"),"TYPE_CONFIRMATION"===this.props.item.modalType&&r.a.createElement(M.c,{style:{width:100},bsStyle:this.state.appearance.bsStyle,onClick:function(){e.props.item.onCancel&&e.props.item.onCancel(),e.props.hide()}},"Nein")))}},{key:"getAppearanceByModalType",value:function(e){switch(e){case"TYPE_ERROR":return{glyph:"remove-sign",color:"#d9534f",bsStyle:"danger"};case"TYPE_WARNING":return{glyph:"alert",color:"#f0ad4e",bsStyle:"warning"};case B:return{glyph:"info-sign",color:"#5bc0de",bsStyle:"info"};case"TYPE_CONFIRMATION":return{glyph:"question-sign",color:"#337ab7",bsStyle:"primary"};default:return null}}}]),t}(r.a.Component),V="HIDE_CURRENT_MODAL",z="SHOW_MODAL",H=function(e,t,n,a){return{type:z,modalType:"TYPE_CONFIRMATION",title:e,message:t,onConfirm:n,onCancel:a}},W=function(e,t){return{type:z,modalType:"TYPE_ERROR",title:e,message:t}},K=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"defaultErrorHandling",value:function(e,t,n){401===t.status?(e(bt()),"JWT expired!"===t.message?e({type:z,modalType:B,title:"Deine Sitzung ist abgelaufen",message:"Bitte melde dich erneut an"}):e(n)):e(n)}}]),e}(),Y="REQUEST_FETCH_PERMITTED_USERS",Q="FETCH_PERMITTED_USERS_SUCCESSFUL",q="FETCH_PERMITTED_USERS_FAILED",Z="REQUEST_FETCH_PLAYABLE_USERS",J="FETCH_PLAYABLE_USERS_SUCCESSFUL",X="FETCH_PLAYABLE_USERS_FAILED",$="REQUEST_UPDATE_PLAYER_PERMISSION",ee="ADD_PLAYER_PERMISSION_SUCCESSFUL",te="REMOVE_PLAYER_PERMISSION_SUCCESSFUL",ne="UPDATE_PLAYER_PERMISSION_FAILED",ae=function(){return{type:Y}},re=function(e){return{type:Q,users:e}},ie=function(e){return{type:q,message:e}},se=function(){return{type:Z}},oe=function(e){return{type:J,users:e}},le=function(e){return{type:X,message:e}},ce=function(){return{type:$}},ue=function(e){return{type:ee,changedUser:e}},he=function(e){return{type:te,changedUserId:e}},pe=function(e){return{type:ne,message:e}};function de(){return function(e){return e(se()),I.fetchGet(F.getConfig().resourceUrls.playerPermission+"/playable",function(t){return e(oe(t))},function(t){e(le(t.message)),K.defaultErrorHandling(e,t,W("Failed to fetch playable users",t.message))},function(t){e(le(t.message)),e(W("Failed to fetch playable users",t.message))})}}function me(){return function(e){return e(ae()),I.fetchGet(F.getConfig().resourceUrls.playerPermission+"/permitted",function(t){return e(re(t))},function(t){e(ie(t.message)),K.defaultErrorHandling(e,t,W("Failed to fetch permitted users",t.message))},function(t){e(ie(t.message)),e(W("Failed to fetch permitted users",t.message))})}}var ge="REQUEST_FETCH_NOTIFICATIONS",fe="FETCH_NOTIFICATIONS_SUCCESSFUL",ye="FETCH_NOTIFICATIONS_FAILED",be="REQUEST_MARK_NOTIFICATIONS_AS_READ",Ee="MARK_NOTIFICATIONS_AS_READ_SUCCESSFUL",ve="MARK_NOTIFICATIONS_AS_READ_FAILED",Oe=function(){return{type:ge}},Ce=function(e){return{type:fe,notifications:e}},De=function(e){return{type:ye,message:e}},Se=function(e){return{type:be,notificationIds:e}},ke=function(e){return{type:Ee,notifications:e}},Te=function(e){return{type:ve,message:e}};function we(){return function(e){return e(Oe()),I.fetchGet(F.getConfig().resourceUrls.notification,function(t){return e(Ce(t))},function(t){e(De(t.message)),K.defaultErrorHandling(e,t,W("Failed to fetch notifications",t.message))},function(t){e(De(t.message)),e(W("Failed to fetch notifications",t.message))})}}var je="SHOW_LOGIN_MODAL",Ie="HIDE_LOGIN_MODAL",Ne="SHOW_SIGNUP_MODAL",Pe="HIDE_SIGNUP_MODAL",Ue="REQUEST_LOGIN",Fe="LOGIN_SUCCESSFUL",Le="LOGIN_FAILED",Ae="REQUEST_LOGIN_BY_TOKEN",xe="LOGIN_BY_TOKEN_SUCCESSFUL",Me="LOGIN_BY_TOKEN_FAILED",_e="REQUEST_LOGOUT",Re="LOGOUT_SUCCESSFUL",Be="LOGOUT_FAILED",Ge="REQUEST_SIGNUP",Ve="SIGNUP_SUCCESSFUL",ze="SIGNUP_FAILED",He="REQUEST_MODIFY_USER",We="MODIFY_USER_SUCCESSFUL",Ke="MODIFY_USER_FAILED",Ye="REQUEST_DELETE_USER",Qe="DELETE_USER_SUCCESSFUL",qe="DELETE_USER_FAILED",Ze=function(){return{type:je}},Je=function(){return{type:Ne}},Xe=function(){return{type:Ue}},$e=function(){return{type:Fe}},et=function(e){return{type:Le,message:e}},tt=function(){return{type:Ae}},nt=function(e){return{type:xe,userInfo:e}},at=function(){return{type:Me}},rt=function(){return{type:_e}},it=function(){return{type:Re}},st=function(){return{type:Be}},ot=function(){return{type:Ge}},lt=function(){return{type:Ve}},ct=function(e){return{type:ze,message:e}},ut=function(){return{type:He}},ht=function(){return{type:We}},pt=function(e){return{type:Ke,message:e}},dt=function(){return{type:Ye}},mt=function(){return{type:Qe}},gt=function(e){return{type:qe,message:e}};function ft(e,t){return function(n){return n(Xe()),I.fetchPost(F.getConfig().loginUrl,{name:e,password:t},function(e){n($e()),n(yt(!0))},function(e){n(et(e.message)),K.defaultErrorHandling(n,e,W("Login failed",e.message))},function(e){n(et(e.message)),n(W("Login failed",e.message))})}}function yt(e){return function(t){return t(tt()),I.fetchGet(F.getConfig().resourceUrls.user,function(e){t(nt(e)),t(de()),t(me()),t(we())},function(n){t(at()),e&&K.defaultErrorHandling(t,n,W("Login by token failed",n.message))},function(e){t(at()),t(W("Login by token failed",e.message))})}}function bt(){return function(e){return e(rt()),I.fetchGet(F.getConfig().logoutUrl,function(t){return e(it())},function(t){e(st()),K.defaultErrorHandling(e,t,W("Logout failed",t.message))},function(t){e(st()),e(W("Logout failed",t.message))})}}var Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:void 0,name:void 0,showLoginModal:!1,showSignUpModal:!1,isLoggedIn:!1,isLoggingIn:!1,isLoggingOut:!1,isSigningUp:!1,isModifying:!1,isDeletingUser:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(c.a)({},e,{showLoginModal:!0});case Ie:return Object(c.a)({},e,{showLoginModal:!1});case Ne:return Object(c.a)({},e,{showSignUpModal:!0});case Pe:return Object(c.a)({},e,{showSignUpModal:!1});case Ue:return Object(c.a)({},e,{isLoggingIn:!0});case Fe:return Object(c.a)({},e,{isLoggingIn:!1,showLoginModal:!1});case Le:return Object(c.a)({},e,{isLoggingIn:!1});case Ae:return Object(c.a)({},e,{name:void 0,isLoggedIn:!1,isLoggingIn:!0});case xe:return Object(c.a)({},e,{id:t.userInfo.id,name:t.userInfo.name,isLoggedIn:!0,isLoggingIn:!1,showLoginModal:!1});case Me:return Object(c.a)({},e,{id:void 0,name:void 0,isLoggedIn:!1,isLoggingIn:!1});case _e:return Object(c.a)({},e,{isLoggingOut:!0});case Re:return Object(c.a)({},e,{id:void 0,name:void 0,isLoggedIn:!1,isLoggingOut:!1});case Be:return Object(c.a)({},e,{isLoggingOut:!1});case Ge:return Object(c.a)({},e,{isSigningUp:!0});case Ve:return Object(c.a)({},e,{isSigningUp:!1,showSignUpModal:!1});case ze:return Object(c.a)({},e,{isSigningUp:!1});case He:return Object(c.a)({},e,{isModifying:!0});case We:case Ke:return Object(c.a)({},e,{isModifying:!1});case Ye:return Object(c.a)({},e,{isDeletingUser:!0});case Qe:case qe:return Object(c.a)({},e,{isDeletingUser:!1});default:return e}};var vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{playableUsers:[],isFetchingPlayableUsers:!1,fetchPlayableUsersFailed:!1,permittedUsers:[],isFetchingPermittedUsers:!1,fetchPermittedUsersFailed:!1,isUpdatingPlayerPermission:!1,updatePlayerPermissionFailed:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return Object(c.a)({},e,{isFetchingPlayableUsers:!0,fetchPlayableUsersFailed:!1});case J:return Object(c.a)({},e,{isFetchingPlayableUsers:!1,fetchPlayableUsersFailed:!1,playableUsers:t.users});case X:return Object(c.a)({},e,{isFetchingPlayableUsers:!1,fetchPlayableUsersFailed:!0,playableUsers:[]});case Y:return Object(c.a)({},e,{isFetchingPermittedUsers:!0,fetchPermittedUsersFailed:!1});case Q:return Object(c.a)({},e,{isFetchingPermittedUsers:!1,fetchPermittedUsersFailed:!1,permittedUsers:t.users});case q:return Object(c.a)({},e,{isFetchingPermittedUsers:!1,fetchPermittedUsersFailed:!0,permittedUsers:[]});case $:return Object(c.a)({},e,{isUpdatingPlayerPermission:!0,updatePlayerPermissionFailed:!1});case ee:var n=e.permittedUsers.slice();return n.push(t.changedUser),Object(c.a)({},e,{isUpdatingPlayerPermission:!1,updatePlayerPermissionFailed:!1,permittedUsers:n});case te:var a=e.permittedUsers.slice(),r=a.map(function(e){return e.id}).indexOf(t.changedUserId);return-1!==r&&a.splice(r,1),Object(c.a)({},e,{isUpdatingPlayerPermission:!1,updatePlayerPermissionFailed:!1,permittedUsers:a});case ne:return Object(c.a)({},e,{isUpdatingPlayerPermission:!1,updatePlayerPermissionFailed:!0});case Re:return Object(c.a)({},e,{playableUsers:[],permittedUsers:[]});default:return e}},Ot="REQUEST_ARCHIVE_GAME",Ct="ARCHIVE_GAME_SUCCESSFUL",Dt="ARCHIVE_GAME_FAILED",St=function(){return{type:Ot}},kt=function(){return{type:Ct}},Tt=function(e){return{type:Dt,message:e}};var wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isArchiving:!1};switch((arguments.length>1?arguments[1]:void 0).type){case Ot:return Object(c.a)({},e,{isArchiving:!0});case Ct:case Dt:return Object(c.a)({},e,{isArchiving:!1});default:return e}},jt="MEMORIZE_STATE";var It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{states:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jt:var n=Object(c.a)({},e.states);return n[t.key]=t.state,Object(c.a)({},e,{states:n});default:return e}},Nt="REQUEST_FETCH_STATISTICS",Pt="FETCH_STATISTICS_SUCCESSFUL",Ut="FETCH_STATISTICS_FAILED",Ft="REQUEST_FETCH_STATISTICS_FILTER_OPTIONS",Lt="FETCH_STATISTICS_FILTER_OPTIONS_SUCCESSFUL",At="FETCH_STATISTICS_FILTER_OPTIONS_FAILED",xt=function(){return{type:Nt}},Mt=function(e){return{type:Pt,data:e}},_t=function(e){return{type:Ut,message:e}},Rt=function(){return{type:Ft}},Bt=function(e){return{type:Lt,options:e}},Gt=function(e){return{type:At,message:e}};var Vt=[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5],zt=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"sortByNameAsc",value:function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}},{key:"sortByScoreDesc",value:function(e,t){var n=parseInt(e.score,10),a=parseInt(t.score,10);return n<a?1:n>a?-1:0}},{key:"sortScoreByBoardOrder",value:function(e,t){var n=parseInt(e.score,10),a=parseInt(t.score,10),r=Vt.indexOf(n),i=Vt.indexOf(a);return r>i?1:r<i?-1:0}},{key:"sortByOpponentAsc",value:function(e,t){return e.opponent>t.opponent?1:e.opponent<t.opponent?-1:0}},{key:"sortByLabelAsc",value:function(e,t){return e.label>t.label?1:e.label<t.label?-1:0}},{key:"sortByTimestampDesc",value:function(e,t){return e.timestamp<t.timestamp?1:e.timestamp>t.timestamp?-1:0}},{key:"sortByTimestampAsc",value:function(e,t){return e.timestamp>t.timestamp?1:e.timestamp<t.timestamp?-1:0}},{key:"sortByGameInformationTimestampAsc",value:function(t,n){return e.sortByTimestampAsc(t.gameInformation,n.gameInformation)}}]),e}();var Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetchingOptions:!1,isFetching:!1,totalGames:0,totalDarts:0,possibleCheckoutDarts:0,checkoutDarts:0,gamesWon:0,gamesLost:0,dartData:[],gamesData:[],averageAufnahmeScore:0,highestAufnahmen:{},options:{usernameToUserIds:{},comparativeOperators:[],games:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ft:return Object(c.a)({},e,{isFetchingOptions:!0});case Lt:return Object(c.a)({},e,{isFetchingOptions:!1,options:{usernameToUserIds:t.options.usernameToUserIds,comparativeOperators:t.options.comparativeOperators,games:t.options.games}});case At:return Object(c.a)({},e,{isFetchingOptions:!1});case Nt:return Object(c.a)({},e,{isFetching:!0});case Pt:var n=[],a=t.data.darts.countsPerScore;for(var r in a)a.hasOwnProperty(r)&&n.push({score:r,singleCount:a[r].singleCount,doubleCount:"0"===r?void 0:a[r].doubleCount,tripleCount:"25"===r||"0"===r?void 0:a[r].tripleCount});n.sort(zt.sortByScoreDesc);var i=[],s=t.data.games.countsPerPlayer;for(var o in s)s.hasOwnProperty(o)&&i.push({opponent:o,wonCount:s[o].wonCount,lostCount:s[o].lostCount});i.sort(zt.sortByOpponentAsc);var l=t.data.progress.slice().sort(zt.sortByGameInformationTimestampAsc);return Object(c.a)({},e,{isFetching:!1,gamesWon:t.data.games.wonCount,gamesLost:t.data.games.lostCount,totalDarts:t.data.darts.totalCount,possibleCheckoutDarts:t.data.darts.possibleCheckoutCount,checkoutDarts:t.data.darts.checkoutCount,averageAufnahmeScore:t.data.aufnahmen.averageAufnahmeScore,highestAufnahmen:t.data.aufnahmen.highestAufnahmen,dartData:n,gamesData:i,progressData:l});case Ut:return Object(c.a)({},e,{isFetching:!1});default:return e}};var Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:var n=e.items.slice();return n.push({modalType:t.modalType,title:t.title,message:t.message,onConfirm:t.onConfirm,onCancel:t.onCancel}),Object(c.a)({},e,{items:n,show:!0});case V:var a=e.items.slice();return a.shift(),Object(c.a)({},e,{items:a,show:a.length>0});default:return e}},Kt="REQUEST_SERVER_VERSION",Yt="FETCH_SERVER_VERSION_SUCCESSFUL",Qt="FETCH_SERVER_VERSION_FAILED",qt=function(){return{type:Kt}},Zt=function(e){return{type:Yt,version:e}},Jt=function(e){return{type:Qt,message:e}};var Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{version:void 0,isFetchingVersion:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Kt:return Object(c.a)({},e,{version:void 0,isFetchingVersion:!0});case Yt:return Object(c.a)({},e,{version:t.version,isFetchingVersion:!1});case Qt:return Object(c.a)({},e,{version:"Unbekannt",isFetchingVersion:!1});default:return e}},$t={isFetching:!1,notifications:[],unreadNotifications:[]};function en(e){for(var t=[],n=0;n<e.length;n++)e[n].read||t.push(e[n]);return t}var tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return Object(c.a)({},e,{isFetching:!0});case fe:var n=en(t.notifications);return Object(c.a)({},e,{isFetching:!1,notifications:t.notifications,unreadNotifications:n});case ye:return $t;case be:return Object(c.a)({},e,{isFetching:!0});case Ee:for(var a=[],r=0;r<e.notifications.length;r++){for(var i=Object(c.a)({},e.notifications[r]),s=0;s<t.notifications.length;s++)if(i.id===t.notifications[s].id){i.read=t.notifications[s].read;break}a.push(i)}var o=en(a);return Object(c.a)({},e,{isFetching:!1,notifications:a,unreadNotifications:o});case ve:return Object(c.a)({},e,{isFetching:!1});case Re:return $t;default:return e}},nn="SET_POSSIBLE_VOICES",an="SET_SELECTED_VOICE_BY_NAME",rn="TOGGLE_SPEECH_OUTPUT",sn=function(e){return{type:an,voiceName:e}};var on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{possibleVoices:[],selectedVoice:void 0,defaultVoice:void 0,speechOutputActive:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nn:for(var n=void 0,a=0;a<t.voices.length;a++)t.voices[a].default&&(n=t.voices[a]);return Object(c.a)({},e,{defaultVoice:n,possibleVoices:t.voices.slice()});case an:for(var r=e.selectedVoice,i=0;i<e.possibleVoices.length;i++)e.possibleVoices[i].name===t.voiceName&&(r=e.possibleVoices[i]);return Object(c.a)({},e,{selectedVoice:r});case rn:return Object(c.a)({},e,{speechOutputActive:!e.speechOutputActive});default:return e}},ln="TOGGLE_NAVIGATION_BAR_VISIBILITY",cn="SET_NAVIGATION_BAR_VISIBILITY",un="SET_LANDSCAPE_ORIENTATION";var hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{navigationBarVisible:!0,landscapeOrientation:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ln:return Object(c.a)({},e,{navigationBarVisible:!e.navigationBarVisible});case cn:return Object(c.a)({},e,{navigationBarVisible:t.visibility});case un:return Object(c.a)({},e,{landscapeOrientation:t.landscapeOrientation});default:return e}},pn=Object(o.c)({game:k,games:wt,user:Et,playerPermission:vt,stateMemory:It,statistics:Ht,modal:Wt,serverInformation:Xt,notifications:tn,speech:on,app:hn}),dn=n(10),mn=n(24),gn=function e(t,n,a){Object(T.a)(this,e),this.text=t,this.icon=n,this.route=a},fn={NEW_GAME:new gn("Neues Spiel",r.a.createElement(M.h,{glyph:"edit"}),"/newgame"),NEW_TRAINING:new gn("Training",r.a.createElement(M.h,{glyph:"upload"}),"/newtraining"),GAME:new gn("Aktuelles Spiel",r.a.createElement(M.h,{glyph:"play-circle"}),"/game"),NOTIFICATIONS:new gn("Mitteilungen",r.a.createElement(M.h,{glyph:"bell"}),"/notifications"),STATISTICS:new gn("Statistiken",r.a.createElement(M.h,{glyph:"stats"}),"/statistics"),SETTINGS:new gn("Einstellungen",r.a.createElement(M.h,{glyph:"cog"}),"/settings"),SETTINGS_USER:new gn("Benutzereinstellungen",r.a.createElement(M.h,{glyph:"user"}),"/settings/user"),SETTINGS_SPEECH:new gn("Spracheinstellungen",r.a.createElement(M.h,{glyph:"volume-up"}),"/settings/speech"),SETTINGS_PERMISSIONS:new gn("Berechtigungen",r.a.createElement(M.h,{glyph:"list-alt"}),"/settings/permissions"),ABOUT:new gn("Info",r.a.createElement(M.h,{glyph:"info-sign"}),"/about"),LOGIN:new gn("Anmelden",r.a.createElement(M.h,{glyph:"log-in"})),LOGOUT:new gn("Abmelden",r.a.createElement(M.h,{glyph:"log-out"}))},yn=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={icon:n.props.iconFactory?n.props.iconFactory(n.props.value):null},n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.value===e.value&&this.props.iconFactory===e.iconFactory&&this.props.choices===e.choices||this.setState({icon:this.props.iconFactory?this.props.iconFactory(this.props.value):null})}},{key:"render",value:function(){var e=this,t=void 0!==this.props.choices&&this.props.choices.length>0;return r.a.createElement(M.f,{id:this.props.id,style:Object(c.a)({},this.props.style,{display:"inline-flex"})},r.a.createElement("div",{style:{position:"absolute",top:1,left:7}},this.state.icon),r.a.createElement(M.g,{type:"text",value:this.props.value,placeholder:this.props.placeholder,onChange:function(t){return e.props.onInputChange(t.target.value)},style:{borderTopRightRadius:t?0:void 0,borderBottomRightRadius:t?0:void 0,textAlign:"center"},autoFocus:this.props.autoFocus}),r.a.createElement(M.f.Toggle,{style:{borderLeftWidth:0,display:t?"":"none"}}),r.a.createElement(M.f.Menu,{style:{minWidth:"calc(100% - 34px)",textAlign:"center"}},this.props.choices.map(function(t,n){return[r.a.createElement(M.i,{key:"choice"+e.getTextForChoice(t),style:{width:"calc(100% - 1px)",margin:"auto"},onClick:function(){return e.props.onDropdownClick(t)}},e.getTextForChoice(t)),e.props.dividerPositions&&e.props.dividerPositions.includes(n)&&r.a.createElement(M.i,{divider:!0})]})))}},{key:"getTextForChoice",value:function(e){return this.props.dropdownPropertyName?e[this.props.dropdownPropertyName]:e}}]),t}(r.a.Component),bn=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"setTitlePrefix",value:function(e){var t=e?e+" - ":"";document.title=t+"Pheru-Darts"}}]),e}(),En=["101","201","301","401","501","1001"],vn=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).handleScoreChange=n.handleScoreChange.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"handleScoreChange",value:function(e){(""===e||t.isValidScore(e))&&this.props.onChange(e)}},{key:"render",value:function(){return r.a.createElement(yn,{id:this.props.id,value:this.props.value,choices:this.props.noChoices?[]:En,onDropdownClick:this.handleScoreChange,onInputChange:this.handleScoreChange})}}],[{key:"isValidScore",value:function(e){return/^[1-9]+\d*$/.test(e)}}]),t}(r.a.Component),On=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(M.p,{type:"radio",name:"options",value:this.props.value,onChange:this.props.onChange},this.props.options.map(function(t,n){return r.a.createElement(M.o,{style:n===e.props.options.length-1&&e.props.borderRightZero?{borderTopRightRadius:0,borderBottomRightRadius:0}:{},key:t.key,value:t},t.text)}))}}]),t}(r.a.Component),Cn=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(On,Object.assign({},this.props,{options:O}))}}]),t}(r.a.Component),Dn=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(On,Object.assign({},this.props,{options:b}))}}]),t}(r.a.Component),Sn={marginBottom:10},kn=function(e){function t(e){var n;return Object(T.a)(this,t),n=Object(L.a)(this,Object(A.a)(t).call(this,e)),void 0!==e.initialState?n.state=Object(c.a)({},e.initialState):n.state={score:"501",selectedPlayers:[{name:""},{name:""}],checkOutMode:y,checkInMode:E},n.swapPlayerSelection=n.swapPlayerSelection.bind(Object(dn.a)(Object(dn.a)(n))),n.handleScoreChange=n.handleScoreChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleUnregisteredUserChange=n.handleUnregisteredUserChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleCheckInModeChange=n.handleCheckInModeChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleCheckOutModeChange=n.handleCheckOutModeChange.bind(Object(dn.a)(Object(dn.a)(n))),n.onStartNewGameButtonClicked=n.onStartNewGameButtonClicked.bind(Object(dn.a)(Object(dn.a)(n))),n.startNewGame=n.startNewGame.bind(Object(dn.a)(Object(dn.a)(n))),n.playerIconFactory=n.playerIconFactory.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){bn.setTitlePrefix(this.props.training?"Training":"Neues Spiel")}},{key:"componentDidUpdate",value:function(e){if(e.isFetchingUsers&&!this.props.isFetchingUsers||e.isLoggedIn&&!this.props.isLoggedIn)for(var t=this.state.selectedPlayers.slice(),n=0;n<t.length;n++){var a=this.getPlayableUserByName(t[n].name);t[n]=a||{name:t[n].name},this.setState({selectedPlayers:t})}}},{key:"componentWillUnmount",value:function(){this.props.memorizeState(this.state)}},{key:"changeSelectedPlayer",value:function(e,t){for(var n=0;n<this.state.selectedPlayers.length;n++)if(n!==e&&this.state.selectedPlayers[n]===t)return void this.swapPlayerSelection();var a=this.state.selectedPlayers.slice();a[e]=t,this.setState({selectedPlayers:a})}},{key:"swapPlayerSelection",value:function(){var e=this.state.selectedPlayers.slice().reverse();this.setState({selectedPlayers:e})}},{key:"handleUnregisteredUserChange",value:function(e,t){var n=this.state.selectedPlayers.slice(),a=this.getPlayableUserByName(t);n[e]=a||{name:t},this.setState({selectedPlayers:n})}},{key:"handleScoreChange",value:function(e){this.setState({score:e})}},{key:"handleCheckInModeChange",value:function(e){this.setState({checkInMode:e})}},{key:"handleCheckOutModeChange",value:function(e){this.setState({checkOutMode:e})}},{key:"onStartNewGameButtonClicked",value:function(e){var t=this;this.validateGameConfig()?this.props.gameRunning?this.props.showConfirmation("Neues Spiel starten?","Das aktuelle Spiel wird dadurch abgebrochen.",function(){return t.startNewGame()}):this.startNewGame():e.preventDefault()}},{key:"validateGameConfig",value:function(){var e=[],t=this.state.selectedPlayers;if(!this.props.training)for(var n=0;n<t.length;n++){if(void 0===t[n].id&&""===t[n].name){e.push("Es wurden nicht alle ben\xf6tigten Spieler ausgew\xe4hlt");break}for(var a=n+1;a<t.length;a++)if(t[n].name===t[a].name){e.push("Spieler d\xfcrfen nicht mehrfach vorkommen");break}}return""===this.state.score&&e.push("Es wurde kein Score angegeben"),!(e.length>0)||(this.props.showWarning("Ung\xfcltige Spielkonfiguration",r.a.createElement("ul",null,this.validationMessagesToListEntries(e))),!1)}},{key:"validationMessagesToListEntries",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.a.createElement("li",{key:"validationMessage_"+n},e[n]));return t}},{key:"startNewGame",value:function(){var e;e=this.props.training?[{id:this.props.userId,name:this.props.userName?this.props.userName:"Training"}]:this.state.selectedPlayers,this.props.startNewGame(e,Number(this.state.score),this.state.checkInMode,this.state.checkOutMode,this.props.training),this.props.history.push(fn.GAME.route)}},{key:"playerIconFactory",value:function(e){return this.props.isLoggedIn&&e&&!this.props.isFetchingUsers?this.getPlayableUserByName(e)?r.a.createElement(M.h,{glyph:"ok",style:{color:"green"}}):r.a.createElement(M.k,{placement:"bottom",overlay:r.a.createElement(M.q,{id:"user-tooltip"},"Dieser Spieler ist entweder kein registrierter Benutzer oder Du bist nicht berechtigt worden, ein Spiel mit ihm zu erstellen.",r.a.createElement("br",null),"In den Statistiken wird dieser Spieler als unregistrierter Benutzer gelistet.")},r.a.createElement(M.h,{glyph:"exclamation-sign",style:{color:"orange"}})):null}},{key:"getPlayableUserByName",value:function(e){for(var t=0;t<this.props.playableUsers.length;t++)if(this.props.playableUsers[t].name===e)return this.props.playableUsers[t];return null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{textAlign:"center"}},!this.props.training&&r.a.createElement("div",{style:{display:"flex",flexDirection:this.props.landscapeOrientation?"row":"column"}},r.a.createElement("div",{style:Object(c.a)({},Sn,{flexGrow:2})},r.a.createElement(yn,{id:"player-1-dropdown",placeholder:"Spieler 1",value:this.state.selectedPlayers[0].name,choices:this.props.playableUsers,dropdownPropertyName:"name",style:{width:"100%"},iconFactory:this.playerIconFactory,onDropdownClick:function(t){return e.changeSelectedPlayer(0,t)},onInputChange:function(t){return e.handleUnregisteredUserChange(0,t)},autoFocus:!0,dividerPositions:[0]})),r.a.createElement("div",{style:Object(c.a)({},Sn,{flexGrow:1})},r.a.createElement("div",{style:{paddingLeft:10,paddingRight:10}},r.a.createElement(M.c,{block:!0,bsStyle:"primary",onClick:this.swapPlayerSelection},r.a.createElement(M.h,{glyph:"transfer"})))),r.a.createElement("div",{style:Object(c.a)({},Sn,{flexGrow:2})},r.a.createElement(yn,{id:"player-2-dropdown",placeholder:"Spieler 2",value:this.state.selectedPlayers[1].name,choices:this.props.playableUsers,dropdownPropertyName:"name",style:{width:"100%"},iconFactory:this.playerIconFactory,onDropdownClick:function(t){return e.changeSelectedPlayer(1,t)},onInputChange:function(t){return e.handleUnregisteredUserChange(1,t)},dividerPositions:[0]}))),r.a.createElement("div",{style:Sn},r.a.createElement(vn,{id:"new_game_scoreinput",value:this.state.score,onChange:this.handleScoreChange})),r.a.createElement("div",{style:Sn},r.a.createElement(Cn,{value:this.state.checkInMode,onChange:this.handleCheckInModeChange})),r.a.createElement("div",{style:Sn},r.a.createElement(Dn,{value:this.state.checkOutMode,onChange:this.handleCheckOutModeChange})),r.a.createElement("div",{style:Sn},r.a.createElement(M.c,{bsStyle:"primary",bsSize:"large",block:!0,disabled:this.props.isLoggingIn,onClick:this.onStartNewGameButtonClicked},"Neues ",this.props.training?"Trainingsspiel":"Spiel"," starten")))}}]),t}(r.a.Component);function Tn(e){return e.training?"newgameconfig_training":"newgameconfig"}function wn(e,t){for(var n=-1,a=void 0,r=0;r<t.length;r++)t[r].name===e&&(n=r,a=t[r]);return n>-1&&(t.splice(n,1),t.unshift(a)),t}var jn=Object(l.b)(function(e,t){return{landscapeOrientation:e.app.landscapeOrientation,initialState:e.stateMemory.states[Tn(t)],isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn,userId:e.user.id,userName:e.user.name,playableUsers:wn(e.user.name,e.playerPermission.playableUsers.slice().sort(zt.sortByNameAsc)),gameRunning:null!==e.game,fetchAllUsersFailed:e.playerPermission.fetchPlayableUsersFailed,isFetchingUsers:e.playerPermission.isFetchingPlayableUsers}},function(e,t){return{startNewGame:function(t,n,a,r,i){return e(function(e,t,n,a,r){return{type:u,players:e,score:t,checkInMode:n,checkOutMode:a,training:r}}(t,n,a,r,i))},memorizeState:function(n){return e(function(e,t){return{type:jt,key:e,state:t}}(Tn(t),n))},showWarning:function(t,n){return e(function(e,t){return{type:z,modalType:"TYPE_WARNING",title:e,message:t}}(t,n))},showConfirmation:function(t,n,a,r){return e(H(t,n,a,r))}}})(kn),In={textAlign:"center",fontWeight:"bold",margin:0,padding:0},Nn="1px solid black",Pn=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.landscapeOrientation?"6vh":"3vh",t=this.props.landscapeOrientation?"5vh":"3vh",n=this.props.landscapeOrientation?"9vh":"5vh",a=this.props.landscapeOrientation?"5vh":"3vh",i=this.props.landscapeOrientation?"5vh":"3vh";return r.a.createElement("div",{style:Object(c.a)({},In,{borderRadius:6},this.props.style),className:"player"+(this.props.current?" player-current":"")},r.a.createElement("div",{style:Object(c.a)({},In,{height:"66.666%",display:"flex",borderTopLeftRadius:6,borderTopRightRadius:6})},r.a.createElement("div",{style:Object(c.a)({},In,{width:"66.666%"})},r.a.createElement("div",{className:"center-content",style:Object(c.a)({},In,{height:"35%",borderRight:Nn,fontSize:t})},this.props.name),r.a.createElement("div",{className:"center-content",style:Object(c.a)({},In,{height:"65%",borderRight:Nn,fontSize:n})},this.props.score)),r.a.createElement("div",{style:Object(c.a)({},In,{width:"33.333%"})},r.a.createElement("div",{className:"center-content",style:Object(c.a)({},In,{height:"50%",fontSize:a,borderBottom:Nn})},"# ",this.props.dartCount),r.a.createElement("div",{className:"center-content",style:Object(c.a)({},In,{height:"50%",fontSize:i})},"\u2205 ",this.props.average))),r.a.createElement("div",{style:Object(c.a)({height:"33.333%"},In,{display:"flex"})},r.a.createElement("div",{className:"center-content",style:Object(c.a)({},In,{width:"33.333%",fontSize:e,borderBottomLeftRadius:6,borderTop:Nn})},this.props.dart1),r.a.createElement("div",{className:"center-content",style:Object(c.a)({},In,{width:"33.333%",fontSize:e,borderRight:Nn,borderLeft:Nn,borderTop:Nn})},this.props.dart2),r.a.createElement("div",{className:"center-content",style:Object(c.a)({},In,{width:"33.333%",fontSize:e,borderBottomRightRadius:6,borderTop:Nn})},this.props.dart3)))}}]),t}(r.a.Component);var Un=Object(l.b)(function(e,t){var n=e.game.players,a=n[t.index],r=e.game.score,i=e.game.checkOutMode,s=e.game.checkInMode,o=D(n,r,s,i),l=o.playerInformation[t.index].score,c=function(e){var t=[],n=e.aufnahmen[e.aufnahmen.length-1];if(void 0!==n)for(var a=0;a<n.length;a++){var r=n[a],i=void 0;switch(r.multiplier){case 2:i="D";break;case 3:i="T";break;default:i=""}t.push(i+r.value)}for(var s=0;s<3;s++)void 0===t[s]&&(t[s]="-");return t}(a),u=o.playerInformation[t.index].dartCount,h=o.turnInformation.current.playerIndex===t.index,p=o.playerInformation[t.index].average;return{landscapeOrientation:e.app.landscapeOrientation,name:a.name,score:l,dartCount:u,average:p,dart1:c[0],dart2:c[1],dart3:c[2],current:h}},function(e){return{}})(Pn),Fn=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"speak",value:function(e,t){var n=new SpeechSynthesisUtterance(e);n.voice=t,window.speechSynthesis.speaking?(window.speechSynthesis.cancel(),setTimeout(function(){window.speechSynthesis.speak(n)},250)):window.speechSynthesis.speak(n)}}]),e}(),Ln=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={multiplier:1},n.colStyle={margin:0,padding:0},n.toggleDouble=n.toggleDouble.bind(Object(dn.a)(Object(dn.a)(n))),n.toggleTriple=n.toggleTriple.bind(Object(dn.a)(Object(dn.a)(n))),n.addDart=n.addDart.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"addDart",value:function(e){this.props.addDart(e,this.state.multiplier),this.setState({multiplier:1})}},{key:"toggleDouble",value:function(){this.setState({multiplier:2===this.state.multiplier?1:2})}},{key:"toggleTriple",value:function(){this.setState({multiplier:3===this.state.multiplier?1:3})}},{key:"render",value:function(){for(var e=this,t=[],n=this.props.landscapeOrientation?4:6,a=this.props.landscapeOrientation?6:4,i=100/n+"%",s={height:"100%",width:100/a+"%",lineHeight:0,fontSize:this.props.landscapeOrientation?"6vh":"3vh"},o={},l=function(t){o[t-1]=r.a.createElement(M.c,{style:Object(c.a)({},s),className:"score-button",onClick:function(){return e.addDart(t)},key:"scorebuttons_button_"+t,bsStyle:"primary"},t)},u=1;u<=20;u++)l(u);o[20]=r.a.createElement(M.c,{style:Object(c.a)({},s),className:"score-button",onClick:function(){return e.addDart(25)},key:"scorebuttons_button_25",bsStyle:"primary"},"Bull"),o[21]=r.a.createElement(M.c,{style:Object(c.a)({},s),className:"score-button"+(2===this.state.multiplier?" multiplier-toggled":""),onClick:this.toggleDouble,bsStyle:"success",key:"scorebuttons_button_double"},"Double"),o[22]=r.a.createElement(M.c,{style:Object(c.a)({},s),className:"score-button"+(3===this.state.multiplier?" multiplier-toggled":""),onClick:this.toggleTriple,bsStyle:"success",key:"scorebuttons_button_triple"},"Triple"),o[23]=r.a.createElement(M.c,{style:Object(c.a)({},s),className:"score-button",onClick:function(){return e.addDart(0)},bsStyle:"danger",key:"scorebuttons_button_0"},"0");for(u=0;u<n;u++){for(var h=[],p=u*a;p<u*a+a;p++)h.push(o[p]);t.push(r.a.createElement("div",{style:{height:i,width:"100%"},key:"scorebuttons_row_"+u},h))}return t[0].props.children[0].props.style.borderTopLeftRadius=4,t[0].props.children[t[0].props.children.length-1].props.style.borderTopRightRadius=4,t[t.length-1].props.children[0].props.style.borderBottomLeftRadius=4,t[t.length-1].props.children[t[t.length-1].props.children.length-1].props.style.borderBottomRightRadius=4,r.a.createElement("div",{style:Object(c.a)({},this.props.style)},t)}}]),t}(r.a.Component),An=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={fullscreen:!1},n.toggleFullscreen=n.toggleFullscreen.bind(Object(dn.a)(Object(dn.a)(n))),n.updateFullscreen=n.updateFullscreen.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.updateFullscreen(),document.addEventListener("fullscreenchange",this.updateFullscreen),document.addEventListener("webkitfullscreenchange",this.updateFullscreen),document.addEventListener("msfullscreenchange",this.updateFullscreen)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("fullscreenchange",this.updateFullscreen),document.removeEventListener("webkitfullscreenchange",this.updateFullscreen),document.removeEventListener("msfullscreenchange",this.updateFullscreen)}},{key:"updateFullscreen",value:function(e){this.setState({fullscreen:this.isFullscreen()})}},{key:"toggleFullscreen",value:function(){var e=document.documentElement;this.isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"isFullscreen",value:function(){return document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement}},{key:"render",value:function(){return r.a.createElement(M.c,{bsStyle:this.props.bsStyle,onClick:this.toggleFullscreen,className:this.props.className,style:Object(c.a)({},this.props.style)},this.state.fullscreen?r.a.createElement(M.h,{style:Object(c.a)({},this.props.glyphiconStyle),className:this.props.className?this.props.className+"-icon":"",glyph:"resize-small"}):r.a.createElement(M.h,{style:Object(c.a)({},this.props.glyphiconStyle),className:this.props.className?this.props.className+"-icon":"",glyph:"resize-full"}))}}]),t}(r.a.Component),xn={};xn[E.key]={},xn[E.key][y.key]={},xn[E.key][y.key][1]={2:"D1",4:"D2",6:"D3",8:"D4",10:"D5",12:"D6",14:"D7",16:"D8",18:"D9",20:"D10",22:"D11",24:"D12",26:"D13",28:"D14",30:"D15",32:"D16",34:"D17",36:"D18",38:"D19",40:"D20",50:"D25"},xn[E.key][y.key][2]={2:"D1",3:"1 | D1",4:"D2",5:"1 | D2",6:"D3",7:"3 | D2",8:"D4",9:"1 | D4",10:"D5",11:"3 | D4",12:"D6",13:"5 | D4",14:"D7",15:"7 | D4",16:"D8",17:"9 | D4",18:"D9",19:"3 | D8",20:"D10",21:"5 | D8",22:"D11",23:"7 | D8",24:"D12",25:"1 | D12",26:"D13",27:"3 | D12",28:"D14",29:"5 | D12",30:"D15",31:"7 | D12",32:"D16",33:"1 | D16",34:"D17",35:"3 | D16",36:"D18",37:"5 | D16",38:"D19",39:"7 | D16",40:"D20",41:"9 | D16",42:"10 | D16",43:"11 | D16",44:"12 | D16",45:"13 | D16",46:"10 | D18",47:"15 | D16",48:"8 | D20",49:"9 | D20",50:"10 | D20",51:"11 | D20",52:"12 | D20",53:"13 | D20",54:"14 | D20",55:"15 | D20",56:"16 | D20",57:"17 | D20",58:"18 | D20",59:"19 | D20",60:"20 | D20",61:"T11 | D14",62:"T12 | D13",63:"T13 | D12",64:"T14 | D11",65:"T15 | D10",66:"T16 | D9",67:"T17 | D8",68:"T18 | D7",69:"T19 | D6",70:"T20 | D5",71:"T13 | D16",72:"T16 | D12",73:"T19 | D8",74:"T14 | D16",75:"T17 | D12",76:"T20 | D8",77:"T19 | D10",78:"T18 | D12",79:"T19 | D11",80:"T20 | D10",81:"T15 | D18",82:"T14 | D20",83:"T17 | D16",84:"T20 | D12",85:"T15 | D20",86:"T18 | D16",87:"T17 | D18",88:"T20 | D14",89:"T19 | D16",90:"T18 | D18",91:"T17 | D20",92:"T20 | D16",93:"T19 | D18",94:"T18 | D20",95:"T19 | D19",96:"T20 | D18",97:"T19 | D20",98:"T20 | D19",100:"T20 | D20",101:"T17 | D25",104:"T18 | D25",107:"T19 | D25",110:"T20 | D25"},xn[E.key][y.key][3]={2:"D1",3:"1 | D1",4:"D2",5:"1 | D2",6:"D3",7:"3 | D2",8:"D4",9:"1 | D4",10:"D5",11:"3 | D4",12:"D6",13:"5 | D4",14:"D7",15:"7 | D4",16:"D8",17:"9 | D4",18:"D9",19:"3 | D8",20:"D10",21:"5 | D8",22:"D11",23:"7 | D8",24:"D12",25:"1 | D12",26:"D13",27:"3 | D12",28:"D14",29:"5 | D12",30:"D15",31:"7 | D12",32:"D16",33:"1 | D16",34:"D17",35:"3 | D16",36:"D18",37:"5 | D16",38:"D19",39:"7 | D16",40:"D20",41:"9 | D16",42:"10 | D16",43:"11 | D16",44:"12 | D16",45:"13 | D16",46:"10 | D18",47:"15 | D16",48:"8 | D20",49:"9 | D20",50:"10 | D20",51:"11 | D20",52:"12 | D20",53:"13 | D20",54:"14 | D20",55:"15 | D20",56:"16 | D20",57:"17 | D20",58:"18 | D20",59:"19 | D20",60:"20 | D20",61:"25 | D18",62:"T10 | D16",63:"T13 | D12",64:"T16 | D8",65:"T11 | D16",66:"T10 | D18",67:"T17 | D8",68:"T20 | D4",69:"T19 | D6",70:"T18 | D8",71:"T13 | D16",72:"T12 | D18",73:"T19 | D8",74:"T14 | D16",75:"T17 | D12",76:"T20 | D8",77:"T19 | D10",78:"T18 | D12",79:"T19 | D11",80:"T20 | D10",81:"T15 | D18",82:"D25 | D16",83:"T17 | D16",84:"T20 | D12",85:"T15 | D20",86:"T18 | D16",87:"T17 | D18",88:"T20 | D14",89:"T19 | D16",90:"T20 | D15",91:"D25 | 9 | D16",92:"D25 | 10 | D16",93:"D25 | 11 | D16",94:"D25 | 12 | D16",95:"D25 | 13 | D16",96:"T20 | D18",97:"T19 | D20",98:"T20 | D19",99:"T19 | 10 | D16",100:"T20 | D20",101:"T20 | 9 | D16",102:"T20 | 10 | D16",103:"T19 | 10 | D18",104:"T19 | 15 | D16",105:"T20 | 13 | D16",106:"T20 | 14 | D16",107:"T19 | 10 | D20",108:"T18 | 14 | D20",109:"T20 | 9 | D20",110:"T20 | 10 | D20",111:"T20 | 11 | D20",112:"T20 | 12 | D20",113:"T19 | 16 | D20",114:"T18 | 20 | D20",115:"T20 | 15 | D20",116:"T20 | 16 | D20",117:"T20 | 17 | D20",118:"T20 | 18 | D20",119:"T19 | T12 | D13",120:"T20 | 20 | D20",121:"T20 | T11 | D14",122:"T18 | T18 | D7",123:"T19 | T16 | D9",124:"T20 | T14 | D11",125:"D25 | 25 | D25",126:"T19 | 19 | D25",127:"T20 | T17 | D8",128:"T18 | T18 | D10",129:"T19 | T16 | D12",130:"T20 | 20 | D25",131:"T20 | T13 | D16",132:"D25 | T14 | D20",133:"T20 | T19 | D8",134:"T20 | T14 | D16",135:"D25 | T15 | D20",136:"T20 | T20 | D8",137:"T20 | T19 | D10",138:"T20 | T18 | D12",139:"T20 | T19 | D11",140:"T20 | T20 | D10",141:"T20 | T15 | D18",142:"T20 | T14 | D20",143:"T20 | T17 | D16",144:"T20 | T20 | D12",145:"T20 | T15 | D20",146:"T20 | T18 | D16",147:"T20 | T17 | D18",148:"T20 | T16 | D20",149:"T20 | T19 | D16",150:"T20 | T18 | D18",151:"T20 | T17 | D20",152:"T20 | T20 | D16",153:"T20 | T19 | D18",154:"T20 | T18 | D20",155:"T20 | T19 | D19",156:"T20 | T20 | D18",157:"T20 | T19 | D20",158:"T20 | T20 | D19",160:"T20 | T20 | D20",161:"T20 | T17 | D25",164:"T20 | T18 | D25",167:"T20 | T19 | D25",170:"T20 | T20 | D25"};var Mn=xn,_n=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"getPossibleCheckout",value:function(e,t,n,a,r){var i=Mn[E.key][a.key];if(!i)return"Keine Finish-Angaben f\xfcr: ["+a.text+"]";if(n!==E&&!r)return"Keine Finish-Angabe solange Check-In nicht erf\xfcllt";var s=i[t][e];return s||"Kein Finish m\xf6glich"}}]),e}(),Rn=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={gameFinishedModalShow:void 0!==e.winner,rematchStartingPlayer:e.players[e.players.length>1?1:0]},n.modalBodyStyle={textAlign:"center"},n.handleGameFinishedModalClose=n.handleGameFinishedModalClose.bind(Object(dn.a)(Object(dn.a)(n))),n.handleRematchStartingPlayerChanged=n.handleRematchStartingPlayerChanged.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){bn.setTitlePrefix("Aktuelles Spiel")}},{key:"componentDidUpdate",value:function(e){this.props.players===e.players&&this.props.winner===e.winner||this.setState({rematchStartingPlayer:this.props.players[this.props.players.length>1?1:0],gameFinishedModalShow:void 0!==this.props.winner}),this.props.speechOutputActive&&this.props.announcementText&&this.props.announcementText!==e.announcementText&&Fn.speak(this.props.announcementText,this.props.selectedVoice)}},{key:"componentWillUnmount",value:function(){this.props.setNavigationBarVisibility(!0)}},{key:"handleRematchStartingPlayerChanged",value:function(e){this.setState({rematchStartingPlayer:e})}},{key:"handleGameFinishedModalClose",value:function(){this.setState({gameFinishedModalShow:!1})}},{key:"render",value:function(){var e=this,t=this.props.landscapeOrientation?{height:"38%",display:"flex",flexGrow:1}:{height:"37%"},n=this.props.landscapeOrientation?{paddingRight:3,paddingBottom:3,height:"100%",width:this.props.training?"90%":"45%"}:{height:this.props.training?"100%":"50%",width:"100%",paddingBottom:3},a={height:"100%",width:"100%"},i=this.props.landscapeOrientation?{display:"flex",flexDirection:"column",height:"100%",width:"10%"}:{display:"flex",flexDirection:"row",height:"9%",width:"100%",paddingBottom:3},s=this.props.landscapeOrientation?{flexGrow:1,width:"100%",marginBottom:3,lineHeight:0,fontSize:"6vh"}:{height:"100%",flexGrow:1,fontSize:"4vh"},o={marginLeft:3,marginRight:3,fontSize:this.props.landscapeOrientation?"8vh":"6vh"},l=r.a.createElement("div",{style:i},r.a.createElement(M.k,{container:this,rootClose:!0,trigger:"click",placement:this.props.landscapeOrientation?"left":"top",overlay:r.a.createElement(M.m,{id:"gamebuttons_popover"},r.a.createElement(An,{bsStyle:"primary",style:o}),r.a.createElement(M.c,{bsStyle:"primary",style:Object(c.a)({},o,{transform:this.props.navigationBarVisible?"":"rotate(180deg)"}),onClick:this.props.toggleNavigationBar},r.a.createElement(M.h,{glyph:"eject"})),r.a.createElement(M.c,{bsStyle:"primary",style:o,onClick:this.props.toggleSpeechOutput},r.a.createElement(M.h,{glyph:this.props.speechOutputActive?"volume-up":"volume-off"})))},r.a.createElement(M.c,{bsStyle:"primary",style:Object(c.a)({},s,{marginRight:3})},r.a.createElement(M.h,{glyph:"option-horizontal"}))),r.a.createElement(M.c,{bsStyle:"warning",style:s,onClick:function(){return e.props.undoDart()}},r.a.createElement(M.h,{glyph:"repeat",style:{transform:"scaleX(-1)"}})));return r.a.createElement("div",{className:"game",style:{height:"100%"}},r.a.createElement("div",{style:t},r.a.createElement("div",{style:n},r.a.createElement(Un,{style:a,index:0})),!this.props.training&&r.a.createElement("div",{style:n},r.a.createElement(Un,{style:a,index:1})),this.props.landscapeOrientation&&l),r.a.createElement("div",{style:{height:this.props.landscapeOrientation?"8%":"12%",margin:0,paddingBottom:3}},r.a.createElement(M.r,{style:{display:"flex",flexDirection:this.props.landscapeOrientation?"row":"column",justifyContent:"space-between",alignItems:"center",alignContent:"center",height:"100%",margin:0,padding:0,paddingLeft:10,paddingRight:10,fontWeight:"bold",fontSize:this.props.landscapeOrientation?"4vh":"3vh"}},r.a.createElement("div",null,_n.getPossibleCheckout(this.props.currentPlayerScore,this.props.currentPlayerDartsLeft,this.props.checkInMode,this.props.checkOutMode,this.props.currentPlayerCheckinCondition)),r.a.createElement("div",null,"[",this.props.startScore,"] [",this.props.checkInMode.text,"] [",this.props.checkOutMode.text,"]"))),!this.props.landscapeOrientation&&l,r.a.createElement(Ln,{style:{height:this.props.landscapeOrientation?"54%":"42%",width:"100%"},addDart:this.props.addDart,landscapeOrientation:this.props.landscapeOrientation}),r.a.createElement(M.j,{dialogClassName:"modal-bottom",show:this.state.gameFinishedModalShow,onHide:this.handleGameFinishedModalClose,keyboard:!1,backdrop:"static"},r.a.createElement(M.j.Body,{style:this.modalBodyStyle},r.a.createElement("h4",null,void 0!==this.props.winner&&this.props.winner.name," hat gewonnen!")),r.a.createElement(M.j.Footer,{style:{textAlign:"center"}},r.a.createElement(M.f,{style:{display:"inline-flex"},id:"rematch_player_dropdown"},r.a.createElement(M.c,{bsStyle:"primary",style:{margin:0,marginTop:5},onClick:function(){e.props.isLoggedIn&&e.props.archiveGame(e.props.game),e.props.rematch(e.state.rematchStartingPlayer)}},"Rematch (",this.state.rematchStartingPlayer.name," beginnt)"),r.a.createElement(M.f.Toggle,{bsStyle:"primary",style:{margin:0,marginRight:5,marginTop:5}}),r.a.createElement(M.f.Menu,{style:{minWidth:"100%",textAlign:"center"}},this.props.players.map(function(t,n){return r.a.createElement(M.i,{key:"rematch_player_"+n,onClick:function(){return e.handleRematchStartingPlayerChanged(t)}},t.name," beginnt")}))),r.a.createElement(M.c,{style:{margin:0,marginRight:5,marginTop:5},bsStyle:"primary",onClick:function(){e.props.isLoggedIn&&e.props.archiveGame(e.props.game),e.props.exit()}},"Zur\xfcck zum Men\xfc"),r.a.createElement(M.c,{bsStyle:"warning",style:{margin:0,marginTop:5},onClick:function(){return e.props.undoDart()}},"Dart r\xfcckg\xe4ngig machen"))))}}]),t}(r.a.Component);var Bn=Object(l.b)(function(e){var t=e.game.players,n=e.game.score,a=e.game.checkOutMode,r=e.game.checkInMode,i=D(t,n,r,a),s=i.playerInformation[i.turnInformation.current.playerIndex].score,o=function(e){var t=e.aufnahmen[e.aufnahmen.length-1];return void 0!==t?3-t.length:3}(t[i.turnInformation.current.playerIndex]),l=i.playerInformation[i.turnInformation.current.playerIndex].checkInCondition;return{landscapeOrientation:e.app.landscapeOrientation,startScore:e.game.score,checkInMode:e.game.checkInMode,checkOutMode:e.game.checkOutMode,players:e.game.players,currentPlayerScore:s,currentPlayerDartsLeft:o,currentPlayerCheckinCondition:l,winner:e.game.winner,game:e.game,training:e.game.training,announcementText:e.game.announcementText,isLoggedIn:e.user.isLoggedIn,selectedVoice:e.speech.selectedVoice?e.speech.selectedVoice:e.speech.defaultVoice,speechOutputActive:e.speech.speechOutputActive,navigationBarVisible:e.app.navigationBarVisible}},function(e){return{addDart:function(t,n){return e(function(e,t){return{type:h,value:e,multiplier:t}}(t,n))},undoDart:function(){return e({type:p})},exit:function(){return e(g())},rematch:function(t){return e(function(e){return{type:m,startingPlayer:e}}(t))},archiveGame:function(t){return e(function(e){return function(t){return t(St()),I.fetchPost(F.getConfig().resourceUrls.game,e,function(e){return t(kt())},function(e){t(Tt(e.message)),K.defaultErrorHandling(t,e,W("Could not archive game",e.message))},function(e){t(Tt(e.message)),t(W("Could not archive game",e.message))})}}(t))},toggleSpeechOutput:function(){return e({type:rn})},toggleNavigationBar:function(){return e({type:ln})},setNavigationBarVisibility:function(t){return e(function(e){return{type:cn,visibility:e}}(t))}}})(Rn),Gn=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"getSelectedVoiceName",value:function(){return localStorage.getItem("selectedVoiceName")}},{key:"setSelectedVoiceName",value:function(e){return localStorage.setItem("selectedVoiceName",e)}}]),e}(),Vn=n(20),zn=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={},n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(Vn.l,{width:"100%",height:300},r.a.createElement(Vn.d,{data:this.props.data},r.a.createElement(Vn.e,{vertical:!1}),r.a.createElement(Vn.n,{dataKey:"opponent"}),r.a.createElement(Vn.o,null),r.a.createElement(Vn.m,{labelFormatter:function(){return""}}),r.a.createElement(Vn.f,null),r.a.createElement(Vn.c,{name:"Gewonnen",dataKey:"wonCount",stackId:"a",fillOpacity:.8,fill:"#08965f"}),r.a.createElement(Vn.c,{name:"Verloren",dataKey:"lostCount",stackId:"a",fillOpacity:.8,fill:"#e01d36"})))}}]),t}(r.a.Component),Hn=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={},n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(Vn.l,{width:"100%",height:300},r.a.createElement(Vn.d,{data:this.props.data},r.a.createElement(Vn.e,{vertical:!1}),r.a.createElement(Vn.n,{dataKey:"score",interval:0}),r.a.createElement(Vn.o,null),r.a.createElement(Vn.m,{labelFormatter:function(){return""}}),r.a.createElement(Vn.f,null),r.a.createElement(Vn.c,{name:"Single",dataKey:"singleCount",stackId:"a",fillOpacity:.8,fill:"#111"}),r.a.createElement(Vn.c,{name:"Double",dataKey:"doubleCount",stackId:"a",fillOpacity:.8,fill:"#08965f"}),r.a.createElement(Vn.c,{name:"Triple",dataKey:"tripleCount",stackId:"a",fillOpacity:.8,fill:"#e01d36"})))}}]),t}(r.a.Component),Wn=(n(460),function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",{className:"stack-loader-container"},r.a.createElement("i",{className:"stack-loader-layer"}),r.a.createElement("i",{className:"stack-loader-layer"}),r.a.createElement("i",{className:"stack-loader-layer"}),r.a.createElement("p",{className:"stack-loader-label"},r.a.createElement("strong",null,this.props.label)));return this.props.modal?r.a.createElement("div",{style:{zIndex:980,position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000bd"}},r.a.createElement("div",{style:{zIndex:990,position:"fixed",left:"50%",top:"50%",color:"white"}},e)):e}}]),t}(r.a.Component)),Kn=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={data:n.sortAndFillData(e.data)},n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.setState({data:this.sortAndFillData(this.props.data)})}},{key:"sortAndFillData",value:function(e){for(var t=[],n=1;n<=20;n++){var a=this.getExisitingScore(e,n);null!==a?t.push(a):t.push({score:""+n,singleCount:0,doubleCount:0,tripleCount:0})}return t.sort(zt.sortScoreByBoardOrder),t}},{key:"getExisitingScore",value:function(e,t){for(var n=0;n<e.length;n++)if(parseInt(e[n].score,10)===t)return e[n];return null}},{key:"render",value:function(){var e=window.innerWidth>0?window.innerWidth:window.screen.width,t=window.innerHeight>0?window.innerHeight:window.screen.height;return r.a.createElement(Vn.l,{width:"100%",height:e>t?500:e},r.a.createElement(Vn.k,{cx:"50%",cy:"50%",outerRadius:"90%",data:this.state.data},r.a.createElement(Vn.h,null),r.a.createElement(Vn.g,{dataKey:"score"}),r.a.createElement(Vn.i,{angle:90,scale:"sqrt"}),r.a.createElement(Vn.j,{name:"Single",dataKey:"singleCount",stroke:"#111",fill:"#111",fillOpacity:.8}),r.a.createElement(Vn.j,{name:"Double",dataKey:"doubleCount",stroke:"#08965f",fill:"#08965f",fillOpacity:.8}),r.a.createElement(Vn.j,{name:"Triple",dataKey:"tripleCount",stroke:"#e01d36",fill:"#e01d36",fillOpacity:.8}),r.a.createElement(Vn.f,null),r.a.createElement(Vn.m,{labelFormatter:function(){return""}})))}}]),t}(r.a.Component),Yn=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return this.props.isLoggedIn?this.props.children:r.a.createElement(M.a,{bsStyle:"warning",style:{marginBottom:5,textAlign:"center"}},r.a.createElement("strong",null,this.props.text),r.a.createElement("br",null),r.a.createElement(M.c,{bsStyle:"primary",style:{marginTop:10},onClick:this.props.showLogin,disabled:this.props.isLoggingIn},r.a.createElement(M.h,{glyph:"log-in"})," Anmelden"))}}]),t}(r.a.Component),Qn=Object(l.b)(function(e,t){return{text:t.text,isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn}},function(e){return{showLogin:function(){return e(Ze())}}})(Yn),qn=n(22),Zn=n(46),Jn=(n(465),n(80));function Xn(e,t){return e.toDateString()===t.toDateString()}function $n(e){return e<10?"0"+e:e}var ea=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"toDate",value:function(e,t){return t&&t.replaceToday&&function(e){return Xn(new Date,e)}(e)?"Heute":t&&t.replaceYesterday&&function(e){var t=new Date;return t.setDate(t.getDate()-1),Xn(t,e)}(e)?"Gestern":$n(e.getDate().toString())+"."+$n((e.getMonth()+1).toString())+"."+e.getFullYear().toString()}},{key:"toTime",value:function(e){return $n(e.getHours().toString())+":"+$n(e.getMinutes().toString())+" Uhr"}}]),e}(),ta={open:!1,players:[],games:[],scoreComparator:"",score:"",currentScoreComparator:"",currentScore:"",checkInMode:void 0,checkOutMode:void 0,startDate:void 0,endDate:void 0,startDateOpen:!1,endDateOpen:!1},na=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state=Object(c.a)({},ta),n.toggleOpen=n.toggleOpen.bind(Object(dn.a)(Object(dn.a)(n))),n.handlePlayerChange=n.handlePlayerChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleGamesChange=n.handleGamesChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleScoreComparatorChange=n.handleScoreComparatorChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleScoreChange=n.handleScoreChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleCurrentScoreComparatorChange=n.handleCurrentScoreComparatorChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleCurrentScoreChange=n.handleCurrentScoreChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleCheckInModeChange=n.handleCheckInModeChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleCheckOutModeChange=n.handleCheckOutModeChange.bind(Object(dn.a)(Object(dn.a)(n))),n.toggleStartDateOpen=n.toggleStartDateOpen.bind(Object(dn.a)(Object(dn.a)(n))),n.toggleEndDateOpen=n.toggleEndDateOpen.bind(Object(dn.a)(Object(dn.a)(n))),n.handleStartDateChange=n.handleStartDateChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleEndDateChange=n.handleEndDateChange.bind(Object(dn.a)(Object(dn.a)(n))),n.applyFilter=n.applyFilter.bind(Object(dn.a)(Object(dn.a)(n))),n.resetFilter=n.resetFilter.bind(Object(dn.a)(Object(dn.a)(n))),n.closeDates=n.closeDates.bind(Object(dn.a)(Object(dn.a)(n))),n.hideDatePortalsKeyListener=R.ifEscKey(n.closeDates),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.hideDatePortalsKeyListener)}},{key:"componentDidUpdate",value:function(e){e.options.comparativeOperators!==this.props.options.comparativeOperators&&this.props.options.comparativeOperators.length>0&&this.setState({currentScoreComparator:this.state.currentScoreComparator===ta.currentScoreComparator?{value:this.props.options.comparativeOperators[0],label:this.props.options.comparativeOperators[0]}:ta.currentScoreComparator,scoreComparator:this.state.scoreComparator===ta.scoreComparator?{value:this.props.options.comparativeOperators[0],label:this.props.options.comparativeOperators[0]}:ta.scoreComparator})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.hideDatePortalsKeyListener)}},{key:"handlePlayerChange",value:function(e){this.setState({players:e})}},{key:"handleGamesChange",value:function(e){this.setState({games:e})}},{key:"handleScoreComparatorChange",value:function(e){this.setState({scoreComparator:e})}},{key:"handleScoreChange",value:function(e){this.setState({score:e})}},{key:"handleCurrentScoreComparatorChange",value:function(e){this.setState({currentScoreComparator:e})}},{key:"handleCurrentScoreChange",value:function(e){this.setState({currentScore:e})}},{key:"toggleOpen",value:function(){this.setState({open:!this.state.open})}},{key:"toggleStartDateOpen",value:function(){this.setState({startDateOpen:!this.state.startDateOpen})}},{key:"toggleEndDateOpen",value:function(){this.setState({endDateOpen:!this.state.endDateOpen})}},{key:"closeDates",value:function(){this.setState({startDateOpen:!1,endDateOpen:!1})}},{key:"handleStartDateChange",value:function(e){this.setState({startDate:e,startDateOpen:!1})}},{key:"handleEndDateChange",value:function(e){this.setState({endDate:e,endDateOpen:!1})}},{key:"handleCheckInModeChange",value:function(e){this.setState({checkInMode:e})}},{key:"handleCheckOutModeChange",value:function(e){this.setState({checkOutMode:e})}},{key:"applyFilter",value:function(e){var t={};if(this.state.players.length>0){t.userIds=[];for(var n=0;n<this.state.players.length;n++)for(var a=0;a<this.state.players[n].value.length;a++)t.userIds.push(this.state.players[n].value[a])}if(this.state.games.length>0){t.gameIds=[];for(var r=0;r<this.state.games.length;r++)t.gameIds.push(this.state.games[r].value)}this.state.checkInMode&&(t.checkInMode=this.state.checkInMode),this.state.checkOutMode&&(t.checkOutMode=this.state.checkOutMode),""!==this.state.scoreComparator.value&&""!==this.state.score&&(t.startScore=this.state.score,t.startScoreComparativeOperator=this.state.scoreComparator.value),""!==this.state.currentScoreComparator.value&&""!==this.state.currentScore&&(t.currentScore=this.state.currentScore,t.currentScoreComparativeOperator=this.state.currentScoreComparator.value),this.state.startDate&&(t.startDate=this.state.startDate.getTime()),this.state.endDate&&(t.endDate=this.state.endDate.getTime()),this.props.fetchStatistics(t),this.toggleOpen()}},{key:"resetFilter",value:function(e){var t=this.props.options.comparativeOperators.length>0?{value:this.props.options.comparativeOperators[0],label:this.props.options.comparativeOperators[0]}:ta.scoreComparator;this.setState(Object(c.a)({},ta,{currentScoreComparator:t,scoreComparator:t,open:!0}))}},{key:"customSelectStyles",value:function(e,t,n){return{control:function(n){return Object(c.a)({},n,{height:e,minHeight:e,minWidth:t,maxWidth:t})},container:function(e){return Object(c.a)({},e,{zIndex:n})}}}},{key:"render",value:function(){var e=this,t=[];for(var n in this.props.options.usernameToUserIds)this.props.options.usernameToUserIds.hasOwnProperty(n)&&t.push({label:n,value:this.props.options.usernameToUserIds[n]});t.sort(zt.sortByLabelAsc);for(var a=this.props.options.games.slice().sort(zt.sortByTimestampDesc),i=[],s=0;s<a.length;s++){var o=a[s].opponents.length>0?" vs. "+a[s].opponents.join():" Training",l=a.length-s,u=ea.toDate(new Date(a[s].timestamp),{replaceToday:!0,replaceYesterday:!0}),h=ea.toTime(new Date(a[s].timestamp));i.push({label:o+" ("+u+" "+h+") [#"+l+"]",value:a[s].id})}var p=this.props.options.comparativeOperators.map(function(e){return{value:e,label:e}}),d=function(t){var n=t.className,a=t.children;return r.a.createElement(Zn.a,{className:n},r.a.createElement(M.c,{onClick:e.closeDates,style:{position:"absolute",top:-17,right:-20,borderRadius:"100%",zIndex:5}},r.a.createElement(qn.a,{glyph:"remove"})),a)};return r.a.createElement("div",{style:Object(c.a)({},this.props.style)},r.a.createElement(M.c,{bsStyle:"primary",style:{marginBottom:5},onClick:this.toggleOpen},r.a.createElement(qn.a,{glyph:"filter"})," Filter ",this.state.open?" verbergen":" anzeigen"),r.a.createElement(M.d,{in:this.state.open},r.a.createElement("div",{style:{backgroundColor:"#337ab71c",borderRadius:3,borderLeft:"3px solid #337ab7",borderRight:"3px solid #337ab7"}},r.a.createElement(aa,null,r.a.createElement("div",{style:{marginLeft:3,marginRight:3,marginBottom:5,flexBasis:"48%",minWidth:250}},r.a.createElement("p",{style:{margin:0}},"Spieler"),r.a.createElement(Jn.a,{placeholder:"",className:"select-container",classNamePrefix:"select",value:this.state.players,onChange:this.handlePlayerChange,styles:this.customSelectStyles(void 0,void 0,550),closeMenuOnSelect:!1,options:t,isMulti:!0})),r.a.createElement("div",{style:{marginLeft:3,marginRight:3,marginBottom:5,flexBasis:"48%",minWidth:250}},r.a.createElement("p",{style:{margin:0}},"Gespielte Spiele"),r.a.createElement(Jn.a,{placeholder:"",className:"select-container",classNamePrefix:"select",value:this.state.games,onChange:this.handleGamesChange,styles:this.customSelectStyles(void 0,void 0,540),closeMenuOnSelect:!1,options:i,isMulti:!0}))),r.a.createElement(aa,null,r.a.createElement("div",{style:{marginRight:5,marginBottom:5}},r.a.createElement("p",{style:{margin:0}},"Score"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{width:75}},r.a.createElement(Jn.a,{value:this.state.scoreComparator,className:"select-container",classNamePrefix:"select",onChange:this.handleScoreComparatorChange,styles:this.customSelectStyles(34,75,530),placeholder:"",options:p})),r.a.createElement(vn,{id:"filter_scoreinput",value:this.state.score,onChange:this.handleScoreChange}))),r.a.createElement("div",{style:{marginBottom:5}},r.a.createElement("p",{style:{margin:0}},"Aktueller Score"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Jn.a,{value:this.state.currentScoreComparator,className:"select-container",classNamePrefix:"select",onChange:this.handleCurrentScoreComparatorChange,styles:this.customSelectStyles(34,75,520),placeholder:"",options:p}),r.a.createElement(vn,{id:"filter_currentscoreinput",value:this.state.currentScore,onChange:this.handleCurrentScoreChange})))),r.a.createElement(aa,null,r.a.createElement("div",{style:{marginRight:5,marginBottom:5}},r.a.createElement("p",{style:{margin:0}},"Check-In"),r.a.createElement(Cn,{value:this.state.checkInMode,onChange:this.handleCheckInModeChange,borderRightZero:!0}),r.a.createElement(M.c,{style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:-1},onClick:function(){return e.handleCheckInModeChange(null)}},r.a.createElement(qn.a,{glyph:"remove"}))),r.a.createElement("div",{style:{marginBottom:5}},r.a.createElement("p",{style:{margin:0}},"Check-Out"),r.a.createElement(Dn,{value:this.state.checkOutMode,onChange:this.handleCheckOutModeChange,borderRightZero:!0}),r.a.createElement(M.c,{style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:-1},onClick:function(){return e.handleCheckOutModeChange(null)}},r.a.createElement(qn.a,{glyph:"remove"})))),r.a.createElement(aa,null,r.a.createElement("div",{style:{marginRight:5,marginBottom:5}},r.a.createElement("p",{style:{margin:0}},"Von"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Zn.b,{isClearable:!0,disabledKeyboardNavigation:!0,dateFormat:"dd.MM.yyyy",className:"form-control datepicker-input-for-toggle",selected:this.state.startDate,onChange:this.handleStartDateChange,popperClassName:"datepicker-hidden-popper"}),r.a.createElement(M.c,{style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeftWidth:0},onClick:this.toggleStartDateOpen},r.a.createElement(qn.a,{glyph:"calendar"}))),this.state.startDateOpen&&r.a.createElement(Zn.b,{inline:!0,withPortal:!0,selected:this.state.startDate,selectsStart:!0,startDate:this.state.startDate,endDate:this.state.endDate,maxDate:new Date,onChange:this.handleStartDateChange,showYearDropdown:!0,scrollableYearDropdown:!0,calendarContainer:d,todayButton:"Heute"})),r.a.createElement("div",{style:{marginBottom:5}},r.a.createElement("p",{style:{margin:0}},"Bis"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Zn.b,{isClearable:!0,disabledKeyboardNavigation:!0,dateFormat:"dd.MM.yyyy",className:"form-control datepicker-input-for-toggle",selected:this.state.endDate,onChange:this.handleEndDateChange,popperClassName:"datepicker-hidden-popper"}),r.a.createElement(M.c,{style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeftWidth:0},onClick:this.toggleEndDateOpen},r.a.createElement(qn.a,{glyph:"calendar"}))),this.state.endDateOpen&&r.a.createElement(Zn.b,{inline:!0,withPortal:!0,selected:this.state.endDate,selectsEnd:!0,startDate:this.state.startDate,endDate:this.state.endDate,maxDate:new Date,onChange:this.handleEndDateChange,showYearDropdown:!0,scrollableYearDropdown:!0,calendarContainer:d,todayButton:"Heute"}))),r.a.createElement(aa,{style:{justifyContent:"center"}},r.a.createElement(M.c,{bsStyle:"success",style:{marginRight:5,marginBottom:5},onClick:this.applyFilter},r.a.createElement(qn.a,{glyph:"ok"})," Filter anwenden"),r.a.createElement(M.c,{bsStyle:"danger",style:{marginRight:5,marginBottom:5},onClick:this.resetFilter},r.a.createElement(qn.a,{glyph:"remove"})," Filter zur\xfccksetzen")))))}}]),t}(r.a.Component),aa=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:Object(c.a)({display:"flex",flexWrap:"wrap",justifyContent:"space-around",textAlign:"center"},this.props.style)},this.props.children)}}]),t}(r.a.Component),ra=na,ia=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={},n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(Vn.l,{width:"100%",height:300},r.a.createElement(Vn.b,{data:this.props.data},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorAverageAufnahmeScore",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#337ab7",stopOpacity:.85}),r.a.createElement("stop",{offset:"95%",stopColor:"#337ab7",stopOpacity:.1})),r.a.createElement("linearGradient",{id:"colorAverageAufnahmeScoreCurrentGame",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#08965f",stopOpacity:.66}),r.a.createElement("stop",{offset:"95%",stopColor:"#08965f",stopOpacity:.1}))),r.a.createElement(Vn.e,null),r.a.createElement(Vn.n,{tick:!1}),this.props.fixedYAxis?r.a.createElement(Vn.o,{interval:0,ticks:[20,40,60,80,100,120,140,160,180]}):r.a.createElement(Vn.o,null),r.a.createElement(Vn.m,{labelFormatter:function(){return""}}),r.a.createElement(Vn.f,null),r.a.createElement(Vn.a,{type:"monotone",name:"Gesamtdurchschnitt",dataKey:"averageAufnahmeScore",stroke:"#337ab7",fillOpacity:1,fill:"url(#colorAverageAufnahmeScore)"}),r.a.createElement(Vn.a,{type:"monotone",name:"Durchschnitt je Spiel",dataKey:"averageAufnahmeScoreCurrentGame",stroke:"#08965f",fillOpacity:1,fill:"url(#colorAverageAufnahmeScoreCurrentGame)"})))}}]),t}(r.a.Component),sa="bar",oa=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={dartChartType:sa},n.dartsBarChartRef=r.a.createRef(),n.dartsRadarChartRef=r.a.createRef(),n.handleDartChartTypeChange=n.handleDartChartTypeChange.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){bn.setTitlePrefix("Statistiken"),this.props.isLoggedIn&&(this.props.fetchStatisticsFilterOptions(),this.props.fetchStatistics())}},{key:"componentDidUpdate",value:function(e){!e.isLoggedIn&&this.props.isLoggedIn&&(this.props.fetchStatisticsFilterOptions(),this.props.fetchStatistics())}},{key:"handleDartChartTypeChange",value:function(e){var t=this;this.setState({dartChartType:e},function(){setTimeout(function(){var n=t.getRefForDartChartType(e);n&&n.current&&n.current.scrollIntoView({block:"end",behavior:"smooth"})},50)})}},{key:"getRefForDartChartType",value:function(e){switch(e){case sa:return this.dartsBarChartRef;case"radar":return this.dartsRadarChartRef;default:return null}}},{key:"render",value:function(){return r.a.createElement(Qn,{text:"Statistiken k\xf6nnen nur f\xfcr angemeldete Benutzer erstellt und eingesehen werden"},r.a.createElement("div",{className:"statistics"},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",{style:{marginTop:0}},r.a.createElement("strong",null,"Statistiken")),r.a.createElement(ra,{style:{marginBottom:5},fetchStatistics:this.props.fetchStatistics,options:this.props.options})),this.props.isFetchingStatistics?r.a.createElement(Wn,{modal:!0,label:"Lade Statistiken..."}):r.a.createElement("div",null,this.props.dartData.length>0?this.createDartsView():r.a.createElement(M.a,{bsStyle:"warning"},r.a.createElement("strong",null,"Keine Dart-Daten vorhanden")),Object.keys(this.props.highestAufnahmen).length>0?this.createAufnahmenView():r.a.createElement(M.a,{bsStyle:"warning"},r.a.createElement("strong",null,"Keine Aufnahmen-Daten vorhanden")),this.props.gamesData.length>0?this.createGamesView():r.a.createElement(M.a,{bsStyle:"warning"},r.a.createElement("strong",null,"Keine Spiel-Daten vorhanden")))))}},{key:"createDartsView",value:function(){return r.a.createElement(M.r,{style:{paddingBottom:0,marginBottom:15,textAlign:"center"}},r.a.createElement("h2",{style:{marginTop:0}},r.a.createElement("strong",null,"Darts")),r.a.createElement(M.n,{className:"statistics-table",responsive:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Gesamt:"),r.a.createElement("td",{colSpan:3},this.props.totalDarts)),r.a.createElement("tr",null,r.a.createElement("th",{rowSpan:2},"Checkouts:"),r.a.createElement("th",null,"M\xf6gliche Checkouts"),r.a.createElement("th",null,"Erfolgreiche Checkouts"),r.a.createElement("th",null,"Checkoutrate")),r.a.createElement("tr",null,r.a.createElement("td",null,this.props.possibleCheckoutDarts),r.a.createElement("td",null,this.props.checkoutDarts),r.a.createElement("td",null,this.getDartCheckoutRate())))),r.a.createElement(M.p,{type:"radio",name:"options",value:this.state.dartChartType,onChange:this.handleDartChartTypeChange,style:{marginBottom:10}},r.a.createElement(M.o,{value:sa,style:{width:100}},r.a.createElement(M.h,{glyph:"stats"})),r.a.createElement(M.o,{value:"radar",style:{width:100}},r.a.createElement(M.h,{glyph:"certificate"}))),this.state.dartChartType===sa&&r.a.createElement("div",{ref:this.dartsBarChartRef},r.a.createElement(Hn,{data:this.props.dartData})),"radar"===this.state.dartChartType&&r.a.createElement("div",{ref:this.dartsRadarChartRef},r.a.createElement(Kn,{data:this.props.dartData})))}},{key:"createAufnahmenView",value:function(){var e=[],t=[];for(var n in this.props.highestAufnahmen)this.props.highestAufnahmen.hasOwnProperty(n)&&(e.unshift(r.a.createElement("th",{key:"aufnahme_th_"+n},n)),t.unshift(r.a.createElement("td",{key:"aufnahme_td_"+n},this.props.highestAufnahmen[n])));return r.a.createElement(M.r,{style:{paddingBottom:0,marginBottom:15,textAlign:"center"}},r.a.createElement("h2",{style:{marginTop:0}},r.a.createElement("strong",null,"Aufnahmen")),r.a.createElement(M.n,{className:"statistics-table",responsive:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Durchschnitt:"),r.a.createElement("td",{colSpan:e.length},this.props.averageAufnahmeScore.toFixed(2))),r.a.createElement("tr",null,r.a.createElement("th",{rowSpan:2},"H\xf6chste Aufnahmen (Top ",e.length,"):"),e),r.a.createElement("tr",null,t))),r.a.createElement(ia,{data:this.props.progressData}))}},{key:"createGamesView",value:function(){return r.a.createElement(M.r,{style:{paddingBottom:0,marginBottom:15,textAlign:"center"}},r.a.createElement("h2",{style:{marginTop:0}},r.a.createElement("strong",null,"Spiele")),r.a.createElement(M.n,{className:"statistics-table",responsive:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Gesamt"),r.a.createElement("th",null,"Gewonnen"),r.a.createElement("th",null,"Verloren"),r.a.createElement("th",null,"Siegrate")),r.a.createElement("tr",null,r.a.createElement("td",null,this.props.gamesWon+this.props.gamesLost),r.a.createElement("td",null,this.props.gamesWon),r.a.createElement("td",null,this.props.gamesLost),r.a.createElement("td",null,this.getWinRate())))),r.a.createElement(zn,{data:this.props.gamesData}))}},{key:"getWinRate",value:function(){return this.getRate(this.props.gamesWon,this.props.gamesWon+this.props.gamesLost)}},{key:"getDartCheckoutRate",value:function(){return this.getRate(this.props.checkoutDarts,this.props.possibleCheckoutDarts)}},{key:"getRate",value:function(e,t){var n=(e/t*100).toFixed(2);return isNaN(n)?"-":n+"%"}}]),t}(r.a.Component),la=Object(l.b)(function(e){return{isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn,isFetchingStatistics:e.statistics.isFetching,gamesWon:e.statistics.gamesWon,gamesLost:e.statistics.gamesLost,totalDarts:e.statistics.totalDarts,possibleCheckoutDarts:e.statistics.possibleCheckoutDarts,checkoutDarts:e.statistics.checkoutDarts,averageAufnahmeScore:e.statistics.averageAufnahmeScore,highestAufnahmen:e.statistics.highestAufnahmen,dartData:e.statistics.dartData,gamesData:e.statistics.gamesData,progressData:e.statistics.progressData,options:e.statistics.options}},function(e){return{showLogin:function(){return e(Ze())},fetchStatistics:function(t){return e(function(e){return function(t){return t(xt()),I.fetchPost(F.getConfig().resourceUrls.statistic,e,function(e){return t(Mt(e))},function(e){t(_t(e.message)),K.defaultErrorHandling(t,e,W("Failed to fetch statistics",e.message))},function(e){t(_t(e.message)),t(W("Failed to fetch statistics",e.message))})}}(t))},fetchStatisticsFilterOptions:function(){return e(function(e){return e(Rt()),I.fetchGet(F.getConfig().resourceUrls.statistic+"/filterOptions",function(t){return e(Bt(t))},function(t){e(Gt(t.message)),K.defaultErrorHandling(e,t,W("Failed to fetch statistics filter options",t.message))},function(t){e(Gt(t.message)),e(W("Failed to fetch statistics filter options",t.message))})})}}})(oa),ca=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){bn.setTitlePrefix("Spracheinstellungen")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:Object(c.a)({},this.props.style)},r.a.createElement("h3",{style:{marginTop:0}},r.a.createElement("strong",null,"Spracheinstellungen")),r.a.createElement(M.a,{bsStyle:"warning",style:{marginBottom:5,textAlign:"center"}},"Diese Einstellungen sind abh\xe4ngig vom verwendeten Endger\xe4t und Browser.",r.a.createElement("br",null),"Daher werden sie nicht in Deinem Benutzerkonto gespeichert, sondern in Deinem Browser."),r.a.createElement("p",{style:{marginBottom:0}},r.a.createElement("strong",null,"Sprache:")),r.a.createElement(M.g,{componentClass:"select",style:{width:400,maxWidth:"95%",display:"initial"},onChange:function(t){e.props.onSelectedVoiceChange(t.target.value)},value:this.props.selectedVoice?this.props.selectedVoice.name:this.props.defaultVoice?this.props.defaultVoice.name:void 0},this.props.possibleVoices.map(function(e){var t="possible_voice_"+e.name;return r.a.createElement("option",{key:t,value:e.name},e.name," ",e.default&&"[Standard]")})))}}]),t}(r.a.Component),ua=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{role:"menuitem",onClick:this.props.onSelect},this.props.children)}}]),t}(r.a.Component),ha=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this,t=this.props.right?"navigation-bar-dropdown-menu-right":"";return t=this.props.fullWidth?"navigation-bar-dropdown-menu-full-width":t,r.a.createElement(M.f,{id:this.props.id},r.a.createElement(M.f.Toggle,{noCaret:!this.props.withCaret,className:this.props.withCaret?"navigation-bar-dropdown-toggle":"navigation-bar-bordered-item"},this.props.icon," ",this.props.text),r.a.createElement(M.f.Menu,{className:t},this.props.items.map(function(t,n){return r.a.createElement(ua,{key:e.props.id+"_item_"+n},t)})))}}]),t}(r.a.Component),pa=function e(t,n,a){if(Object(T.a)(this,e),t.length!==n.length)throw new Error("merged and unmerged items must have equal length");this.unmergedItems=t,this.mergedItems=n,this.dropdownConfig=a},da=function e(t,n,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(T.a)(this,e),this.id=t,this.icon=n,this.text=a,this.showCaret=r},ma=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={lastWidth:-1,mergeCount:0},n.bar=r.a.createRef(),n.resetMergeCount=n.resetMergeCount.bind(Object(dn.a)(Object(dn.a)(n))),n.maxMergeCount=n.maxMergeCount.bind(Object(dn.a)(Object(dn.a)(n))),n.shouldMerge=n.shouldMerge.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resetMergeCount),this.resetMergeCount()}},{key:"componentDidUpdate",value:function(e,t,n){var a=void 0!==this.props.fixedItems&&this.props.fixedItems.filter(this.notFalse).length!==e.fixedItems.filter(this.notFalse).length,r=void 0!==this.props.leftContainer&&this.props.leftContainer.mergedItems.filter(this.notFalse).length!==e.leftContainer.mergedItems.filter(this.notFalse).length,i=void 0!==this.props.leftContainer&&this.props.leftContainer.unmergedItems.filter(this.notFalse).length!==e.leftContainer.unmergedItems.filter(this.notFalse).length,s=void 0!==this.props.rightContainer&&this.props.rightContainer.mergedItems.filter(this.notFalse).length!==e.rightContainer.mergedItems.filter(this.notFalse).length,o=void 0!==this.props.rightContainer&&this.props.rightContainer.unmergedItems.filter(this.notFalse).length!==e.rightContainer.unmergedItems.filter(this.notFalse).length;if(a||r||i||s||o)this.resetMergeCount();else if(this.shouldMerge()&&this.state.mergeCount<this.maxMergeCount()){var l=this.state.mergeCount;this.setState({mergeCount:l+1})}}},{key:"notFalse",value:function(e){return!1!==e}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resetMergeCount)}},{key:"shouldMerge",value:function(){return!(!this.bar||!this.bar.current)&&this.bar.current.offsetWidth<this.bar.current.scrollWidth}},{key:"maxMergeCount",value:function(){var e=0;return this.props.leftContainer&&(e+=this.props.leftContainer.unmergedItems.length),this.props.rightContainer&&(e+=this.props.rightContainer.unmergedItems.length),this.props.singleDropdown&&(e+=1),e}},{key:"resetMergeCount",value:function(e){void 0===e?this.setState({mergeCount:0}):e.target.innerWidth!==this.state.lastWidth&&this.setState({mergeCount:0,lastWidth:e.target.innerWidth})}},{key:"render",value:function(){var e=this.props.rightContainer?this.props.rightContainer.unmergedItems:[],t=this.props.rightContainer?this.props.rightContainer.mergedItems:[],n=[],a=[],i=this.props.leftContainer?this.props.leftContainer.unmergedItems:[],s=this.props.leftContainer?this.props.leftContainer.mergedItems:[],o=[],l=[],u=[];if(this.state.mergeCount===this.maxMergeCount()&&this.props.singleDropdown)u=s.concat(r.a.createElement(M.i,{divider:!0})).concat(t);else{var h=e.length-this.state.mergeCount,p=h>=0?h:0;n=t.slice(p,e.length),a=e.slice(0,p);var d=this.state.mergeCount-e.length,m=d>=0?d:0;o=s.slice(0,m),l=i.slice(m,i.length)}var g=Object(c.a)({},this.props.style);return this.props.alignCenter&&(g.justifyContent="center"),r.a.createElement("div",{ref:this.bar,className:"navigation-bar"+(this.props.small?" navigation-bar-small":""),style:g},r.a.createElement("div",{className:"navigation-bar-container"},this.props.fixedItems,o.length>0&&r.a.createElement(ha,{id:this.props.leftContainer.dropdownConfig.id,items:o,icon:this.props.leftContainer.dropdownConfig.icon,text:this.props.leftContainer.dropdownConfig.text,withCaret:this.props.leftContainer.dropdownConfig.showCaret}),l),r.a.createElement("div",{className:"navigation-bar-container navigation-bar-container-right"},a,n.length>0&&r.a.createElement(ha,{id:this.props.rightContainer.dropdownConfig.id,items:n,icon:this.props.rightContainer.dropdownConfig.icon,text:this.props.rightContainer.dropdownConfig.text,withCaret:this.props.rightContainer.dropdownConfig.showCaret,right:!0}),u.length>0&&r.a.createElement(ha,{id:this.props.singleDropdown.id,items:u,icon:this.props.singleDropdown.icon,text:this.props.singleDropdown.text,withCaret:this.props.singleDropdown.showCaret,fullWidth:!0})))}}]),t}(r.a.Component),ga=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(mn.c,{className:"navigation-bar-item",to:this.props.navigationItem.route},this.props.navigationItem.icon," ",(void 0===this.props.showText||this.props.showText)&&this.props.navigationItem.text,this.props.children)}}]),t}(r.a.Component),fa={name:"",password:"",nameMatch:!1},ya=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state=fa,n.handleNameChange=n.handleNameChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handlePasswordChange=n.handlePasswordChange.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidUpdate",value:function(e){e.show!==this.props.show&&!1===this.props.show&&this.setState(fa)}},{key:"handleNameChange",value:function(e){var t=this.props.name===e;this.setState({name:e,nameMatch:t})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(M.j,{backdrop:"static",show:this.props.show,onHide:this.props.hide},r.a.createElement(M.j.Body,{style:{textAlign:"center",paddingTop:0,paddingBottom:0}},r.a.createElement("h3",null,r.a.createElement(qn.a,{glyph:"exclamation-sign",style:{color:"#d9534f"}}),r.a.createElement("strong",null," Benutzerkonto endg\xfcltig l\xf6schen")),r.a.createElement(M.a,{bsStyle:"danger",style:{textAlign:"center"}},"Das L\xf6schen Deines Benutzerkontos kann nicht r\xfcckg\xe4ngig gemacht werden! ",r.a.createElement("br",null),"Um Dein Konto dennoch zu l\xf6schen, musst du Deinen Benutzernamen und Dein Passwort best\xe4tigen."),r.a.createElement(M.g,{style:{marginBottom:5},type:"text",value:this.state.name,disabled:this.props.isDeleting,onChange:function(t){return e.handleNameChange(t.target.value)},placeholder:"Benutzername",autoFocus:!0}),r.a.createElement(M.g,{style:{marginBottom:5},type:"password",value:this.state.password,disabled:this.props.isDeleting,onChange:function(t){return e.handlePasswordChange(t.target.value)},placeholder:"Passwort"})),r.a.createElement(M.j.Footer,{style:{textAlign:"center"}},r.a.createElement(M.c,{style:{width:100},bsStyle:"danger",disabled:this.isButtonDisabled(),onClick:function(){return e.props.deleteUser(e.state.password)}},"L\xf6schen"),r.a.createElement(M.c,{style:{width:100},bsStyle:"primary",onClick:this.props.hide,disabled:this.props.isDeleting},"Abbrechen")))}},{key:"isButtonDisabled",value:function(){return this.props.isDeleting||!this.state.nameMatch||""===this.state.password}}]),t}(r.a.Component),ba=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={userName:void 0!==e.userName?e.userName:"",currentPassword:"",newPassword:"",passwordRepeat:"",passwordsMatch:!0,saveButtonDisabled:!0,showDeletionConfirmationModal:!1},n.handleUserNameChange=n.handleUserNameChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleCurrentPasswordChange=n.handleCurrentPasswordChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handleNewPasswordChange=n.handleNewPasswordChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handlePasswordRepeatChange=n.handlePasswordRepeatChange.bind(Object(dn.a)(Object(dn.a)(n))),n.saveButtonDisabled=n.saveButtonDisabled.bind(Object(dn.a)(Object(dn.a)(n))),n.showDeletionConfirmationModal=n.showDeletionConfirmationModal.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){bn.setTitlePrefix("Benutzereinstellungen")}},{key:"handleUserNameChange",value:function(e){this.setState({userName:e,saveButtonDisabled:this.saveButtonDisabled(this.state.currentPassword,this.state.passwordsMatch,e,this.state.newPassword)})}},{key:"handleNewPasswordChange",value:function(e){var t=e===this.state.passwordRepeat;this.setState({newPassword:e,passwordsMatch:t,saveButtonDisabled:this.saveButtonDisabled(this.state.currentPassword,t,this.state.userName,e)})}},{key:"handleCurrentPasswordChange",value:function(e){this.setState({currentPassword:e,saveButtonDisabled:this.saveButtonDisabled(e,this.state.passwordsMatch,this.state.userName,this.state.newPassword)})}},{key:"handlePasswordRepeatChange",value:function(e){var t=e===this.state.newPassword;this.setState({passwordRepeat:e,passwordsMatch:t,saveButtonDisabled:this.saveButtonDisabled(this.state.currentPassword,t,this.state.name,this.state.newPassword)})}},{key:"saveButtonDisabled",value:function(e,t,n,a){return""===e||!t||n===this.props.userName&&""===a}},{key:"showDeletionConfirmationModal",value:function(e){this.setState({showDeletionConfirmationModal:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ya,{show:this.state.showDeletionConfirmationModal,hide:function(){return e.showDeletionConfirmationModal(!1)},name:this.props.userName,isDeleting:this.props.isDeletingUser,deleteUser:this.props.deleteUser}),r.a.createElement("h3",{style:{marginTop:0}},r.a.createElement("strong",null,"Benutzereinstellungen")),r.a.createElement(M.e,null,"Benutzername \xe4ndern"),r.a.createElement(M.g,{type:"text",className:"user-settings-input",disabled:this.props.isDeletingUser||this.props.isModifyingUser,value:this.state.userName,onChange:function(t){return e.handleUserNameChange(t.target.value)},placeholder:"Benutzername"}),r.a.createElement(M.e,null,"Passwort \xe4ndern"),r.a.createElement(M.g,{type:"password",className:"user-settings-input",disabled:this.props.isDeletingUser||this.props.isModifyingUser,value:this.state.newPassword,onChange:function(t){return e.handleNewPasswordChange(t.target.value)},placeholder:"Neues Passwort"}),r.a.createElement(M.g,{type:"password",className:"user-settings-input",disabled:this.props.isDeletingUser||this.props.isModifyingUser,value:this.state.passwordRepeat,onChange:function(t){return e.handlePasswordRepeatChange(t.target.value)},placeholder:"Neues Passwort wiederholen"}),!this.state.passwordsMatch&&r.a.createElement("div",{style:{color:"red"}},r.a.createElement(M.h,{glyph:"remove"})," Passwort muss \xfcbereinstimmen"),r.a.createElement(M.e,{style:{marginTop:15}},"Aktuelles Passwort best\xe4tigen"),r.a.createElement(M.g,{type:"password",className:"user-settings-input",disabled:this.props.isDeletingUser||this.props.isModifyingUser,value:this.state.currentPassword,onChange:function(t){return e.handleCurrentPasswordChange(t.target.value)},placeholder:"Aktuelles Passwort"}),r.a.createElement(M.c,{bsStyle:"primary",style:{display:"block",margin:"auto auto 10px"},disabled:this.props.isDeletingUser||this.props.isModifyingUser||this.state.saveButtonDisabled,onClick:function(){return e.props.modifyUser(e.state.currentPassword,e.state.userName===e.props.userName?null:e.state.userName,""===e.state.newPassword?null:e.state.newPassword)}},"\xc4nderungen speichern"),r.a.createElement(M.a,{bsStyle:"danger",style:{marginTop:25}},r.a.createElement("h3",{style:{marginTop:0}},r.a.createElement("strong",null,"Benutzerkonto l\xf6schen")),r.a.createElement(M.c,{style:{display:"block",margin:"auto"},bsStyle:"danger",disabled:this.props.disabled,onClick:function(){return e.showDeletionConfirmationModal(!0)}},"Benutzer l\xf6schen")))}}]),t}(r.a.Component),Ea=Object(l.b)(function(e){return{userName:e.user.name,isModifyingUser:e.user.isModifying,isDeletingUser:e.user.isDeletingUser}},function(e){return{modifyUser:function(t,n,a){return e(function(e,t,n){return function(a){return a(ut()),I.fetchPut(F.getConfig().resourceUrls.user,{currentPassword:e,newName:t,newPassword:n},function(e){a(ht()),a(yt(!0))},function(e){a(pt(e.message)),K.defaultErrorHandling(a,e,W("Modify user failed",e.message))},function(e){a(pt(e.message)),a(W("Modify user failed",e.message))})}}(t,n,a))},deleteUser:function(t){return e(function(e){return function(t){return t(dt()),I.fetchDelete(F.getConfig().resourceUrls.user,{currentPassword:e},function(e){t(mt()),t(bt())},function(e){t(gt(e.message)),K.defaultErrorHandling(t,e,W("Delete user failed",e.message))},function(e){t(gt(e.message)),t(W("Delete user failed",e.message))})}}(t))}}})(ba),va=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={userNameToPermit:"",playersInformation:n.mergeUsers(n.props.playableUsers,n.props.permittedUsers)},n.handleUserNameToPermitChange=n.handleUserNameToPermitChange.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){bn.setTitlePrefix("Berechtigungen")}},{key:"componentDidUpdate",value:function(e){this.props.userId===e.userId&&this.props.permittedUsers===e.permittedUsers&&this.props.playableUsers===e.playableUsers||this.setState({playersInformation:this.mergeUsers(this.props.playableUsers,this.props.permittedUsers)})}},{key:"mergeUsers",value:function(e,t){for(var n=e.map(function(e){return{id:e.id,name:e.name,playable:!0,permitted:!1}}),a=0;a<t.length;a++){for(var r=!1,i=0;i<n.length;i++)if(t[a].id===n[i].id){n[i].permitted=!0,r=!0;break}r||n.push({id:t[a].id,name:t[a].name,playable:!1,permitted:!0})}return n}},{key:"handleUserNameToPermitChange",value:function(e){this.setState({userNameToPermit:e})}},{key:"isBusy",value:function(){return this.props.isUpdatingPlayerPermission||this.props.isFetchingPlayableUsers||this.props.isFetchingPermittedUsers}},{key:"isUserNameToPermitEmpty",value:function(){return void 0===this.state.userNameToPermit||null===this.state.userNameToPermit||""===this.state.userNameToPermit}},{key:"isPermitButtonDisabled",value:function(){return this.isBusy()||this.isUserNameToPermitEmpty()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",{style:{marginTop:0}},r.a.createElement("strong",null,"Berechtigungen")),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Hier siehst Du welche Spieler Dir erlaubt haben ein Spiel mit ihnen zu erstellen und kannst einstellen wer dich in einem Spiel ausw\xe4hlen darf.")),r.a.createElement(M.g,{style:{marginBottom:5,marginRight:2,width:300,maxWidth:"95%",display:"inline"},type:"text",disabled:this.isBusy(),value:this.state.userNameToPermit,onChange:function(t){return e.handleUserNameToPermitChange(t.target.value)},onKeyDown:R.ifEnterKey(function(){e.isPermitButtonDisabled()||e.props.addPlayerPermissionByName(e.state.userNameToPermit)}),placeholder:"Spieler berechtigen"}),r.a.createElement(M.c,{bsStyle:"success",style:{marginBottom:2},disabled:this.isPermitButtonDisabled(),onClick:function(){return e.props.addPlayerPermissionByName(e.state.userNameToPermit)}},"Berechtigen")),r.a.createElement(M.r,{style:{marginTop:3,paddingBottom:0,textAlign:"center"}},r.a.createElement(M.n,{responsive:!0,hover:!0,style:{textAlign:"center"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{whiteSpace:"normal",textAlign:"center",maxWidth:100}},"Name"),r.a.createElement("th",{style:{whiteSpace:"normal",textAlign:"center"}},"Darf von mir in Spielen ausgew\xe4hlt werden"),r.a.createElement("th",{style:{whiteSpace:"normal",textAlign:"center"}},"Darf mich in Spielen ausw\xe4hlen"))),r.a.createElement("tbody",null,this.state.playersInformation.map(function(t){return t.id!==e.props.userId&&r.a.createElement("tr",{key:"user_row_"+t.id},r.a.createElement("td",{style:{whiteSpace:"normal",textOverflow:"ellipsis",maxWidth:100}},t.name),r.a.createElement("td",null,t.playable?r.a.createElement(M.h,{style:{color:"green"},glyph:"ok"}):r.a.createElement(M.h,{style:{color:"red"},glyph:"remove"})),r.a.createElement("td",null,t.permitted?r.a.createElement(M.k,{placement:"top",overlay:r.a.createElement(M.q,{id:"tooltip"},"Berechtigung nehmen")},r.a.createElement(M.c,{bsStyle:"success",onClick:function(){return e.props.removePlayerPermission(t.id)},disabled:e.props.isUpdatingPlayerPermission},r.a.createElement(M.h,{glyph:"ok"}))):r.a.createElement(M.k,{placement:"top",overlay:r.a.createElement(M.q,{id:"tooltip"},"Berechtigung geben")},r.a.createElement(M.c,{bsStyle:"danger",onClick:function(){return e.props.addPlayerPermissionById(t.id)},disabled:e.props.isUpdatingPlayerPermission},r.a.createElement(M.h,{glyph:"remove"})))))}))),(this.props.isFetchingPlayableUsers||this.props.isFetchingPermittedUsers)&&r.a.createElement(Wn,{label:"Lade Spieler-Berechtigungen..."})))}}]),t}(r.a.Component),Oa=Object(l.b)(function(e){return{userId:e.user.id,playableUsers:e.playerPermission.playableUsers.slice().sort(zt.sortByNameAsc),fetchPlayableUsersFailed:e.playerPermission.fetchPlayableUsersFailed,isFetchingPlayableUsers:e.playerPermission.isFetchingPlayableUsers,permittedUsers:e.playerPermission.permittedUsers.slice().sort(zt.sortByNameAsc),fetchPermittedUsersFailed:e.playerPermission.fetchPermittedUsersFailed,isFetchingPermittedUsers:e.playerPermission.isFetchingPermittedUsers,isUpdatingPlayerPermission:e.playerPermission.isUpdatingPlayerPermission}},function(e){return{addPlayerPermissionById:function(t){return e((n=t,function(e){return e(ce()),I.fetchPost(F.getConfig().resourceUrls.playerPermission,{permittedId:n},function(t){return e(ue(t))},function(t){e(pe(t.message)),K.defaultErrorHandling(e,t,W("Failed to update permissions",t.message))},function(t){e(pe(t.message)),e(W("Failed to update permissions",t.message))})}));var n},addPlayerPermissionByName:function(t){return e((n=t,function(e){return e(ce()),I.fetchPost(F.getConfig().resourceUrls.playerPermission,{permittedUsername:n},function(t){return e(ue(t))},function(t){e(pe(t.message)),K.defaultErrorHandling(e,t,W("Failed to update permissions",t.message))},function(t){e(pe(t.message)),e(W("Failed to update permissions",t.message))})}));var n},removePlayerPermission:function(t){return e((n=t,function(e){return e(ce()),I.fetchDelete(F.getConfig().resourceUrls.playerPermission,{permittedId:n},function(t){return e(he(n))},function(t){e(pe(t.message)),K.defaultErrorHandling(e,t,W("Failed to update permissions",t.message))},function(t){e(pe(t.message)),e(W("Failed to update permissions",t.message))})}));var n}}})(va),Ca=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this,t=[this.props.isLoggedIn&&r.a.createElement(ga,{key:"settings_user_link",navigationItem:fn.SETTINGS_USER}),this.props.isLoggedIn&&r.a.createElement(ga,{key:"settings_permissions_link",navigationItem:fn.SETTINGS_PERMISSIONS}),r.a.createElement(ga,{key:"settings_speech_link",navigationItem:fn.SETTINGS_SPEECH})],n=new da("settings_dropdown",r.a.createElement(M.h,{glyph:"cog"}),"Weitere Einstellungen"),a=new pa(t,t,n);return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ma,{style:{top:40,borderTop:"1px solid black",minHeight:31},rightContainer:a,alignCenter:!0,small:!0}),r.a.createElement("div",{style:{marginTop:31,padding:5,overflowY:"auto",position:"absolute",top:0,bottom:0,left:0,right:0}},r.a.createElement(mn.e,{exact:!0,path:fn.SETTINGS.route,render:function(){return e.props.isLoggedIn?r.a.createElement(mn.d,{to:fn.SETTINGS_USER.route}):r.a.createElement(mn.d,{to:fn.SETTINGS_SPEECH.route})}}),r.a.createElement(mn.e,{path:fn.SETTINGS_SPEECH.route,render:function(){return r.a.createElement(ca,{style:{marginBottom:5},selectedVoice:e.props.selectedVoice,defaultVoice:e.props.defaultVoice,possibleVoices:e.props.possibleVoices,onSelectedVoiceChange:e.props.setSelectedVoiceByName})}}),r.a.createElement(mn.e,{path:fn.SETTINGS_USER.route,render:function(){return r.a.createElement(Qn,{text:"Benutzereinstellungen k\xf6nnen nur von angemeldeten Benutzern angepasst werden"},r.a.createElement(Ea,null))}}),r.a.createElement(mn.e,{path:fn.SETTINGS_PERMISSIONS.route,render:function(){return r.a.createElement(Qn,{text:"Berechtigungen k\xf6nnen nur von angemeldeten Benutzern angepasst werden"},r.a.createElement(Oa,null))}})))}}]),t}(r.a.Component),Da=Object(l.b)(function(e){return{isLoggedIn:e.user.isLoggedIn,possibleVoices:e.speech.possibleVoices,selectedVoice:e.speech.selectedVoice,defaultVoice:e.speech.defaultVoice}},function(e){return{setSelectedVoiceByName:function(t){return e(sn(t))}}})(Ca),Sa={name:"",password:""},ka=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state=Sa,n.handleNameChange=n.handleNameChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handlePasswordChange=n.handlePasswordChange.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidUpdate",value:function(e){e.show!==this.props.show&&!1===this.props.show&&this.setState(Sa)}},{key:"handleNameChange",value:function(e){this.setState({name:e})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(M.j,{restoreFocus:!1,bsSize:"small",backdrop:"static",show:this.props.show,onHide:this.props.hide},r.a.createElement(M.j.Body,{style:{textAlign:"center",paddingBottom:0}},r.a.createElement(M.j.Title,{style:{marginBottom:10}},"Anmelden"),r.a.createElement(M.g,{style:{marginBottom:5},type:"text",value:this.state.name,onChange:function(t){return e.handleNameChange(t.target.value)},onKeyDown:R.ifEnterKey(function(){e.isLoginDisabled()||e.doLogin()}),placeholder:"Benutzername",autoFocus:!0}),r.a.createElement(M.g,{type:"password",value:this.state.password,onChange:function(t){return e.handlePasswordChange(t.target.value)},onKeyDown:R.ifEnterKey(function(){e.isLoginDisabled()||e.doLogin()}),placeholder:"Passwort"}),r.a.createElement(M.c,{bsStyle:"link",onClick:function(){e.props.hide(),e.props.showSignUp()}},"Neu hier? Jetzt registrieren!")),r.a.createElement(M.j.Footer,{style:{textAlign:"center"}},r.a.createElement(M.c,{style:{width:100},bsStyle:"primary",disabled:this.isLoginDisabled(),onClick:function(){return e.doLogin()}},"Anmelden"),r.a.createElement(M.c,{style:{width:100},bsStyle:"primary",onClick:this.props.hide,disabled:this.props.isLoggingIn},"Abbrechen")))}},{key:"isLoginDisabled",value:function(){return this.props.isLoggingIn||""===this.state.name||""===this.state.password}},{key:"doLogin",value:function(){this.props.login(this.state.name,this.state.password)}}]),t}(r.a.Component),Ta=Object(l.b)(function(e){return{show:e.user.showLoginModal,isLoggingIn:e.user.isLoggingIn}},function(e){return{login:function(t,n){return e(ft(t,n))},hide:function(){return e({type:Ie})},showSignUp:function(){return e(Je())}}})(ka),wa={name:"",password:"",passwordRepeat:"",passwordsMatch:!0},ja=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state=wa,n.handleNameChange=n.handleNameChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handlePasswordChange=n.handlePasswordChange.bind(Object(dn.a)(Object(dn.a)(n))),n.handlePasswordRepeatChange=n.handlePasswordRepeatChange.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidUpdate",value:function(e){e.show!==this.props.show&&!1===this.props.show&&this.setState(wa)}},{key:"handleNameChange",value:function(e){this.setState({name:e})}},{key:"handlePasswordChange",value:function(e){var t=e===this.state.passwordRepeat;this.setState({password:e,passwordsMatch:t})}},{key:"handlePasswordRepeatChange",value:function(e){var t=e===this.state.password;this.setState({passwordRepeat:e,passwordsMatch:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(M.j,{bsSize:"small",backdrop:"static",show:this.props.show,onHide:this.props.hide},r.a.createElement(M.j.Body,{style:{textAlign:"center",paddingBottom:0}},r.a.createElement(M.j.Title,{style:{marginBottom:10}},"Registrieren"),r.a.createElement(M.g,{style:{marginBottom:5},type:"text",value:this.state.name,onChange:function(t){return e.handleNameChange(t.target.value)},onKeyDown:R.ifEnterKey(function(){e.isSignupDisabled()||e.doSignUp()}),placeholder:"Benutzername",autoFocus:!0}),r.a.createElement(M.g,{style:{marginBottom:5},type:"password",value:this.state.password,onChange:function(t){return e.handlePasswordChange(t.target.value)},onKeyDown:R.ifEnterKey(function(){e.isSignupDisabled()||e.doSignUp()}),placeholder:"Passwort"}),r.a.createElement(M.g,{type:"password",value:this.state.passwordRepeat,onChange:function(t){return e.handlePasswordRepeatChange(t.target.value)},onKeyDown:R.ifEnterKey(function(){e.isSignupDisabled()||e.doSignUp()}),placeholder:"Passwort wiederholen"}),!this.state.passwordsMatch&&r.a.createElement("div",{style:{color:"red"}},r.a.createElement(M.h,{glyph:"remove"})," Passwort muss \xfcbereinstimmen"),r.a.createElement(M.c,{bsStyle:"link",onClick:function(){e.props.hide(),e.props.showLogin()}},"Zur\xfcck zur Anmeldung")),r.a.createElement(M.j.Footer,{style:{textAlign:"center"}},r.a.createElement(M.c,{style:{width:100},bsStyle:"primary",disabled:this.isSignupDisabled(),onClick:function(){return e.doSignUp()}},"Registrieren"),r.a.createElement(M.c,{style:{width:100},bsStyle:"primary",onClick:this.props.hide},"Abbrechen")))}},{key:"isSignupDisabled",value:function(){return!this.state.passwordsMatch||this.props.isSigningUp||""===this.state.name||""===this.state.password||""===this.state.passwordRepeat}},{key:"doSignUp",value:function(){this.props.signUp(this.state.name,this.state.password)}}]),t}(r.a.Component),Ia=Object(l.b)(function(e){return{show:e.user.showSignUpModal,isSigningUp:e.user.isSigningUp}},function(e){return{signUp:function(t,n){return e(function(e,t){return function(n){return n(ot()),I.fetchPost(F.getConfig().resourceUrls.user,{name:e,password:t},function(a){n(lt()),n(ft(e,t))},function(e){n(ct(e.message)),K.defaultErrorHandling(n,e,W("Sign-up failed",e.message))},function(e){n(ct(e.message)),n(W("Sign-up failed",e.message))})}}(t,n))},hide:function(){return e({type:Pe})},showLogin:function(){return e(Ze())}}})(ja),Na=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchServerVersion()}},{key:"render",value:function(){return r.a.createElement("div",null,"Client: ","".concat("2.0.0")," ",r.a.createElement("br",null),"Server: ",this.props.serverVersion?this.props.serverVersion:"Lade...")}}]),t}(r.a.Component),Pa=Object(l.b)(function(e){return{serverVersion:e.serverInformation.version,isFetchingServerVersion:e.serverInformation.isFetchingVersion}},function(e){return{fetchServerVersion:function(){return e(function(e){return e(qt()),I.fetchGet(F.getConfig().resourceUrls.serverInformation,function(t){return e(Zt(t))},function(t){e(Jt(t.message)),K.defaultErrorHandling(e,t,W("Could not fetch server version",t.message))},function(t){e(Jt(t.message)),e(W("Could not fetch server version",t.message))})})}}})(Na),Ua=Object(l.b)(function(e){return{show:e.modal.show,item:e.modal.show?e.modal.items[0]:{}}},function(e){return{hide:function(){return e({type:V})}}})(G),Fa=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(M.l,{bsStyle:"primary"},r.a.createElement(M.l.Heading,null,r.a.createElement(qn.a,{glyph:"gift"})," Features ganz ohne Registrierung"),r.a.createElement(M.l.Body,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(mn.c,{to:fn.NEW_GAME.route},"Darts-Rechner \u200b"),"inklusive Average- und Finish-Anzeige"),r.a.createElement("li",null,"Zum",r.a.createElement(mn.c,{to:fn.NEW_TRAINING.route},"\u200b Trainieren \u200b"),"kannst Du auch einfach ein Spiel ohne Mitspieler erstellen"),r.a.createElement("li",null,"Auch f\xfcr die Verwendung auf mobilen Ger\xe4ten geeignet"))))}}]),t}(r.a.Component),La=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(M.l,{bsStyle:"primary"},r.a.createElement(M.l.Heading,null,r.a.createElement(qn.a,{glyph:"plus"})," Zus\xe4tzliche Vorteile f\xfcr registrierte Nutzer"),r.a.createElement(M.l.Body,null,r.a.createElement("ul",null,r.a.createElement("li",null,"Ausf\xfchrliche",r.a.createElement(mn.c,{to:fn.STATISTICS.route},"\u200b Statistiken \u200b"),"zu allen Spielen, an welchen Du teilgenommen hast"),r.a.createElement("li",null,"Lege mithilfe des",r.a.createElement(mn.c,{to:fn.SETTINGS_PERMISSIONS.route},"\u200b Berechtigungssystems \u200b"),"fest, welche Benutzer Spiele mit Dir erstellen d\xfcrfen"),r.a.createElement("li",null,"Erhalte",r.a.createElement(mn.c,{to:fn.NOTIFICATIONS.route},"\u200b Benachrichtigungen \u200b"),"f\xfcr relevante Ereignisse (z.B. wenn ein anderer Benutzer ein Spiel mit Dir gespeichert hat)")),r.a.createElement(M.c,{bsStyle:"primary",style:{marginTop:10},onClick:this.props.onSignUp},"Jetzt registrieren")))}}]),t}(r.a.Component),Aa=n(54),xa=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(M.l,{bsStyle:"primary"},r.a.createElement(M.l.Heading,null,r.a.createElement(qn.a,{glyph:"road"})," Was ist geplant?"),r.a.createElement(M.l.Body,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(qn.a,{glyph:"bullhorn"})," Soundeffekte"),r.a.createElement("li",null,r.a.createElement(qn.a,{glyph:"play-circle"})," Neuer Spielmodus: Cricket"),r.a.createElement("li",null,r.a.createElement(Aa.d,null)," Turniermodus mit Gruppenphase & KO-Runde"),r.a.createElement("li",null,r.a.createElement(Aa.a,null)," Sprachsteuerung"),r.a.createElement("li",null,r.a.createElement(qn.a,{glyph:"time"})," Stoppuhr & Timer"))))}}]),t}(r.a.Component),Ma=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(M.l,{bsStyle:"info"},r.a.createElement(M.l.Heading,{style:{overflow:"auto"}},r.a.createElement("div",{style:{float:"left"}},r.a.createElement(qn.a,{glyph:"check"})," ",this.props.version),r.a.createElement("div",{style:{float:"right"}},this.props.date)),r.a.createElement(M.l.Body,null,r.a.createElement("ul",null,this.props.children)))}}]),t}(r.a.Component),_a=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(M.l,{bsStyle:"primary"},r.a.createElement(M.l.Heading,null,r.a.createElement(qn.a,{glyph:"flash"})," Was ist neu?"),r.a.createElement(M.l.Body,null,r.a.createElement(Ma,{version:"2.0",date:"31.03.2019"},r.a.createElement("li",null,r.a.createElement(qn.a,{glyph:"home"})," \xdcberarbeitete Startseite mit \xdcbersicht aller Features und Neuerungen"),r.a.createElement("li",null,r.a.createElement(qn.a,{glyph:"phone"})," Verbessertes Design f\xfcr Mobilger\xe4te"),r.a.createElement("li",null,r.a.createElement(qn.a,{glyph:"stats"})," Neue Statistiken f\xfcr Aufnahmen"),r.a.createElement("li",null,r.a.createElement(qn.a,{glyph:"filter"})," Statistiken k\xf6nnen jetzt gefilter werden"),r.a.createElement("li",null,r.a.createElement(qn.a,{glyph:"screenshot"})," Finish-Anzeige w\xe4hrend des Spiels"),r.a.createElement("li",null,r.a.createElement(Aa.b,null)," Darktheme verf\xfcgbar (klicke auf das Symbol in der linken oberen Ecke zum Wechseln des Designs)"),r.a.createElement("li",null,r.a.createElement(qn.a,{glyph:"eject"})," M\xf6glichkeit zum Ausblenden der Navigationsleiste w\xe4hrend eines Spiels"))))}}]),t}(r.a.Component),Ra=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){bn.setTitlePrefix("")}},{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("h1",null,"Pheru-Darts"),r.a.createElement("div",{className:"main-flex-row",style:{alignItems:"flex-end",flexWrap:this.props.landscapeOrientation?"inherit":"wrap"}},r.a.createElement(Fa,null),r.a.createElement(La,{onSignUp:this.props.showSignUp})),r.a.createElement("div",{className:"main-flex-row",style:{alignItems:"start",flexWrap:this.props.landscapeOrientation?"inherit":"wrap"}},r.a.createElement(_a,null),r.a.createElement(xa,null)))}}]),t}(r.a.Component),Ba=Object(l.b)(function(e){return{landscapeOrientation:e.app.landscapeOrientation}},function(e){return{showSignUp:function(){return e(Je())}}})(Ra),Ga=function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){bn.setTitlePrefix("Mitteilungen")}},{key:"render",value:function(){var e=this;return r.a.createElement(Qn,{text:"Mitteilungen k\xf6nnen nur von angemeldeten Benutzern eingesehen werden"},r.a.createElement("div",{className:"notifications"},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",{style:{marginTop:0}},r.a.createElement("strong",null,"Mitteilungen")),r.a.createElement(M.c,{bsStyle:"primary",style:{marginRight:5,marginBottom:5},onClick:this.props.fetchNotifications,disabled:this.props.isFetchingNotifications},r.a.createElement(M.h,{glyph:"refresh"})," Neu Laden"),r.a.createElement(M.c,{bsStyle:"primary",style:{marginBottom:5},onClick:function(){return e.props.markAsRead(e.props.unreadNotifications.map(function(e){return e.id}))},disabled:this.props.isFetchingNotifications||0===this.props.unreadNotifications.length},r.a.createElement(M.h,{glyph:"check"})," Alle als gelesen markieren")),r.a.createElement(M.r,{style:{paddingBottom:0,textAlign:"center"}},r.a.createElement(M.n,{hover:!0,style:{textAlign:"initial"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{whiteSpace:"normal",width:100}},"Zeitpunkt"),r.a.createElement("th",{style:{whiteSpace:"normal"}},"Mitteilung"))),r.a.createElement("tbody",null,!this.props.isFetchingNotifications&&this.props.notifications.map(function(e){return r.a.createElement("tr",{key:"notification_row_"+e.id},r.a.createElement("td",{style:{whiteSpace:"normal",width:100,verticalAlign:"middle",textAlign:"center"}},ea.toDate(new Date(e.timestamp),{replaceToday:!0,replaceYesterday:!0}),r.a.createElement("br",null),ea.toTime(new Date(e.timestamp)),r.a.createElement("br",null),!e.read&&r.a.createElement(M.b,null,"Neu")),r.a.createElement("td",{style:{verticalAlign:"middle"}},e.message))}),!this.props.isFetchingNotifications&&0===this.props.notifications.length&&r.a.createElement("tr",null,r.a.createElement("td",{style:{whiteSpace:"normal",width:100}}),r.a.createElement("td",null,"Keine Mitteilungen vorhanden")),this.props.isFetchingNotifications&&r.a.createElement("tr",null,r.a.createElement("td",{style:{whiteSpace:"normal",width:100}}),r.a.createElement("td",null,"Lade Mitteilungen...")))))))}}]),t}(r.a.Component),Va=Object(l.b)(function(e){return{notifications:e.notifications.notifications.slice().reverse(),unreadNotifications:e.notifications.unreadNotifications,isFetchingNotifications:e.notifications.isFetching,isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn}},function(e){return{showLogin:function(){return e(Ze())},fetchNotifications:function(){return e(we())},markAsRead:function(t){return e((n=t,function(e){return e(Se(n)),I.fetchPut(F.getConfig().resourceUrls.notification,{ids:n,read:!0},function(t){return e(ke(t))},function(t){e(Te(t.message)),K.defaultErrorHandling(e,t,W("Failed to update notifications",t.message))},function(t){e(Te(t.message)),e(W("Failed to update notifications",t.message))})}));var n}}})(Ga),za=(n(469),function(e){function t(){return Object(T.a)(this,t),Object(L.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar-login-loader"})}}]),t}(r.a.Component)),Ha=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).state={darktheme:!0},n.toggleTheme=n.toggleTheme.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"toggleTheme",value:function(){this.state.darktheme?document.getElementById("theme_link").setAttribute("href","css/themes/brighttheme.css"):document.getElementById("theme_link").setAttribute("href","css/themes/darktheme.css"),this.setState({darktheme:!this.state.darktheme})}},{key:"render",value:function(){var e=[r.a.createElement(An,{key:"fullscreen-button",className:"navigation-bar-bordered-item"}),r.a.createElement(M.c,{key:"theme-toggle",style:{marginLeft:5},className:"navigation-bar-bordered-item",onClick:this.toggleTheme},this.state.darktheme?r.a.createElement(Aa.c,{style:{verticalAlign:"middle"}}):r.a.createElement(Aa.b,{style:{verticalAlign:"middle"}})),r.a.createElement(mn.b,{key:"brand",className:"navigation-bar-item navigation-bar-header",to:"/"},"Pheru-Darts")],t=this.createGameLinks(),n=new da("game_dropdown",r.a.createElement(M.h,{glyph:"expand"}),"Spielmen\xfc"),a=new pa(t,t,n),i=this.createUserLinks(!1),s=this.createUserLinks(!0),o=new da("user_dropdown",r.a.createElement(M.h,{glyph:"user"}),this.props.userName?this.props.userName:"Benutzer"),l=new pa(i,s,o),c=new da("hamburger_dropdown",r.a.createElement(M.h,{className:"navigation-bar-bordered-item-icon",glyph:"menu-hamburger"}),null,!1);return r.a.createElement(ma,{style:{zIndex:1030},fixedItems:e,leftContainer:a,rightContainer:l,singleDropdown:c})}},{key:"createGameLinks",value:function(){return[r.a.createElement(ga,{key:"new-game-link",navigationItem:fn.NEW_GAME}),r.a.createElement(ga,{key:"new-training-link",navigationItem:fn.NEW_TRAINING}),this.props.gameRunning&&r.a.createElement(ga,{key:"game-link",navigationItem:fn.GAME})]}},{key:"createUserLinks",value:function(e){var t=this;return[r.a.createElement(ga,{key:"settings-link",navigationItem:fn.SETTINGS,showText:e}),this.props.isLoggedIn&&r.a.createElement(ga,{key:"notifications-link",navigationItem:fn.NOTIFICATIONS,showText:e},this.props.unreadNotificationsCount>0&&r.a.createElement(M.b,{style:{marginLeft:2,backgroundColor:"#337ab7"}},this.props.unreadNotificationsCount)),this.props.isLoggedIn&&r.a.createElement(ga,{key:"statistics-link",navigationItem:fn.STATISTICS,showText:e}),!this.props.isLoggedIn&&r.a.createElement(M.c,{key:"login-link",className:"navigation-bar-item",onClick:this.props.showLogin,disabled:this.props.isLoggingIn},r.a.createElement("div",{style:{position:"relative"}},fn.LOGIN.icon," ",this.props.isLoggingIn?"Melde an...":fn.LOGIN.text,this.props.isLoggingIn&&r.a.createElement(za,null))),this.props.isLoggedIn&&r.a.createElement(M.c,{key:"logout-link",className:"navigation-bar-item",onClick:function(){t.props.gameRunning?t.props.showConfirmation("Wirklich abmelden?","Das aktuelle Spiel wird dadurch abgebrochen.",function(){t.props.exitGame(),t.props.logout()}):t.props.logout()},disabled:this.props.isLoggingOut},r.a.createElement("div",{style:{position:"relative"}},fn.LOGOUT.icon," ",fn.LOGOUT.text," (",this.props.userName,")"))]}}]),t}(r.a.Component),Wa=Object(mn.g)(Object(l.b)(function(e){return{userName:e.user.name,isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn,isLoggingOut:e.user.isLoggingOut,gameRunning:null!==e.game,unreadNotificationsCount:e.notifications.unreadNotifications.length}},function(e){return{showLogin:function(){return e(Ze())},logout:function(){return e(bt())},showConfirmation:function(t,n,a,r){return e(H(t,n,a,r))},exitGame:function(){return e(g())}}})(Ha)),Ka=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"isLandscapeOrientation",value:function(){return window.innerWidth>window.innerHeight}}]),e}(),Ya=n(218),Qa=n.n(Ya),qa=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(L.a)(this,Object(A.a)(t).call(this,e))).appContainerRef=r.a.createRef(),n.updateOrientation=n.updateOrientation.bind(Object(dn.a)(Object(dn.a)(n))),n.onBeforeUnload=n.onBeforeUnload.bind(Object(dn.a)(Object(dn.a)(n))),n.onUnload=n.onUnload.bind(Object(dn.a)(Object(dn.a)(n))),n}return Object(x.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.updateOrientation(),Object(Zn.c)("de",Qa.a),Object(Zn.d)("de"),window.addEventListener("resize",this.updateOrientation),window.onunload=this.onUnload,window.onbeforeunload=this.onBeforeUnload,this.props.setPossibleVoices(window.speechSynthesis.getVoices()),this.props.setSelectedVoiceByName(Gn.getSelectedVoiceName()),void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=function(){e.props.setPossibleVoices(window.speechSynthesis.getVoices()),void 0===e.props.selectedVoice&&e.props.setSelectedVoiceByName(Gn.getSelectedVoiceName())}),this.props.loginByToken(!1)}},{key:"onUnload",value:function(e){this.props.selectedVoice&&Gn.setSelectedVoiceName(this.props.selectedVoice.name)}},{key:"onBeforeUnload",value:function(e){if(this.props.gameRunning){return e.returnValue="Seite wirklich verlassen?","Seite wirklich verlassen?"}}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.appContainerRef.current.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateOrientation)}},{key:"updateOrientation",value:function(){var e=Ka.isLandscapeOrientation();this.props.landscapeOrientation!==e&&this.props.setLandscapeOrientation(e)}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100%"}},this.props.navigationBarVisible&&r.a.createElement(Wa,null),r.a.createElement("div",{ref:this.appContainerRef,style:{position:"absolute",top:0,left:0,right:0,bottom:0,padding:5,marginTop:this.props.navigationBarVisible?40:0,overflowY:"auto"}},r.a.createElement(mn.f,null,r.a.createElement(mn.e,{path:fn.NEW_GAME.route,render:function(e){return r.a.createElement(jn,Object.assign({},e,{key:"newgameconfig"}))}}),r.a.createElement(mn.e,{path:fn.NEW_TRAINING.route,render:function(e){return r.a.createElement(jn,Object.assign({},e,{key:"newgameconfig_training",training:!0}))}}),this.props.gameRunning&&r.a.createElement(mn.e,{path:fn.GAME.route,component:Bn}),r.a.createElement(mn.e,{path:fn.NOTIFICATIONS.route,component:Va}),r.a.createElement(mn.e,{path:fn.STATISTICS.route,component:la}),r.a.createElement(mn.e,{path:fn.SETTINGS.route,component:Da}),r.a.createElement(mn.e,{path:fn.ABOUT.route,component:Pa}),r.a.createElement(mn.e,{component:Ba}))),r.a.createElement(Ta,null),r.a.createElement(Ia,null),r.a.createElement(Ua,null))}}]),t}(r.a.Component),Za=Object(mn.g)(Object(l.b)(function(e){return{landscapeOrientation:e.app.landscapeOrientation,userName:e.user.name,isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn,isLoggingOut:e.user.isLoggingOut,navigationBarVisible:e.app.navigationBarVisible,gameRunning:null!==e.game,fetchPlayableUsersFailed:e.playerPermission.fetchPlayableUsersFailed,fetchPermittedUsersFailed:e.playerPermission.fetchPermittedUsersFailed,unreadNotificationsCount:e.notifications.unreadNotifications.length,selectedVoice:e.speech.selectedVoice}},function(e){return{fetchPlayableUsers:function(){return e(de())},fetchPermittedUsers:function(){return e(me())},showLogin:function(){return e(Ze())},loginByToken:function(t){return e(yt(t))},logout:function(){return e(bt())},showConfirmation:function(t,n,a,r){return e(H(t,n,a,r))},exitGame:function(){return e(g())},setPossibleVoices:function(t){return e(function(e){return{type:nn,voices:e}}(t))},setSelectedVoiceByName:function(t){return e(sn(t))},setLandscapeOrientation:function(t){return e(function(e){return{type:un,landscapeOrientation:e}}(t))}}})(qa)),Ja=Object(o.d)(pn,Object(o.a)(s.a));Object(i.render)(r.a.createElement(l.a,{store:Ja},r.a.createElement(mn.a,null,r.a.createElement(Za,null))),document.getElementById("root"))}},[[220,2,1]]]);
//# sourceMappingURL=main.1d95432d.chunk.js.map