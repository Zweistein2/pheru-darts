(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{206:function(e,t,n){e.exports=n(454)},450:function(e,t,n){},452:function(e,t,n){},454:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(26),i=n(195),o=n(60),l=n(22),c=n(10),u="START_NEW_GAME",h="ADD_DART",p="UNDO_DART",d="EXIT_GAME",m="REMATCH",g=function(){return{type:d}},f={key:"SINGLE_OUT",text:"Single-Out"},y={key:"DOUBLE_OUT",text:"Double-Out"},b=[f,y],E={key:"SINGLE_IN",text:"Single-In"},v={key:"DOUBLE_IN",text:"Double-In"},S=[E,v];function O(e,t,n){return e-t.value*t.multiplier<=(n===f?0:1)}var w=function(e,t,n,a){for(var r=[],s=0;s<e.length;s++)r[s]={score:t,dartCount:0,average:0,checkInCondition:!1};for(var i,o,l,c=0,u=0,h=0,p=t;void 0!==e[c].aufnahmen[u]&&void 0!==e[c].aufnahmen[u][h];){i=c,o=u,l=h,r[c].dartCount++;var d=e[c].aufnahmen[u][h],m=d.value*d.multiplier,g=a===f||a===y&&2===d.multiplier,b=r[c].score,S=r[c].checkInCondition;0===h&&(p=b);var w=O(b,d,a);S||(S=n===E||n===v&&2===d.multiplier,r[c].checkInCondition=S),S&&(b-m===0&&g?b=0:w?b=p:b-=m),r[c].score=b,!w&&h<2?h++:(h=0,c<e.length-1?c++:(u++,c=0))}for(var C=0;C<e.length;C++){var k=0,I=C===c?e[C].aufnahmen.length-1:e[C].aufnahmen.length;if(I>0){var j=0;if(C===c)for(var U=e[C].aufnahmen[e[C].aufnahmen.length-1],T=0;T<U.length;T++)j+=U[T].value*U[T].multiplier;k=(t-(r[C].score+j))/I}k<0&&(k=0),k=k.toFixed(2),r[C].average=k}return{turnInformation:{current:{playerIndex:c,aufnahmeIndex:u,dartIndex:h},previous:{playerIndex:i,aufnahmeIndex:o,dartIndex:l}},playerInformation:r}};function C(e){for(var t=0;t<e.length;t++)e[t].aufnahmen=[];e[0].aufnahmen[0]=[]}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var n=t.players;return C(n),{players:n,score:t.score,checkInMode:t.checkInMode,checkOutMode:t.checkOutMode,training:t.training};case h:return function(e,t){var n=t.multiplier;if(25===t.value&&n>2)return e;0===t.value&&1!==n&&(n=1);var a=Object(c.a)({},t,{multiplier:n}),r=e.players,s=w(r,e.score,e.checkInMode,e.checkOutMode).turnInformation.current;r[s.playerIndex].aufnahmen[s.aufnahmeIndex][s.dartIndex]=a;var i=w(r,e.score,e.checkInMode,e.checkOutMode);s=i.turnInformation.current;var o,l=void 0;void 0===r[s.playerIndex].aufnahmen[s.aufnahmeIndex]&&(r[s.playerIndex].aufnahmen[s.aufnahmeIndex]=[],l=e.players[s.playerIndex].name+", "+i.playerInformation[s.playerIndex].score);for(var u=0;u<i.playerInformation.length;u++)if(0===i.playerInformation[u].score){o=r[u],l=r[u].name+" hat gewonnen!";break}return Object(c.a)({},e,{players:r,announcementText:l,winner:o})}(e,{value:t.value,multiplier:t.multiplier});case p:return function(e){var t=e.players,n=w(t,e.score,e.checkInMode,e.checkOutMode).turnInformation.current;if(0===n.playerIndex&&0===n.aufnahmeIndex&&0===n.dartIndex)return e;0===n.dartIndex&&t[n.playerIndex].aufnahmen.splice(n.aufnahmeIndex,1);var a=w(t,e.score,e.checkInMode,e.checkOutMode).turnInformation.previous;return t[a.playerIndex].aufnahmen[a.aufnahmeIndex].splice(a.dartIndex,1),Object(c.a)({},e,{players:t,announcementText:void 0,winner:void 0})}(e);case d:return null;case m:for(var a=e.players.slice();a[0]!==t.startingPlayer;)a.push(a.shift());return C(a),Object(c.a)({},e,{players:a,announcementText:void 0,winner:void 0});default:return e}};function I(e,t,n,a){return P(e,"GET",{},t,n,a)}function j(e,t,n,a,r){return P(e,"POST",t,n,a,r)}function U(e,t,n,a,r){return P(e,"PUT",t,n,a,r)}function T(e,t,n,a,r){return P(e,"DELETE",t,n,a,r)}function P(e,t,n,a,r,s){var i={credentials:"include"};return"GET"!==t&&(i={body:JSON.stringify(n),headers:{"content-type":"application/json"},method:t,credentials:"include"}),fetch(e,i).then(function(t){if(t.ok){var n=t.headers.get("content-type");return n&&-1!==n.indexOf("application/json")?t.json():n&&-1!==n.indexOf("text/plain")?t.text():""}return t.json().then(function(t){return r(t),Promise.reject("Error fetching "+e+": Status: "+t.status+"; Message: "+t.message)})},function(t){return s(t),Promise.reject("Error fetching "+e+": "+t)}).then(function(e){return a(e)},function(e){return console.error(e)})}var N="pheru.github.io",L="https://darts.pheru.de",D="https:",x="8443";function F(){return window.location.hostname===N?M(L):M((e=window.location.hostname,D+"//"+e+":"+x));var e}function M(e){return{resourceUrls:{user:e+"/user",playerPermission:e+"/playerPermission",game:e+"/game",statistic:e+"/statistic",serverInformation:e+"/serverInformation",notification:e+"/notification"},loginUrl:e+"/login",logoutUrl:e+"/logout"}}var _=n(12),R=n(13),A=n(15),B=n(14),G=n(16),V=n(5);function z(e){return W(13,e)}function W(e,t){return function(n){n.keyCode===e&&t()}}var H="TYPE_INFORMATION",Y=function(e){function t(e){var n;Object(_.a)(this,t);var a=void 0!==(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).props.item.modalType?n.getAppearanceByModalType(n.props.item.modalType):n.getAppearanceByModalType(H);return n.state={appearance:a},n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.item.modalType!==this.props.item.modalType&&void 0!==this.props.item.modalType){var t=this.getAppearanceByModalType(this.props.item.modalType);this.setState({appearance:t})}}},{key:"render",value:function(){var e=this;return r.a.createElement(V.k,{show:this.props.show,onKeyDown:function(t){e.props.item.modalType!==H&&"TYPE_WARNING"!==e.props.item.modalType&&"TYPE_ERROR"!==e.props.item.modalType||z(e.props.hide)(t),W(27,e.props.hide)(t)}},r.a.createElement(V.k.Body,{style:{paddingTop:0,paddingBottom:0}},r.a.createElement("h3",null,r.a.createElement(V.h,{glyph:this.state.appearance.glyph,style:{color:this.state.appearance.color}}),r.a.createElement("strong",null," ",this.props.item.title)),r.a.createElement("h4",null,this.props.item.message)),r.a.createElement(V.k.Footer,null,r.a.createElement(V.c,{style:{width:100},bsStyle:this.state.appearance.bsStyle,onClick:function(){e.props.item.onConfirm&&e.props.item.onConfirm(),e.props.hide()}},"TYPE_CONFIRMATION"===this.props.item.modalType?"Ja":"OK"),"TYPE_CONFIRMATION"===this.props.item.modalType&&r.a.createElement(V.c,{style:{width:100},bsStyle:this.state.appearance.bsStyle,onClick:function(){e.props.item.onCancel&&e.props.item.onCancel(),e.props.hide()}},"Nein")))}},{key:"getAppearanceByModalType",value:function(e){switch(e){case"TYPE_ERROR":return{glyph:"remove-sign",color:"#d9534f",bsStyle:"danger"};case"TYPE_WARNING":return{glyph:"alert",color:"#f0ad4e",bsStyle:"warning"};case H:return{glyph:"info-sign",color:"#5bc0de",bsStyle:"info"};case"TYPE_CONFIRMATION":return{glyph:"question-sign",color:"#337ab7",bsStyle:"primary"};default:return null}}}]),t}(r.a.Component),K="HIDE_CURRENT_MODAL",q="SHOW_MODAL",Q=function(e,t,n,a){return{type:q,modalType:"TYPE_CONFIRMATION",title:e,message:t,onConfirm:n,onCancel:a}},J=function(e,t){return{type:q,modalType:H,title:e,message:t}},Z=function(e,t){return{type:q,modalType:"TYPE_ERROR",title:e,message:t}};function X(e,t,n){401===t.status?(e(wt()),"JWT expired!"===t.message?e(J("Deine Sitzung ist abgelaufen","Bitte melde dich erneut an")):e(n)):e(n)}var $="REQUEST_FETCH_PERMITTED_USERS",ee="FETCH_PERMITTED_USERS_SUCCESSFUL",te="FETCH_PERMITTED_USERS_FAILED",ne="REQUEST_FETCH_PLAYABLE_USERS",ae="FETCH_PLAYABLE_USERS_SUCCESSFUL",re="FETCH_PLAYABLE_USERS_FAILED",se="REQUEST_UPDATE_PLAYER_PERMISSION",ie="ADD_PLAYER_PERMISSION_SUCCESSFUL",oe="REMOVE_PLAYER_PERMISSION_SUCCESSFUL",le="UPDATE_PLAYER_PERMISSION_FAILED",ce=function(){return{type:$}},ue=function(e){return{type:ee,users:e}},he=function(e){return{type:te,message:e}},pe=function(){return{type:ne}},de=function(e){return{type:ae,users:e}},me=function(e){return{type:re,message:e}},ge=function(){return{type:se}},fe=function(e){return{type:ie,changedUser:e}},ye=function(e){return{type:oe,changedUserId:e}},be=function(e){return{type:le,message:e}};function Ee(){return function(e){return e(pe()),I(F().resourceUrls.playerPermission+"/playable",function(t){return e(de(t))},function(t){e(me(t.message)),X(e,t,Z("Failed to fetch playable users",t.message))},function(t){e(me(t.message)),e(Z("Failed to fetch playable users",t.message))})}}function ve(){return function(e){return e(ce()),I(F().resourceUrls.playerPermission+"/permitted",function(t){return e(ue(t))},function(t){e(he(t.message)),X(e,t,Z("Failed to fetch permitted users",t.message))},function(t){e(he(t.message)),e(Z("Failed to fetch permitted users",t.message))})}}var Se="REQUEST_FETCH_NOTIFICATIONS",Oe="FETCH_NOTIFICATIONS_SUCCESSFUL",we="FETCH_NOTIFICATIONS_FAILED",Ce="REQUEST_MARK_NOTIFICATIONS_AS_READ",ke="MARK_NOTIFICATIONS_AS_READ_SUCCESSFUL",Ie="MARK_NOTIFICATIONS_AS_READ_FAILED",je=function(){return{type:Se}},Ue=function(e){return{type:Oe,notifications:e}},Te=function(e){return{type:we,message:e}},Pe=function(e){return{type:Ce,notificationIds:e}},Ne=function(e){return{type:ke,notifications:e}},Le=function(e){return{type:Ie,message:e}};function De(){return function(e){return e(je()),I(F().resourceUrls.notification,function(t){return e(Ue(t))},function(t){e(Te(t.message)),X(e,t,Z("Failed to fetch notifications",t.message))},function(t){e(Te(t.message)),e(Z("Failed to fetch notifications",t.message))})}}var xe="SHOW_LOGIN_MODAL",Fe="HIDE_LOGIN_MODAL",Me="SHOW_SIGNUP_MODAL",_e="HIDE_SIGNUP_MODAL",Re="REQUEST_LOGIN",Ae="LOGIN_SUCCESSFUL",Be="LOGIN_FAILED",Ge="REQUEST_LOGIN_BY_TOKEN",Ve="LOGIN_BY_TOKEN_SUCCESSFUL",ze="LOGIN_BY_TOKEN_FAILED",We="REQUEST_LOGOUT",He="LOGOUT_SUCCESSFUL",Ye="LOGOUT_FAILED",Ke="REQUEST_SIGNUP",qe="SIGNUP_SUCCESSFUL",Qe="SIGNUP_FAILED",Je="REQUEST_MODIFY_USER",Ze="MODIFY_USER_SUCCESSFUL",Xe="MODIFY_USER_FAILED",$e="REQUEST_DELETE_USER",et="DELETE_USER_SUCCESSFUL",tt="DELETE_USER_FAILED",nt=function(){return{type:xe}},at=function(){return{type:Re}},rt=function(){return{type:Ae}},st=function(e){return{type:Be,message:e}},it=function(){return{type:Ge}},ot=function(e){return{type:Ve,userInfo:e}},lt=function(){return{type:ze}},ct=function(){return{type:We}},ut=function(){return{type:He}},ht=function(){return{type:Ye}},pt=function(){return{type:Ke}},dt=function(){return{type:qe}},mt=function(e){return{type:Qe,message:e}},gt=function(){return{type:Je}},ft=function(){return{type:Ze}},yt=function(e){return{type:Xe,message:e}},bt=function(){return{type:$e}},Et=function(){return{type:et}},vt=function(e){return{type:tt,message:e}};function St(e,t){return function(n){return n(at()),j(F().loginUrl,{name:e,password:t},function(e){n(rt()),n(Ot(!0))},function(e){n(st(e.message)),X(n,e,Z("Login failed",e.message))},function(e){n(st(e.message)),n(Z("Login failed",e.message))})}}function Ot(e){return function(t){return t(it()),I(F().resourceUrls.user,function(e){t(ot(e)),t(Ee()),t(ve()),t(De())},function(n){t(lt()),e&&X(t,n,Z("Login by token failed",n.message))},function(e){t(lt()),t(Z("Login by token failed",e.message))})}}function wt(){return function(e){return e(ct()),I(F().logoutUrl,function(t){return e(ut())},function(t){e(ht()),X(e,t,Z("Logout failed",t.message))},function(t){e(ht()),e(Z("Logout failed",t.message))})}}var Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:void 0,name:void 0,showLoginModal:!1,showSignUpModal:!1,isLoggedIn:!1,isLoggingIn:!1,isLoggingOut:!1,isSigningUp:!1,isModifying:!1,isDeletingUser:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(c.a)({},e,{showLoginModal:!0});case Fe:return Object(c.a)({},e,{showLoginModal:!1});case Me:return Object(c.a)({},e,{showSignUpModal:!0});case _e:return Object(c.a)({},e,{showSignUpModal:!1});case Re:return Object(c.a)({},e,{isLoggingIn:!0});case Ae:return Object(c.a)({},e,{isLoggingIn:!1,showLoginModal:!1});case Be:return Object(c.a)({},e,{isLoggingIn:!1});case Ge:return Object(c.a)({},e,{name:void 0,isLoggedIn:!1,isLoggingIn:!0});case Ve:return Object(c.a)({},e,{id:t.userInfo.id,name:t.userInfo.name,isLoggedIn:!0,isLoggingIn:!1,showLoginModal:!1});case ze:return Object(c.a)({},e,{id:void 0,name:void 0,isLoggedIn:!1,isLoggingIn:!1});case We:return Object(c.a)({},e,{isLoggingOut:!0});case He:return Object(c.a)({},e,{id:void 0,name:void 0,isLoggedIn:!1,isLoggingOut:!1});case Ye:return Object(c.a)({},e,{isLoggingOut:!1});case Ke:return Object(c.a)({},e,{isSigningUp:!0});case qe:return Object(c.a)({},e,{isSigningUp:!1,showSignUpModal:!1});case Qe:return Object(c.a)({},e,{isSigningUp:!1});case Je:return Object(c.a)({},e,{isModifying:!0});case Ze:case Xe:return Object(c.a)({},e,{isModifying:!1});case $e:return Object(c.a)({},e,{isDeletingUser:!0});case et:case tt:return Object(c.a)({},e,{isDeletingUser:!1});default:return e}};var kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{playableUsers:[],isFetchingPlayableUsers:!1,fetchPlayableUsersFailed:!1,permittedUsers:[],isFetchingPermittedUsers:!1,fetchPermittedUsersFailed:!1,isUpdatingPlayerPermission:!1,updatePlayerPermissionFailed:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return Object(c.a)({},e,{isFetchingPlayableUsers:!0,fetchPlayableUsersFailed:!1});case ae:return Object(c.a)({},e,{isFetchingPlayableUsers:!1,fetchPlayableUsersFailed:!1,playableUsers:t.users});case re:return Object(c.a)({},e,{isFetchingPlayableUsers:!1,fetchPlayableUsersFailed:!0,playableUsers:[]});case $:return Object(c.a)({},e,{isFetchingPermittedUsers:!0,fetchPermittedUsersFailed:!1});case ee:return Object(c.a)({},e,{isFetchingPermittedUsers:!1,fetchPermittedUsersFailed:!1,permittedUsers:t.users});case te:return Object(c.a)({},e,{isFetchingPermittedUsers:!1,fetchPermittedUsersFailed:!0,permittedUsers:[]});case se:return Object(c.a)({},e,{isUpdatingPlayerPermission:!0,updatePlayerPermissionFailed:!1});case ie:var n=e.permittedUsers.slice();return n.push(t.changedUser),Object(c.a)({},e,{isUpdatingPlayerPermission:!1,updatePlayerPermissionFailed:!1,permittedUsers:n});case oe:var a=e.permittedUsers.slice(),r=a.map(function(e){return e.id}).indexOf(t.changedUserId);return-1!==r&&a.splice(r,1),Object(c.a)({},e,{isUpdatingPlayerPermission:!1,updatePlayerPermissionFailed:!1,permittedUsers:a});case le:return Object(c.a)({},e,{isUpdatingPlayerPermission:!1,updatePlayerPermissionFailed:!0});case He:return Object(c.a)({},e,{playableUsers:[],permittedUsers:[]});default:return e}},It="REQUEST_ARCHIVE_GAME",jt="ARCHIVE_GAME_SUCCESSFUL",Ut="ARCHIVE_GAME_FAILED",Tt=function(){return{type:It}},Pt=function(){return{type:jt}},Nt=function(e){return{type:Ut,message:e}};var Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isArchiving:!1};switch((arguments.length>1?arguments[1]:void 0).type){case It:return Object(c.a)({},e,{isArchiving:!0});case jt:case Ut:return Object(c.a)({},e,{isArchiving:!1});default:return e}},Dt="MEMORIZE_STATE";var xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{states:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt:var n=Object(c.a)({},e.states);return n[t.key]=t.state,Object(c.a)({},e,{states:n});default:return e}},Ft="REQUEST_FETCH_STATISTICS",Mt="FETCH_STATISTICS_SUCCESSFUL",_t="FETCH_STATISTICS_FAILED",Rt=function(){return{type:Ft}},At=function(e){return{type:Mt,data:e}},Bt=function(e){return{type:_t,message:e}};function Gt(e,t){return e.name>t.name?1:e.name<t.name?-1:0}function Vt(e,t){var n=parseInt(e.score,10),a=parseInt(t.score,10);return n<a?1:n>a?-1:0}var zt=[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5];function Wt(e,t){var n=parseInt(e.score,10),a=parseInt(t.score,10),r=zt.indexOf(n),s=zt.indexOf(a);return r>s?1:r<s?-1:0}function Ht(e,t){return e.opponent>t.opponent?1:e.opponent<t.opponent?-1:0}var Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,totalGames:0,totalDarts:0,possibleCheckoutDarts:0,checkoutDarts:0,gamesWon:0,gamesLost:0,dartData:[],gamesData:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ft:return Object(c.a)({},e,{isFetching:!0});case Mt:var n=[],a=t.data.darts.countsPerScore;for(var r in a)a.hasOwnProperty(r)&&n.push({score:r,singleCount:a[r].singleCount,doubleCount:"0"===r?void 0:a[r].doubleCount,tripleCount:"25"===r||"0"===r?void 0:a[r].tripleCount});n.sort(Vt);var s=[],i=t.data.games.countsPerPlayer;for(var o in i)i.hasOwnProperty(o)&&s.push({opponent:o,wonCount:i[o].wonCount,lostCount:i[o].lostCount});return s.sort(Ht),Object(c.a)({},e,{isFetching:!1,gamesWon:t.data.games.wonCount,gamesLost:t.data.games.lostCount,totalDarts:t.data.darts.totalCount,possibleCheckoutDarts:t.data.darts.possibleCheckoutCount,checkoutDarts:t.data.darts.checkoutCount,dartData:n,gamesData:s});case _t:return Object(c.a)({},e,{isFetching:!1});default:return e}};var Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:var n=e.items.slice();return n.push({modalType:t.modalType,title:t.title,message:t.message,onConfirm:t.onConfirm,onCancel:t.onCancel}),Object(c.a)({},e,{items:n,show:!0});case K:var a=e.items.slice();return a.shift(),Object(c.a)({},e,{items:a,show:a.length>0});default:return e}},qt="REQUEST_SERVER_VERSION",Qt="FETCH_SERVER_VERSION_SUCCESSFUL",Jt="FETCH_SERVER_VERSION_FAILED",Zt=function(){return{type:qt}},Xt=function(e){return{type:Qt,version:e}},$t=function(e){return{type:Jt,message:e}};var en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{version:void 0,isFetchingVersion:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return Object(c.a)({},e,{version:void 0,isFetchingVersion:!0});case Qt:return Object(c.a)({},e,{version:t.version,isFetchingVersion:!1});case Jt:return Object(c.a)({},e,{version:"Unbekannt",isFetchingVersion:!1});default:return e}},tn={isFetching:!1,notifications:[],unreadNotifications:[]};function nn(e){for(var t=[],n=0;n<e.length;n++)e[n].read||t.push(e[n]);return t}var an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return Object(c.a)({},e,{isFetching:!0});case Oe:var n=nn(t.notifications);return Object(c.a)({},e,{isFetching:!1,notifications:t.notifications,unreadNotifications:n});case we:return tn;case Ce:return Object(c.a)({},e,{isFetching:!0});case ke:for(var a=[],r=0;r<e.notifications.length;r++){for(var s=Object(c.a)({},e.notifications[r]),i=0;i<t.notifications.length;i++)if(s.id===t.notifications[i].id){s.read=t.notifications[i].read;break}a.push(s)}var o=nn(a);return Object(c.a)({},e,{isFetching:!1,notifications:a,unreadNotifications:o});case Ie:return Object(c.a)({},e,{isFetching:!1});case He:return tn;default:return e}},rn="SET_POSSIBLE_VOICES",sn="SET_SELECTED_VOICE_BY_NAME",on="TOGGLE_SPEECH_OUTPUT",ln=function(e){return{type:sn,voiceName:e}};var cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{possibleVoices:[],selectedVoice:void 0,defaultVoice:void 0,speechOutputActive:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rn:for(var n=void 0,a=0;a<t.voices.length;a++)t.voices[a].default&&(n=t.voices[a]);return Object(c.a)({},e,{defaultVoice:n,possibleVoices:t.voices.slice()});case sn:for(var r=e.selectedVoice,s=0;s<e.possibleVoices.length;s++)e.possibleVoices[s].name===t.voiceName&&(r=e.possibleVoices[s]);return Object(c.a)({},e,{selectedVoice:r});case on:return Object(c.a)({},e,{speechOutputActive:!e.speechOutputActive});default:return e}},un=Object(o.c)({game:k,games:Lt,user:Ct,playerPermission:kt,stateMemory:xt,statistics:Yt,modal:Kt,serverInformation:en,notifications:an,speech:cn}),hn=n(11),pn=n(25),dn=function e(t,n,a){Object(_.a)(this,e),this.text=t,this.icon=n,this.route=a},mn={NEW_GAME:new dn("Neues Spiel",r.a.createElement(V.h,{glyph:"edit"}),"/newgame"),NEW_TRAINING:new dn("Training",r.a.createElement(V.h,{glyph:"upload"}),"/newtraining"),GAME:new dn("Aktuelles Spiel",r.a.createElement(V.h,{glyph:"play-circle"}),"/game"),NOTIFICATIONS:new dn("Mitteilungen",r.a.createElement(V.h,{glyph:"bell"}),"/notifications"),STATISTICS:new dn("Statistiken",r.a.createElement(V.h,{glyph:"stats"}),"/statistics"),SETTINGS:new dn("Einstellungen",r.a.createElement(V.h,{glyph:"cog"}),"/settings"),SETTINGS_USER:new dn("Benutzereinstellungen",r.a.createElement(V.h,{glyph:"user"}),"/settings/user"),SETTINGS_SPEECH:new dn("Spracheinstellungen",r.a.createElement(V.h,{glyph:"volume-up"}),"/settings/speech"),SETTINGS_PERMISSIONS:new dn("Berechtigungen",r.a.createElement(V.h,{glyph:"list-alt"}),"/settings/permissions"),ABOUT:new dn("Info",r.a.createElement(V.h,{glyph:"info-sign"}),"/about"),LOGIN:new dn("Anmelden",r.a.createElement(V.h,{glyph:"log-in"})),LOGOUT:new dn("Abmelden",r.a.createElement(V.h,{glyph:"log-out"}))},gn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={icon:n.props.iconFactory?n.props.iconFactory(n.props.value):null},n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.value===e.value&&this.props.iconFactory===e.iconFactory&&this.props.choices===e.choices||this.setState({icon:this.props.iconFactory?this.props.iconFactory(this.props.value):null})}},{key:"render",value:function(){var e=this,t=void 0!==this.props.choices&&this.props.choices.length>0;return r.a.createElement(V.f,{style:Object(c.a)({},this.props.style,{display:"inline-flex"}),id:this.props.id},r.a.createElement("div",{style:{position:"absolute",top:1,left:3}},this.state.icon),r.a.createElement(V.g,{type:"text",value:this.props.value,placeholder:this.props.placeholder,onChange:function(t){return e.props.onInputChange(t.target.value)},style:{borderTopRightRadius:t?0:void 0,borderBottomRightRadius:t?0:void 0,textAlign:"center"},autoFocus:this.props.autoFocus}),r.a.createElement(V.f.Toggle,{style:{borderLeftWidth:0,display:t?"":"none"}}),r.a.createElement(V.f.Menu,{style:{minWidth:"calc(100% - 34px)",textAlign:"center"}},this.props.choices.map(function(t){return r.a.createElement(V.j,{key:"choice"+e.getTextForChoice(t),onClick:function(){return e.props.onDropdownClick(t)}},e.getTextForChoice(t))})))}},{key:"getTextForChoice",value:function(e){return this.props.dropdownPropertyName?e[this.props.dropdownPropertyName]:e}}]),t}(r.a.Component),fn={setTitlePrefix:function(e){var t=e?e+" - ":"";document.title=t+"Pheru-Darts"}},yn=["101","201","301","401","501","1001"],bn=function(e){function t(e){var n;return Object(_.a)(this,t),n=Object(A.a)(this,Object(B.a)(t).call(this,e)),void 0!==e.initialState?n.state=Object(c.a)({},e.initialState):n.state={score:yn[4],selectedPlayers:[{name:""},{name:""}],checkOutMode:y,checkInMode:E},n.colStyle={marginBottom:15},n.colStyleButton=Object(c.a)({},n.colStyle),n.swapPlayerSelection=n.swapPlayerSelection.bind(Object(hn.a)(Object(hn.a)(n))),n.handleScoreChange=n.handleScoreChange.bind(Object(hn.a)(Object(hn.a)(n))),n.handleUnregisteredUserChange=n.handleUnregisteredUserChange.bind(Object(hn.a)(Object(hn.a)(n))),n.handleCheckInModeChange=n.handleCheckInModeChange.bind(Object(hn.a)(Object(hn.a)(n))),n.handleCheckOutModeChange=n.handleCheckOutModeChange.bind(Object(hn.a)(Object(hn.a)(n))),n.onStartNewGameButtonClicked=n.onStartNewGameButtonClicked.bind(Object(hn.a)(Object(hn.a)(n))),n.startNewGame=n.startNewGame.bind(Object(hn.a)(Object(hn.a)(n))),n.playerIconFactory=n.playerIconFactory.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){fn.setTitlePrefix(this.props.training?"Training":"Neues Spiel")}},{key:"componentDidUpdate",value:function(e){if(e.isFetchingUsers&&!this.props.isFetchingUsers||e.isLoggedIn&&!this.props.isLoggedIn)for(var t=this.state.selectedPlayers.slice(),n=0;n<t.length;n++){var a=this.getPlayableUserByName(t[n].name);t[n]=a||{name:t[n].name},this.setState({selectedPlayers:t})}}},{key:"componentWillUnmount",value:function(){this.props.memorizeState(this.state)}},{key:"changeSelectedPlayer",value:function(e,t){for(var n=0;n<this.state.selectedPlayers.length;n++)if(n!==e&&this.state.selectedPlayers[n]===t)return void this.swapPlayerSelection();var a=this.state.selectedPlayers.slice();a[e]=t,this.setState({selectedPlayers:a})}},{key:"swapPlayerSelection",value:function(){var e=this.state.selectedPlayers.slice().reverse();this.setState({selectedPlayers:e})}},{key:"handleUnregisteredUserChange",value:function(e,t){var n=this.state.selectedPlayers.slice(),a=this.getPlayableUserByName(t);n[e]=a||{name:t},this.setState({selectedPlayers:n})}},{key:"handleScoreChange",value:function(e){(""===e||this.isValidScore(e))&&this.setState({score:e})}},{key:"isValidScore",value:function(e){return/^[1-9]+\d*$/.test(e)}},{key:"handleCheckInModeChange",value:function(e){this.setState({checkInMode:e})}},{key:"handleCheckOutModeChange",value:function(e){this.setState({checkOutMode:e})}},{key:"onStartNewGameButtonClicked",value:function(e){var t=this;this.validateGameConfig()?this.props.gameRunning?this.props.showConfirmation("Neues Spiel starten?","Das aktuelle Spiel wird dadurch abgebrochen.",function(){return t.startNewGame()}):this.startNewGame():e.preventDefault()}},{key:"validateGameConfig",value:function(){var e=[],t=this.state.selectedPlayers;if(!this.props.training)for(var n=0;n<t.length;n++){if(void 0===t[n].id&&""===t[n].name){e.push("Es wurden nicht alle ben\xf6tigten Spieler ausgew\xe4hlt");break}for(var a=n+1;a<t.length;a++)if(t[n].name===t[a].name){e.push("Spieler d\xfcrfen nicht mehrfach vorkommen");break}}return this.isValidScore(this.state.score)||e.push("Es wurde kein g\xfcltiger Score angegeben"),!(e.length>0)||(this.props.showWarning("Ung\xfcltige Spielkonfiguration",r.a.createElement("ul",null,this.validationMessagesToListEntries(e))),!1)}},{key:"validationMessagesToListEntries",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.a.createElement("li",{key:"validationMessage_"+n},e[n]));return t}},{key:"startNewGame",value:function(){var e;e=this.props.training?[{id:this.props.userId,name:this.props.userName?this.props.userName:"Training"}]:this.state.selectedPlayers,this.props.startNewGame(e,Number(this.state.score),this.state.checkInMode,this.state.checkOutMode,this.props.training),this.props.history.push(mn.GAME.route)}},{key:"playerIconFactory",value:function(e){return this.props.isLoggedIn&&e&&!this.props.isFetchingUsers?this.getPlayableUserByName(e)?r.a.createElement(V.h,{glyph:"ok",style:{color:"green"}}):r.a.createElement(V.l,{placement:"bottom",overlay:r.a.createElement(V.q,{id:"user-tooltip"},"Dieser Spieler ist entweder kein registrierter Benutzer oder Du bist nicht berechtigt worden, ein Spiel mit ihm zu erstellen.",r.a.createElement("br",null),'In den Statistiken wird dieser Spieler als "Unregistrierter Benutzer" gelistet.')},r.a.createElement(V.h,{glyph:"exclamation-sign",style:{color:"orange"}})):null}},{key:"getPlayableUserByName",value:function(e){for(var t=0;t<this.props.playableUsers.length;t++)if(this.props.playableUsers[t].name===e)return this.props.playableUsers[t];return null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(V.i,null,!this.props.training&&r.a.createElement(V.m,{className:"show-grid text-center"},r.a.createElement(V.d,{xs:12,sm:5,style:this.colStyle},r.a.createElement(gn,{id:"player-1-dropdown",placeholder:"Spieler 1",value:this.state.selectedPlayers[0].name,choices:this.props.playableUsers,dropdownPropertyName:"name",style:{width:"100%"},iconFactory:this.playerIconFactory,onDropdownClick:function(t){return e.changeSelectedPlayer(0,t)},onInputChange:function(t){return e.handleUnregisteredUserChange(0,t)},autoFocus:!0})),r.a.createElement(V.d,{xs:6,xsOffset:3,sm:2,smOffset:0,style:this.colStyleButton},r.a.createElement(V.c,{block:!0,bsStyle:"primary",onClick:this.swapPlayerSelection},r.a.createElement(V.h,{glyph:"transfer"}))),r.a.createElement(V.d,{xs:12,sm:5,style:this.colStyle},r.a.createElement(gn,{id:"player-1-dropdown",placeholder:"Spieler 2",value:this.state.selectedPlayers[1].name,choices:this.props.playableUsers,dropdownPropertyName:"name",style:{width:"100%"},iconFactory:this.playerIconFactory,onDropdownClick:function(t){return e.changeSelectedPlayer(1,t)},onInputChange:function(t){return e.handleUnregisteredUserChange(1,t)}}))),r.a.createElement(V.m,{className:"show-grid text-center"},r.a.createElement(V.d,{xs:12,sm:12,style:this.colStyle},r.a.createElement(gn,{id:"score-dropdown",value:this.state.score,choices:yn,onDropdownClick:function(t){return e.handleScoreChange(t)},onInputChange:function(t){return e.handleScoreChange(t)}}))),r.a.createElement(V.m,{className:"show-grid text-center"},r.a.createElement(V.d,{xs:12,sm:12,style:this.colStyle},r.a.createElement(V.p,{type:"radio",name:"options",defaultValue:this.state.checkInMode,onChange:this.handleCheckInModeChange},S.map(function(e){return r.a.createElement(V.o,{style:{width:"50%"},key:e.key,value:e},e.text)})))),r.a.createElement(V.m,{className:"show-grid text-center"},r.a.createElement(V.d,{xs:12,sm:12,style:this.colStyle},r.a.createElement(V.p,{type:"radio",name:"options",defaultValue:this.state.checkOutMode,onChange:this.handleCheckOutModeChange},b.map(function(e){return r.a.createElement(V.o,{key:e.key,value:e},e.text)})))),r.a.createElement(V.m,{className:"show-grid text-center"},r.a.createElement(V.d,{xs:12,sm:12,style:this.colStyleButton},r.a.createElement(V.c,{bsStyle:"primary",bsSize:"large",block:!0,disabled:this.props.isLoggingIn,onClick:this.onStartNewGameButtonClicked},"Neues ",this.props.training?"Trainingsspiel":"Spiel"," starten")))))}}]),t}(r.a.Component);function En(e){return e.training?"newgameconfig_training":"newgameconfig"}function vn(e,t){for(var n=-1,a=void 0,r=0;r<t.length;r++)t[r].name===e&&(n=r,a=t[r]);return n>-1&&(t.splice(n,1),t.unshift(a)),t}var Sn=Object(l.b)(function(e,t){return{initialState:e.stateMemory.states[En(t)],isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn,userId:e.user.id,userName:e.user.name,playableUsers:vn(e.user.name,e.playerPermission.playableUsers.slice().sort(Gt)),gameRunning:null!==e.game,fetchAllUsersFailed:e.playerPermission.fetchPlayableUsersFailed,isFetchingUsers:e.playerPermission.isFetchingPlayableUsers}},function(e,t){return{startNewGame:function(t,n,a,r,s){return e(function(e,t,n,a,r){return{type:u,players:e,score:t,checkInMode:n,checkOutMode:a,training:r}}(t,n,a,r,s))},memorizeState:function(n){return e(function(e,t){return{type:Dt,key:e,state:t}}(En(t),n))},showWarning:function(t,n){return e(function(e,t){return{type:q,modalType:"TYPE_WARNING",title:e,message:t}}(t,n))},showConfirmation:function(t,n,a,r){return e(Q(t,n,a,r))}}})(bn),On=n(59),wn=n(77),Cn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={multiplier:1},n.colStyle={margin:0,padding:0},n.toggleDouble=n.toggleDouble.bind(Object(hn.a)(Object(hn.a)(n))),n.toggleTriple=n.toggleTriple.bind(Object(hn.a)(Object(hn.a)(n))),n.addDart=n.addDart.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){for(var e=this,t=[],n=function(n){t.push(r.a.createElement(V.d,{key:"scorebuttons_col_"+n,xs:3,sm:2,style:e.colStyle},r.a.createElement(V.c,{className:"score-button",onClick:function(){return e.addDart(n)},key:"scorebuttons_button_"+n,bsSize:"large",bsStyle:"primary",block:!0},n)))},a=1;a<=20;a++)n(a);return r.a.createElement(V.i,null,r.a.createElement(V.m,{className:"show-grid text-center"},t,r.a.createElement(V.d,{xs:3,sm:2,style:this.colStyle},r.a.createElement(V.c,{className:"score-button",onClick:function(){return e.addDart(25)},bsSize:"large",bsStyle:"primary",block:!0},"Bull")),r.a.createElement(V.d,{xs:3,sm:2,style:this.colStyle},r.a.createElement(wn.a,{type:"checkbox",value:this.state.multiplier,onChange:this.toggleDouble,block:!0,vertical:!0},r.a.createElement(On.a,{className:"score-button",value:2,bsSize:"large",bsStyle:"success",block:!0},"Double"))),r.a.createElement(V.d,{xs:3,sm:2,style:this.colStyle},r.a.createElement(wn.a,{type:"checkbox",value:this.state.multiplier,onChange:this.toggleTriple,block:!0,vertical:!0},r.a.createElement(On.a,{className:"score-button",value:3,bsSize:"large",bsStyle:"success",block:!0},"Triple"))),r.a.createElement(V.d,{xs:3,sm:2,style:this.colStyle},r.a.createElement(V.c,{className:"score-button",onClick:function(){return e.addDart(0)},bsSize:"large",bsStyle:"danger",block:!0},"0"))))}},{key:"addDart",value:function(e){this.props.addDart(e,this.state.multiplier),this.setState({multiplier:1})}},{key:"toggleDouble",value:function(){this.setState({multiplier:2===this.state.multiplier?1:2})}},{key:"toggleTriple",value:function(){this.setState({multiplier:3===this.state.multiplier?1:3})}}]),t}(r.a.Component),kn=Object(l.b)(function(e){return{}},function(e){return{addDart:function(t,n){return e(function(e,t){return{type:h,value:e,multiplier:t}}(t,n))}}})(Cn),In=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={},n.borderRadius=6,n.activeBorder="4px solid #2196f3",n.blackBorder="1px solid black",n.rowStyle={margin:0,padding:0},n.colStyle={margin:0,padding:0},n.borderedColStyle=Object(c.a)({},n.colStyle,{border:"1px solid #337ab7"}),n.pStyle={fontWeight:"bold",margin:0,padding:0},n.pStyleSmall=Object(c.a)({},n.pStyle,{fontSize:"3vw"}),n.pStyleBig=Object(c.a)({},n.pStyle,{fontSize:"5vw"}),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement(V.m,{className:"show-grid text-center player"+(this.props.current?" player-current":"")},r.a.createElement(V.d,{xs:12,sm:12,style:Object(c.a)({},this.colStyle,{borderRadius:this.borderRadius})},r.a.createElement(V.m,{className:"show-grid text-center",style:this.rowStyle},r.a.createElement(V.d,{xs:12,sm:12,style:Object(c.a)({},this.colStyle,{borderTopLeftRadius:this.borderRadius,borderTopRightRadius:this.borderRadius})},r.a.createElement("p",{style:this.pStyleSmall},this.props.name))),r.a.createElement(V.m,{className:"show-grid text-center",style:this.rowStyle},r.a.createElement(V.d,{xs:12,sm:12,style:this.colStyle},r.a.createElement("p",{style:this.pStyleBig},this.props.score))),r.a.createElement(V.m,{className:"show-grid text-center",style:this.rowStyle},r.a.createElement(V.d,{xs:6,sm:6,style:Object(c.a)({},this.colStyle,{borderRight:this.blackBorder,borderTop:this.blackBorder})},r.a.createElement("p",{style:this.pStyleSmall},"# ",this.props.dartCount)),r.a.createElement(V.d,{xs:6,sm:6,style:Object(c.a)({},this.colStyle,{borderTop:this.blackBorder})},r.a.createElement("p",{style:this.pStyleSmall},"\u2205 ",this.props.average))),r.a.createElement(V.m,{className:"show-grid text-center",style:this.rowStyle},r.a.createElement(V.d,{xs:4,sm:4,style:Object(c.a)({},this.colStyle,{borderBottomLeftRadius:this.borderRadius,borderTop:this.blackBorder})},r.a.createElement("p",{style:this.pStyleSmall},this.props.dart1)),r.a.createElement(V.d,{xs:4,sm:4,style:Object(c.a)({},this.colStyle,{borderRight:this.blackBorder,borderLeft:this.blackBorder,borderTop:this.blackBorder})},r.a.createElement("p",{style:this.pStyleSmall},this.props.dart2)),r.a.createElement(V.d,{xs:4,sm:4,style:Object(c.a)({},this.colStyle,{borderBottomRightRadius:this.borderRadius,borderTop:this.blackBorder})},r.a.createElement("p",{style:this.pStyleSmall},this.props.dart3)))))}}]),t}(r.a.Component);var jn=Object(l.b)(function(e,t){var n=e.game.players,a=n[t.index],r=e.game.score,s=e.game.checkOutMode,i=e.game.checkInMode,o=w(n,r,i,s),l=o.playerInformation[t.index].score,c=function(e){var t=[],n=e.aufnahmen[e.aufnahmen.length-1];if(void 0!==n)for(var a=0;a<n.length;a++){var r=n[a],s=void 0;switch(r.multiplier){case 2:s="D";break;case 3:s="T";break;default:s=""}t.push(s+r.value)}for(var i=0;i<3;i++)void 0===t[i]&&(t[i]="-");return t}(a),u=o.playerInformation[t.index].dartCount,h=o.turnInformation.current.playerIndex===t.index,p=o.playerInformation[t.index].average;return{name:a.name,score:l,dartCount:u,average:p,dart1:c[0],dart2:c[1],dart3:c[2],current:h}},function(e){return{}})(In);var Un=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={gameFinishedModalShow:void 0!==e.winner,rematchStartingPlayer:e.players[e.players.length>1?1:0]},n.colStyle={marginBottom:15},n.colStyleButton=Object(c.a)({},n.colStyle,{paddingTop:0,paddingBottom:0,paddingLeft:2,paddingRight:2}),n.modalBodyStyle={textAlign:"center"},n.handleGameFinishedModalClose=n.handleGameFinishedModalClose.bind(Object(hn.a)(Object(hn.a)(n))),n.handleRematchStartingPlayerChanged=n.handleRematchStartingPlayerChanged.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){fn.setTitlePrefix("Aktuelles Spiel")}},{key:"componentDidUpdate",value:function(e){this.props.players===e.players&&this.props.winner===e.winner||this.setState({rematchStartingPlayer:this.props.players[this.props.players.length>1?1:0],gameFinishedModalShow:void 0!==this.props.winner}),this.props.speechOutputActive&&this.props.announcementText&&this.props.announcementText!==e.announcementText&&function(e,t){var n=new SpeechSynthesisUtterance(e);n.voice=t,window.speechSynthesis.speaking?(window.speechSynthesis.cancel(),setTimeout(function(){window.speechSynthesis.speak(n)},250)):window.speechSynthesis.speak(n)}(this.props.announcementText,this.props.selectedVoice)}},{key:"handleRematchStartingPlayerChanged",value:function(e){this.setState({rematchStartingPlayer:e})}},{key:"handleGameFinishedModalClose",value:function(){this.setState({gameFinishedModalShow:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(V.i,null,r.a.createElement(V.m,{className:"show-grid text-center"},r.a.createElement(V.d,{xs:12,xsPush:0,sm:2,smPush:10,style:Object(c.a)({},this.colStyle,{marginBottom:0})},r.a.createElement(V.m,{className:"show-grid text-center"},r.a.createElement(V.d,{xs:5,sm:12,style:Object(c.a)({},this.colStyleButton,{fontWeight:"bold"})},r.a.createElement(V.r,{style:{margin:0,padding:2}},r.a.createElement("div",{style:{borderBottom:"0.5px black solid"}},this.props.startScore),r.a.createElement("div",null,this.props.checkInMode.text," ",this.props.checkOutMode.text))),r.a.createElement(V.d,{xs:5,sm:12,style:this.colStyleButton},r.a.createElement(V.c,{bsStyle:"warning",bsSize:"large",block:!0,onClick:function(){return e.props.undoDart()}},r.a.createElement(V.h,{glyph:"erase"}))),r.a.createElement(V.d,{xs:2,sm:12,style:this.colStyleButton},r.a.createElement(V.c,{bsStyle:"info",bsSize:"large",block:!0,onClick:function(){return e.props.toggleSpeechOutput()}},r.a.createElement(V.h,{glyph:this.props.speechOutputActive?"volume-up":"volume-off"}))))),r.a.createElement(V.d,{xs:12,xsPull:0,sm:this.props.training?10:5,smPull:2,style:this.colStyle},r.a.createElement(jn,{index:0})),!this.props.training&&r.a.createElement(V.d,{xs:12,xsPull:0,sm:5,smPull:2,style:this.colStyle},r.a.createElement(jn,{index:1})))),r.a.createElement(kn,null),r.a.createElement(V.k,{dialogClassName:"modal-bottom",show:this.state.gameFinishedModalShow,onHide:this.handleGameFinishedModalClose,keyboard:!1,backdrop:"static"},r.a.createElement(V.k.Body,{style:this.modalBodyStyle},r.a.createElement("h4",null,void 0!==this.props.winner&&this.props.winner.name," hat gewonnen!")),r.a.createElement(V.k.Footer,{style:{textAlign:"center"}},r.a.createElement(V.f,{style:{display:"inline-flex"},id:"rematch_player_dropdown"},r.a.createElement(V.c,{bsStyle:"primary",onClick:function(){e.props.isLoggedIn&&e.props.archiveGame(e.props.game),e.props.rematch(e.state.rematchStartingPlayer)}},"Rematch (",this.state.rematchStartingPlayer.name," beginnt)"),r.a.createElement(V.f.Toggle,{bsStyle:"primary"}),r.a.createElement(V.f.Menu,{style:{minWidth:"100%",textAlign:"center"}},this.props.players.map(function(t,n){return r.a.createElement(V.j,{key:"rematch_player_"+n,onClick:function(){return e.handleRematchStartingPlayerChanged(t)}},t.name," beginnt")}))),r.a.createElement(V.c,{style:{marginLeft:10},bsStyle:"primary",onClick:function(){e.props.isLoggedIn&&e.props.archiveGame(e.props.game),e.props.exit()}},"Zur\xfcck zum Men\xfc"),r.a.createElement(V.c,{style:{marginLeft:10},bsStyle:"warning",onClick:function(){return e.props.undoDart()}},"Dart r\xfcckg\xe4ngig machen"))))}}]),t}(r.a.Component),Tn=Object(l.b)(function(e){return{startScore:e.game.score,checkInMode:e.game.checkInMode,checkOutMode:e.game.checkOutMode,players:e.game.players,winner:e.game.winner,game:e.game,training:e.game.training,announcementText:e.game.announcementText,isLoggedIn:e.user.isLoggedIn,selectedVoice:e.speech.selectedVoice?e.speech.selectedVoice:e.speech.defaultVoice,speechOutputActive:e.speech.speechOutputActive}},function(e){return{undoDart:function(){return e({type:p})},exit:function(){return e(g())},rematch:function(t){return e(function(e){return{type:m,startingPlayer:e}}(t))},archiveGame:function(t){return e(function(e){return function(t){return t(Tt()),j(F().resourceUrls.game,e,function(e){return t(Pt())},function(e){t(Nt(e.message)),X(t,e,Z("Could not archive game",e.message))},function(e){t(Nt(e.message)),t(Z("Could not archive game",e.message))})}}(t))},toggleSpeechOutput:function(){return e({type:on})}}})(Un),Pn=function(){return localStorage.getItem("selectedVoiceName")},Nn=function(e){return localStorage.setItem("selectedVoiceName",e)},Ln=n(23),Dn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={},n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement(Ln.j,{width:"100%",height:300},r.a.createElement(Ln.b,{data:this.props.data},r.a.createElement(Ln.c,{vertical:!1}),r.a.createElement(Ln.l,{dataKey:"opponent"}),r.a.createElement(Ln.m,null),r.a.createElement(Ln.k,{labelFormatter:function(){return""}}),r.a.createElement(Ln.d,null),r.a.createElement(Ln.a,{isAnimationActive:!1,name:"Gewonnen",dataKey:"wonCount",stackId:"a",fill:"#08965f"}),r.a.createElement(Ln.a,{isAnimationActive:!1,name:"Verloren",dataKey:"lostCount",stackId:"a",fill:"#e01d36"})))}}]),t}(r.a.Component),xn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={},n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement(Ln.j,{width:"100%",height:300},r.a.createElement(Ln.b,{data:this.props.data},r.a.createElement(Ln.c,{vertical:!1}),r.a.createElement(Ln.l,{dataKey:"score",interval:0}),r.a.createElement(Ln.m,null),r.a.createElement(Ln.k,{labelFormatter:function(){return""}}),r.a.createElement(Ln.d,null),r.a.createElement(Ln.a,{isAnimationActive:!1,name:"Single",dataKey:"singleCount",stackId:"a",fill:"#333"}),r.a.createElement(Ln.a,{isAnimationActive:!1,name:"Double",dataKey:"doubleCount",stackId:"a",fill:"#08965f"}),r.a.createElement(Ln.a,{isAnimationActive:!1,name:"Triple",dataKey:"tripleCount",stackId:"a",fill:"#e01d36"})))}}]),t}(r.a.Component),Fn=(n(450),function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"stack-loader-container"},r.a.createElement("i",{className:"stack-loader-layer"}),r.a.createElement("i",{className:"stack-loader-layer"}),r.a.createElement("i",{className:"stack-loader-layer"}),r.a.createElement("p",{className:"stack-loader-label"},r.a.createElement("strong",null,this.props.label)))}}]),t}(r.a.Component)),Mn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={data:n.sortAndFillData(e.data)},n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.setState({data:this.sortAndFillData(this.props.data)})}},{key:"sortAndFillData",value:function(e){for(var t=[],n=1;n<=20;n++){var a=this.getExisitingScore(e,n);null!==a?t.push(a):t.push({score:""+n,singleCount:0,doubleCount:0,tripleCount:0})}return t.sort(Wt),t}},{key:"getExisitingScore",value:function(e,t){for(var n=0;n<e.length;n++)if(parseInt(e[n].score,10)===t)return e[n];return null}},{key:"render",value:function(){var e=window.innerWidth>0?window.innerWidth:window.screen.width,t=window.innerHeight>0?window.innerHeight:window.screen.height;return r.a.createElement(Ln.j,{width:"100%",height:e>t?500:e},r.a.createElement(Ln.i,{cx:"50%",cy:"50%",outerRadius:"90%",data:this.state.data},r.a.createElement(Ln.f,null),r.a.createElement(Ln.e,{dataKey:"score"}),r.a.createElement(Ln.g,{angle:90,scale:"sqrt"}),r.a.createElement(Ln.h,{isAnimationActive:!1,name:"Single",dataKey:"singleCount",stroke:"#222222",fill:"#222222",fillOpacity:.6}),r.a.createElement(Ln.h,{isAnimationActive:!1,name:"Double",dataKey:"doubleCount",stroke:"#08965f",fill:"#08965f",fillOpacity:.6}),r.a.createElement(Ln.h,{isAnimationActive:!1,name:"Triple",dataKey:"tripleCount",stroke:"#e01d36",fill:"#e01d36",fillOpacity:.6}),r.a.createElement(Ln.d,null),r.a.createElement(Ln.k,{labelFormatter:function(){return""}})))}}]),t}(r.a.Component),_n=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return this.props.isLoggedIn?this.props.children:r.a.createElement(V.a,{bsStyle:"warning",style:{marginBottom:5,textAlign:"center"}},r.a.createElement("strong",null,this.props.text),r.a.createElement("br",null),r.a.createElement(V.c,{bsStyle:"primary",style:{marginTop:10},onClick:this.props.showLogin,disabled:this.props.isLoggingIn},r.a.createElement(V.h,{glyph:"log-in"})," Anmelden"))}}]),t}(r.a.Component),Rn=Object(l.b)(function(e,t){return{text:t.text,isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn}},function(e){return{showLogin:function(){return e(nt())}}})(_n),An="bar",Bn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={dartChartType:An},n.tableStyle={border:"1px solid #a5b0b6",borderCollapse:"collapse",textAlign:"center",verticalAlign:"middle"},n.dartsBarChartRef=r.a.createRef(),n.dartsRadarChartRef=r.a.createRef(),n.handleDartChartTypeChange=n.handleDartChartTypeChange.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){fn.setTitlePrefix("Statistiken"),this.props.isLoggedIn&&this.props.fetchStatistics()}},{key:"componentDidUpdate",value:function(e){!e.isLoggedIn&&this.props.isLoggedIn&&this.props.fetchStatistics()}},{key:"handleDartChartTypeChange",value:function(e){var t=this;this.setState({dartChartType:e},function(){setTimeout(function(){var n=t.getRefForDartChartType(e);n&&n.current&&n.current.scrollIntoView({block:"end",behavior:"smooth"})},50)})}},{key:"getRefForDartChartType",value:function(e){switch(e){case An:return this.dartsBarChartRef;case"radar":return this.dartsRadarChartRef;default:return null}}},{key:"render",value:function(){return r.a.createElement(Rn,{text:"Statistiken k\xf6nnen nur f\xfcr angemeldete Benutzer erstellt und eingesehen werden"},this.props.isFetchingStatistics?r.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"}},r.a.createElement(Fn,{label:"Lade Statistiken..."})):this.createStatisticsView())}},{key:"createStatisticsView",value:function(){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",{style:{marginTop:0}},r.a.createElement("strong",null,"Statistiken")),r.a.createElement("h2",null,r.a.createElement("strong",null,"Darts")),this.props.dartData.length>0?this.createDartsView():r.a.createElement(V.a,{bsStyle:"warning"},r.a.createElement("strong",null,"Keine Daten vorhanden")),r.a.createElement("h2",null,r.a.createElement("strong",null,"Spiele")),this.props.gamesData.length>0?this.createGamesView():r.a.createElement(V.a,{bsStyle:"warning"},r.a.createElement("strong",null,"Keine Daten vorhanden")))}},{key:"createDartsView",value:function(){return r.a.createElement(V.r,{style:{paddingBottom:0,marginBottom:5,textAlign:"center"}},r.a.createElement(V.n,{responsive:!0,style:{textAlign:"center"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{style:this.tableStyle},"Gesamt:"),r.a.createElement("td",{colSpan:3,style:this.tableStyle},this.props.totalDarts)),r.a.createElement("tr",null,r.a.createElement("th",{rowSpan:2,style:this.tableStyle},"Checkouts:"),r.a.createElement("th",{style:this.tableStyle},"M\xf6gliche Checkouts"),r.a.createElement("th",{style:this.tableStyle},"Erfolgreiche Checkouts"),r.a.createElement("th",{style:this.tableStyle},"Checkoutrate")),r.a.createElement("tr",null,r.a.createElement("td",{style:this.tableStyle},this.props.possibleCheckoutDarts),r.a.createElement("td",{style:this.tableStyle},this.props.checkoutDarts),r.a.createElement("td",{style:this.tableStyle},this.getDartCheckoutRate())))),r.a.createElement(V.p,{type:"radio",name:"options",value:this.state.dartChartType,onChange:this.handleDartChartTypeChange,style:{marginBottom:10}},r.a.createElement(V.o,{value:An,style:{width:100}},r.a.createElement(V.h,{glyph:"stats"})),r.a.createElement(V.o,{value:"radar",style:{width:100}},r.a.createElement(V.h,{glyph:"certificate"}))),this.state.dartChartType===An&&r.a.createElement("div",{ref:this.dartsBarChartRef},r.a.createElement(xn,{data:this.props.dartData})),"radar"===this.state.dartChartType&&r.a.createElement("div",{ref:this.dartsRadarChartRef},r.a.createElement(Mn,{data:this.props.dartData})))}},{key:"createGamesView",value:function(){return r.a.createElement(V.r,{style:{paddingBottom:0,marginBottom:5}},r.a.createElement(V.n,{responsive:!0,style:{textAlign:"center"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{style:this.tableStyle},"Gesamt"),r.a.createElement("th",{style:this.tableStyle},"Gewonnen"),r.a.createElement("th",{style:this.tableStyle},"Verloren"),r.a.createElement("th",{style:this.tableStyle},"Siegrate")),r.a.createElement("tr",null,r.a.createElement("td",{style:this.tableStyle},this.props.gamesWon+this.props.gamesLost),r.a.createElement("td",{style:this.tableStyle},this.props.gamesWon),r.a.createElement("td",{style:this.tableStyle},this.props.gamesLost),r.a.createElement("td",{style:this.tableStyle},this.getWinRate())))),r.a.createElement(Dn,{data:this.props.gamesData}))}},{key:"getWinRate",value:function(){return this.getRate(this.props.gamesWon,this.props.gamesWon+this.props.gamesLost)}},{key:"getDartCheckoutRate",value:function(){return this.getRate(this.props.checkoutDarts,this.props.possibleCheckoutDarts)}},{key:"getRate",value:function(e,t){var n=(e/t*100).toFixed(2);return isNaN(n)?"-":n+"%"}}]),t}(r.a.Component),Gn=Object(l.b)(function(e){return{isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn,isFetchingStatistics:e.statistics.isFetching,gamesWon:e.statistics.gamesWon,gamesLost:e.statistics.gamesLost,totalDarts:e.statistics.totalDarts,possibleCheckoutDarts:e.statistics.possibleCheckoutDarts,checkoutDarts:e.statistics.checkoutDarts,dartData:e.statistics.dartData,gamesData:e.statistics.gamesData}},function(e){return{showLogin:function(){return e(nt())},fetchStatistics:function(){return e(function(e){return e(Rt()),I(F().resourceUrls.statistic,function(t){return e(At(t))},function(t){e(Bt(t.message)),X(e,t,Z("Failed to fetch statistics",t.message))},function(t){e(Bt(t.message)),e(Z("Failed to fetch statistics",t.message))})})}}})(Bn),Vn=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){fn.setTitlePrefix("Spracheinstellungen")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:Object(c.a)({},this.props.style)},r.a.createElement("h3",{style:{marginTop:0}},r.a.createElement("strong",null,"Spracheinstellungen")),r.a.createElement(V.a,{bsStyle:"warning",style:{marginBottom:5,textAlign:"center"}},"Diese Einstellungen sind abh\xe4ngig vom verwendeten Endger\xe4t und Browser.",r.a.createElement("br",null),"Daher werden sie nicht in Deinem Benutzerkonto gespeichert, sondern in Deinem Browser."),r.a.createElement("p",{style:{marginBottom:0}},r.a.createElement("strong",null,"Sprache:")),r.a.createElement(V.g,{componentClass:"select",style:{width:400,maxWidth:"95%",display:"initial"},onChange:function(t){e.props.onSelectedVoiceChange(t.target.value)},value:this.props.selectedVoice?this.props.selectedVoice.name:this.props.defaultVoice?this.props.defaultVoice.name:void 0},this.props.possibleVoices.map(function(e){var t="possible_voice_"+e.name;return r.a.createElement("option",{key:t,value:e.name},e.name," ",e.default&&"[Standard]")})))}}]),t}(r.a.Component),zn=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{role:"menuitem",onClick:this.props.onSelect},this.props.children)}}]),t}(r.a.Component),Wn=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this,t=this.props.right?"navigation-bar-dropdown-menu-right":"";return t=this.props.fullWidth?"navigation-bar-dropdown-menu-full-width":t,r.a.createElement(V.f,{id:this.props.id},r.a.createElement(V.f.Toggle,{noCaret:!this.props.withCaret,className:this.props.withCaret?"navigation-bar-dropdown-toggle":"navigation-bar-bordered-item"},this.props.icon," ",this.props.text),r.a.createElement(V.f.Menu,{className:t},this.props.items.map(function(t,n){return r.a.createElement(zn,{key:e.props.id+"_item_"+n},t)})))}}]),t}(r.a.Component),Hn=function e(t,n,a){if(Object(_.a)(this,e),t.length!==n.length)throw new Error("merged and unmerged items must have equal length");this.unmergedItems=t,this.mergedItems=n,this.dropdownConfig=a},Yn=function e(t,n,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(_.a)(this,e),this.id=t,this.icon=n,this.text=a,this.showCaret=r},Kn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={lastWidth:-1,mergeCount:0},n.bar=r.a.createRef(),n.resetMergeCount=n.resetMergeCount.bind(Object(hn.a)(Object(hn.a)(n))),n.maxMergeCount=n.maxMergeCount.bind(Object(hn.a)(Object(hn.a)(n))),n.shouldMerge=n.shouldMerge.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resetMergeCount)}},{key:"componentDidUpdate",value:function(e,t,n){var a=void 0!==this.props.fixedItems&&this.props.fixedItems.filter(this.notFalse).length!==e.fixedItems.filter(this.notFalse).length,r=void 0!==this.props.leftContainer&&this.props.leftContainer.mergedItems.filter(this.notFalse).length!==e.leftContainer.mergedItems.filter(this.notFalse).length,s=void 0!==this.props.leftContainer&&this.props.leftContainer.unmergedItems.filter(this.notFalse).length!==e.leftContainer.unmergedItems.filter(this.notFalse).length,i=void 0!==this.props.rightContainer&&this.props.rightContainer.mergedItems.filter(this.notFalse).length!==e.rightContainer.mergedItems.filter(this.notFalse).length,o=void 0!==this.props.rightContainer&&this.props.rightContainer.unmergedItems.filter(this.notFalse).length!==e.rightContainer.unmergedItems.filter(this.notFalse).length;if(a||r||s||i||o)this.resetMergeCount();else if(this.shouldMerge()&&this.state.mergeCount<this.maxMergeCount()){var l=this.state.mergeCount;this.setState({mergeCount:l+1})}}},{key:"notFalse",value:function(e){return!1!==e}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resetMergeCount)}},{key:"shouldMerge",value:function(){return!(!this.bar||!this.bar.current)&&this.bar.current.offsetWidth<this.bar.current.scrollWidth}},{key:"maxMergeCount",value:function(){var e=0;return this.props.leftContainer&&(e+=this.props.leftContainer.unmergedItems.length),this.props.rightContainer&&(e+=this.props.rightContainer.unmergedItems.length),this.props.singleDropdown&&(e+=1),e}},{key:"resetMergeCount",value:function(e){void 0===e?this.setState({mergeCount:0}):e.target.innerWidth!==this.state.lastWidth&&this.setState({mergeCount:0,lastWidth:e.target.innerWidth})}},{key:"render",value:function(){var e=this.props.rightContainer?this.props.rightContainer.unmergedItems:[],t=this.props.rightContainer?this.props.rightContainer.mergedItems:[],n=[],a=[],s=this.props.leftContainer?this.props.leftContainer.unmergedItems:[],i=this.props.leftContainer?this.props.leftContainer.mergedItems:[],o=[],l=[],u=[];if(this.state.mergeCount===this.maxMergeCount()&&this.props.singleDropdown)u=i.concat(r.a.createElement(V.j,{divider:!0})).concat(t);else{var h=e.length-this.state.mergeCount,p=h>=0?h:0;n=t.slice(p,e.length),a=e.slice(0,p);var d=this.state.mergeCount-e.length,m=d>=0?d:0;o=i.slice(0,m),l=s.slice(m,s.length)}var g=Object(c.a)({},this.props.style);return this.props.alignCenter&&(g.justifyContent="center"),r.a.createElement("div",{ref:this.bar,className:"navigation-bar"+(this.props.small?" navigation-bar-small":""),style:g},r.a.createElement("div",{className:"navigation-bar-container"},this.props.fixedItems,o.length>0&&r.a.createElement(Wn,{id:this.props.leftContainer.dropdownConfig.id,items:o,icon:this.props.leftContainer.dropdownConfig.icon,text:this.props.leftContainer.dropdownConfig.text,withCaret:this.props.leftContainer.dropdownConfig.showCaret}),l),r.a.createElement("div",{className:"navigation-bar-container navigation-bar-container-right"},a,n.length>0&&r.a.createElement(Wn,{id:this.props.rightContainer.dropdownConfig.id,items:n,icon:this.props.rightContainer.dropdownConfig.icon,text:this.props.rightContainer.dropdownConfig.text,withCaret:this.props.rightContainer.dropdownConfig.showCaret,right:!0}),u.length>0&&r.a.createElement(Wn,{id:this.props.singleDropdown.id,items:u,icon:this.props.singleDropdown.icon,text:this.props.singleDropdown.text,withCaret:this.props.singleDropdown.showCaret,fullWidth:!0})))}}]),t}(r.a.Component),qn=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement(pn.c,{className:"navigation-bar-item",to:this.props.navigationItem.route},this.props.navigationItem.icon," ",(void 0===this.props.showText||this.props.showText)&&this.props.navigationItem.text,this.props.children)}}]),t}(r.a.Component),Qn=n(45),Jn={name:"",password:"",nameMatch:!1},Zn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state=Jn,n.handleNameChange=n.handleNameChange.bind(Object(hn.a)(Object(hn.a)(n))),n.handlePasswordChange=n.handlePasswordChange.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidUpdate",value:function(e){e.show!==this.props.show&&!1===this.props.show&&this.setState(Jn)}},{key:"handleNameChange",value:function(e){var t=this.props.name===e;this.setState({name:e,nameMatch:t})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(V.k,{backdrop:"static",show:this.props.show,onHide:this.props.hide},r.a.createElement(V.k.Body,{style:{textAlign:"center",paddingTop:0,paddingBottom:0}},r.a.createElement("h3",null,r.a.createElement(Qn.a,{glyph:"exclamation-sign",style:{color:"#d9534f"}}),r.a.createElement("strong",null," Benutzerkonto endg\xfcltig l\xf6schen")),r.a.createElement(V.a,{bsStyle:"danger",style:{textAlign:"center"}},"Das L\xf6schen Deines Benutzerkontos kann nicht r\xfcckg\xe4ngig gemacht werden! ",r.a.createElement("br",null),"Um Dein Konto dennoch zu l\xf6schen, musst du Deinen Benutzernamen und Dein Passwort best\xe4tigen."),r.a.createElement(V.g,{style:{marginBottom:5},type:"text",value:this.state.name,disabled:this.props.isDeleting,onChange:function(t){return e.handleNameChange(t.target.value)},placeholder:"Benutzername",autoFocus:!0}),r.a.createElement(V.g,{style:{marginBottom:5},type:"password",value:this.state.password,disabled:this.props.isDeleting,onChange:function(t){return e.handlePasswordChange(t.target.value)},placeholder:"Passwort"})),r.a.createElement(V.k.Footer,{style:{textAlign:"center"}},r.a.createElement(V.c,{style:{width:100},bsStyle:"danger",disabled:this.isButtonDisabled(),onClick:function(){return e.props.deleteUser(e.state.password)}},"L\xf6schen"),r.a.createElement(V.c,{style:{width:100},bsStyle:"primary",onClick:this.props.hide,disabled:this.props.isDeleting},"Abbrechen")))}},{key:"isButtonDisabled",value:function(){return this.props.isDeleting||!this.state.nameMatch||""===this.state.password}}]),t}(r.a.Component),Xn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={userName:void 0!==e.userName?e.userName:"",currentPassword:"",newPassword:"",passwordRepeat:"",passwordsMatch:!0,saveButtonDisabled:!0,showDeletionConfirmationModal:!1},n.handleUserNameChange=n.handleUserNameChange.bind(Object(hn.a)(Object(hn.a)(n))),n.handleCurrentPasswordChange=n.handleCurrentPasswordChange.bind(Object(hn.a)(Object(hn.a)(n))),n.handleNewPasswordChange=n.handleNewPasswordChange.bind(Object(hn.a)(Object(hn.a)(n))),n.handlePasswordRepeatChange=n.handlePasswordRepeatChange.bind(Object(hn.a)(Object(hn.a)(n))),n.saveButtonDisabled=n.saveButtonDisabled.bind(Object(hn.a)(Object(hn.a)(n))),n.showDeletionConfirmationModal=n.showDeletionConfirmationModal.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){fn.setTitlePrefix("Benutzereinstellungen")}},{key:"handleUserNameChange",value:function(e){this.setState({userName:e,saveButtonDisabled:this.saveButtonDisabled(this.state.currentPassword,this.state.passwordsMatch,e,this.state.newPassword)})}},{key:"handleNewPasswordChange",value:function(e){var t=e===this.state.passwordRepeat;this.setState({newPassword:e,passwordsMatch:t,saveButtonDisabled:this.saveButtonDisabled(this.state.currentPassword,t,this.state.userName,e)})}},{key:"handleCurrentPasswordChange",value:function(e){this.setState({currentPassword:e,saveButtonDisabled:this.saveButtonDisabled(e,this.state.passwordsMatch,this.state.userName,this.state.newPassword)})}},{key:"handlePasswordRepeatChange",value:function(e){var t=e===this.state.newPassword;this.setState({passwordRepeat:e,passwordsMatch:t,saveButtonDisabled:this.saveButtonDisabled(this.state.currentPassword,t,this.state.name,this.state.newPassword)})}},{key:"saveButtonDisabled",value:function(e,t,n,a){return""===e||!t||n===this.props.userName&&""===a}},{key:"showDeletionConfirmationModal",value:function(e){this.setState({showDeletionConfirmationModal:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Zn,{show:this.state.showDeletionConfirmationModal,hide:function(){return e.showDeletionConfirmationModal(!1)},name:this.props.userName,isDeleting:this.props.isDeletingUser,deleteUser:this.props.deleteUser}),r.a.createElement("h3",{style:{marginTop:0}},r.a.createElement("strong",null,"Benutzereinstellungen")),r.a.createElement(V.e,null,"Benutzername \xe4ndern"),r.a.createElement(V.g,{type:"text",className:"user-settings-input",disabled:this.props.isDeletingUser||this.props.isModifyingUser,value:this.state.userName,onChange:function(t){return e.handleUserNameChange(t.target.value)},placeholder:"Benutzername"}),r.a.createElement(V.e,null,"Passwort \xe4ndern"),r.a.createElement(V.g,{type:"password",className:"user-settings-input",disabled:this.props.isDeletingUser||this.props.isModifyingUser,value:this.state.newPassword,onChange:function(t){return e.handleNewPasswordChange(t.target.value)},placeholder:"Neues Passwort"}),r.a.createElement(V.g,{type:"password",className:"user-settings-input",disabled:this.props.isDeletingUser||this.props.isModifyingUser,value:this.state.passwordRepeat,onChange:function(t){return e.handlePasswordRepeatChange(t.target.value)},placeholder:"Neues Passwort wiederholen"}),!this.state.passwordsMatch&&r.a.createElement("div",{style:{color:"red"}},r.a.createElement(V.h,{glyph:"remove"})," Passwort muss \xfcbereinstimmen"),r.a.createElement(V.e,{style:{marginTop:15}},"Aktuelles Passwort best\xe4tigen"),r.a.createElement(V.g,{type:"password",className:"user-settings-input",disabled:this.props.isDeletingUser||this.props.isModifyingUser,value:this.state.currentPassword,onChange:function(t){return e.handleCurrentPasswordChange(t.target.value)},placeholder:"Aktuelles Passwort"}),r.a.createElement(V.c,{bsStyle:"primary",style:{display:"block",margin:"auto auto 10px"},disabled:this.props.isDeletingUser||this.props.isModifyingUser||this.state.saveButtonDisabled,onClick:function(){return e.props.modifyUser(e.state.currentPassword,e.state.userName===e.props.userName?null:e.state.userName,""===e.state.newPassword?null:e.state.newPassword)}},"\xc4nderungen speichern"),r.a.createElement(V.a,{bsStyle:"danger",style:{marginTop:25}},r.a.createElement("h3",{style:{marginTop:0}},r.a.createElement("strong",null,"Benutzerkonto l\xf6schen")),r.a.createElement(V.c,{style:{display:"block",margin:"auto"},bsStyle:"danger",disabled:this.props.disabled,onClick:function(){return e.showDeletionConfirmationModal(!0)}},"Benutzer l\xf6schen")))}}]),t}(r.a.Component),$n=Object(l.b)(function(e){return{userName:e.user.name,isModifyingUser:e.user.isModifying,isDeletingUser:e.user.isDeletingUser}},function(e){return{modifyUser:function(t,n,a){return e(function(e,t,n){return function(a){return a(gt()),U(F().resourceUrls.user,{currentPassword:e,newName:t,newPassword:n},function(e){a(ft()),a(Ot(!0))},function(e){a(yt(e.message)),X(a,e,Z("Modify user failed",e.message))},function(e){a(yt(e.message)),a(Z("Modify user failed",e.message))})}}(t,n,a))},deleteUser:function(t){return e(function(e){return function(t){return t(bt()),T(F().resourceUrls.user,{currentPassword:e},function(e){t(Et()),t(wt())},function(e){t(vt(e.message)),X(t,e,Z("Delete user failed",e.message))},function(e){t(vt(e.message)),t(Z("Delete user failed",e.message))})}}(t))}}})(Xn),ea=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={userNameToPermit:"",permitButtonDisabled:!0,playersInformation:t.mergeUsers(n.props.playableUsers,n.props.permittedUsers)},n.handleUserNameToPermitChange=n.handleUserNameToPermitChange.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.userName===e.userName&&this.props.permittedUsers===e.permittedUsers&&this.props.playableUsers===e.playableUsers||this.setState({name:void 0!==this.props.userName?this.props.userName:"",playersInformation:t.mergeUsers(this.props.playableUsers,this.props.permittedUsers)})}},{key:"handleUserNameToPermitChange",value:function(e){var t=void 0===e||null===e||""===e;this.setState({userNameToPermit:e,permitButtonDisabled:t})}},{key:"render",value:function(){var e=this,t=[this.props.isLoggedIn&&r.a.createElement(qn,{key:"settings_user_link",navigationItem:mn.SETTINGS_USER}),this.props.isLoggedIn&&r.a.createElement(qn,{key:"settings_permissions_link",navigationItem:mn.SETTINGS_PERMISSIONS}),r.a.createElement(qn,{key:"settings_speech_link",navigationItem:mn.SETTINGS_SPEECH})],n=new Yn("settings_dropdown",r.a.createElement(V.h,{glyph:"cog"}),"Weitere Einstellungen"),a=new Hn(t,t,n);return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(Kn,{style:{top:40,borderTop:"1px solid black",minHeight:31},rightContainer:a,alignCenter:!0,small:!0}),r.a.createElement("div",{style:{marginTop:31,paddingTop:10,paddingLeft:20,paddingRight:20,overflowY:"auto",position:"absolute",top:0,bottom:0,left:0,right:0}},r.a.createElement(pn.e,{exact:!0,path:mn.SETTINGS.route,render:function(){return e.props.isLoggedIn?r.a.createElement(pn.d,{to:mn.SETTINGS_USER.route}):r.a.createElement(pn.d,{to:mn.SETTINGS_SPEECH.route})}}),r.a.createElement(pn.e,{path:mn.SETTINGS_SPEECH.route,render:function(){return r.a.createElement(Vn,{style:{marginBottom:5},selectedVoice:e.props.selectedVoice,defaultVoice:e.props.defaultVoice,possibleVoices:e.props.possibleVoices,onSelectedVoiceChange:e.props.setSelectedVoiceByName})}}),r.a.createElement(pn.e,{path:mn.SETTINGS_USER.route,render:function(){return r.a.createElement(Rn,{text:"Benutzereinstellungen k\xf6nnen nur von angemeldeten Benutzern angepasst werden"},r.a.createElement($n,null))}}),r.a.createElement(pn.e,{path:mn.SETTINGS_PERMISSIONS.route,render:function(){return r.a.createElement(Rn,{text:"Berechtigungen k\xf6nnen nur von angemeldeten Benutzern angepasst werden"},e.createPermissionSettings())}})))}},{key:"createPermissionSettings",value:function(){var e=this;return fn.setTitlePrefix("Berechtigungen"),r.a.createElement("div",null,r.a.createElement("h3",{style:{marginTop:0}},r.a.createElement("strong",null,"Berechtigungen")),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Hier siehst Du welche Spieler Dir erlaubt haben ein Spiel mit ihnen zu erstellen und kannst einstellen wer dich in einem Spiel ausw\xe4hlen darf.")),r.a.createElement(V.g,{style:{marginBottom:5,width:300,maxWidth:"95%",display:"inline"},type:"text",disabled:this.props.isUpdatingPlayerPermission,value:this.state.userNameToPermit,onChange:function(t){return e.handleUserNameToPermitChange(t.target.value)},onKeyDown:z(function(){e.state.permitButtonDisabled||e.props.isUpdatingPlayerPermission||e.props.addPlayerPermissionByName(e.state.userNameToPermit)}),placeholder:"Spieler berechtigen"}),r.a.createElement(V.c,{bsStyle:"success",style:{marginLeft:2},disabled:this.state.permitButtonDisabled||this.props.isUpdatingPlayerPermission,onClick:function(){return e.props.addPlayerPermissionByName(e.state.userNameToPermit)}},"Berechtigen")),this.createAuthorizationTable())}},{key:"createAuthorizationTable",value:function(){var e=this;return r.a.createElement(V.r,{style:{marginTop:20,paddingBottom:0,textAlign:"center"}},r.a.createElement(V.n,{responsive:!0,hover:!0,style:{textAlign:"center"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{whiteSpace:"normal",textAlign:"center",maxWidth:100}},"Name"),r.a.createElement("th",{style:{whiteSpace:"normal",textAlign:"center"}},"Darf von mir in Spielen ausgew\xe4hlt werden"),r.a.createElement("th",{style:{whiteSpace:"normal",textAlign:"center"}},"Darf mich in Spielen ausw\xe4hlen"))),r.a.createElement("tbody",null,this.state.playersInformation.map(function(t){return t.id!==e.props.userId&&r.a.createElement("tr",{key:"user_row_"+t.id},r.a.createElement("td",{style:{whiteSpace:"normal",textOverflow:"ellipsis",maxWidth:100}},t.name),r.a.createElement("td",null,t.playable?r.a.createElement(V.h,{style:{color:"green"},glyph:"ok"}):r.a.createElement(V.h,{style:{color:"red"},glyph:"remove"})),r.a.createElement("td",null,t.permitted?r.a.createElement(V.l,{placement:"top",overlay:r.a.createElement(V.q,{id:"tooltip"},"Berechtigung nehmen")},r.a.createElement(V.c,{bsStyle:"success",onClick:function(){return e.props.removePlayerPermission(t.id)},disabled:e.props.isUpdatingPlayerPermission},r.a.createElement(V.h,{glyph:"ok"}))):r.a.createElement(V.l,{placement:"top",overlay:r.a.createElement(V.q,{id:"tooltip"},"Berechtigung geben")},r.a.createElement(V.c,{bsStyle:"danger",onClick:function(){return e.props.addPlayerPermissionById(t.id)},disabled:e.props.isUpdatingPlayerPermission},r.a.createElement(V.h,{glyph:"remove"})))))}))),(this.props.isFetchingPlayableUsers||this.props.isFetchingPermittedUsers)&&r.a.createElement(Fn,{label:"Lade Spieler-Berechtigungen..."}))}}],[{key:"mergeUsers",value:function(e,t){for(var n=e.map(function(e){return{id:e.id,name:e.name,playable:!0,permitted:!1}}),a=0;a<t.length;a++){for(var r=!1,s=0;s<n.length;s++)t[a].id===n[s].id&&(n[s].permitted=!0,r=!0);r||n.push({id:t[a].id,name:t[a].name,playable:!1,permitted:!0})}return n}}]),t}(r.a.Component),ta=Object(l.b)(function(e){return{userId:e.user.id,userName:e.user.name,isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn,playableUsers:e.playerPermission.playableUsers.slice().sort(Gt),fetchPlayableUsersFailed:e.playerPermission.fetchPlayableUsersFailed,isFetchingPlayableUsers:e.playerPermission.isFetchingPlayableUsers,permittedUsers:e.playerPermission.permittedUsers.slice().sort(Gt),fetchPermittedUsersFailed:e.playerPermission.fetchPermittedUsersFailed,isFetchingPermittedUsers:e.playerPermission.isFetchingPermittedUsers,isUpdatingPlayerPermission:e.playerPermission.isUpdatingPlayerPermission,possibleVoices:e.speech.possibleVoices,selectedVoice:e.speech.selectedVoice,defaultVoice:e.speech.defaultVoice}},function(e){return{showLogin:function(){return e(nt())},addPlayerPermissionById:function(t){return e((n=t,function(e){return e(ge()),j(F().resourceUrls.playerPermission,{permittedId:n},function(t){return e(fe(t))},function(t){e(be(t.message)),X(e,t,Z("Failed to update permissions",t.message))},function(t){e(be(t.message)),e(Z("Failed to update permissions",t.message))})}));var n},addPlayerPermissionByName:function(t){return e((n=t,function(e){return e(ge()),j(F().resourceUrls.playerPermission,{permittedUsername:n},function(t){return e(fe(t))},function(t){e(be(t.message)),X(e,t,Z("Failed to update permissions",t.message))},function(t){e(be(t.message)),e(Z("Failed to update permissions",t.message))})}));var n},removePlayerPermission:function(t){return e((n=t,function(e){return e(ge()),T(F().resourceUrls.playerPermission,{permittedId:n},function(t){return e(ye(n))},function(t){e(be(t.message)),X(e,t,Z("Failed to update permissions",t.message))},function(t){e(be(t.message)),e(Z("Failed to update permissions",t.message))})}));var n},setSelectedVoiceByName:function(t){return e(ln(t))}}})(ea),na={name:"",password:""},aa=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state=na,n.handleNameChange=n.handleNameChange.bind(Object(hn.a)(Object(hn.a)(n))),n.handlePasswordChange=n.handlePasswordChange.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidUpdate",value:function(e){e.show!==this.props.show&&!1===this.props.show&&this.setState(na)}},{key:"handleNameChange",value:function(e){this.setState({name:e})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(V.k,{restoreFocus:!1,bsSize:"small",backdrop:"static",show:this.props.show,onHide:this.props.hide},r.a.createElement(V.k.Body,{style:{textAlign:"center",paddingBottom:0}},r.a.createElement(V.k.Title,{style:{marginBottom:10}},"Anmelden"),r.a.createElement(V.g,{style:{marginBottom:5},type:"text",value:this.state.name,onChange:function(t){return e.handleNameChange(t.target.value)},onKeyDown:z(function(){e.isLoginDisabled()||e.doLogin()}),placeholder:"Benutzername",autoFocus:!0}),r.a.createElement(V.g,{type:"password",value:this.state.password,onChange:function(t){return e.handlePasswordChange(t.target.value)},onKeyDown:z(function(){e.isLoginDisabled()||e.doLogin()}),placeholder:"Passwort"}),r.a.createElement(V.c,{bsStyle:"link",onClick:function(){e.props.hide(),e.props.showSignUp()}},"Registrieren")),r.a.createElement(V.k.Footer,{style:{textAlign:"center"}},r.a.createElement(V.c,{style:{width:100},bsStyle:"primary",disabled:this.isLoginDisabled(),onClick:function(){return e.doLogin()}},"Anmelden"),r.a.createElement(V.c,{style:{width:100},bsStyle:"primary",onClick:this.props.hide,disabled:this.props.isLoggingIn},"Abbrechen")))}},{key:"isLoginDisabled",value:function(){return this.props.isLoggingIn||""===this.state.name||""===this.state.password}},{key:"doLogin",value:function(){this.props.login(this.state.name,this.state.password)}}]),t}(r.a.Component),ra=Object(l.b)(function(e){return{show:e.user.showLoginModal,isLoggingIn:e.user.isLoggingIn}},function(e){return{login:function(t,n){return e(St(t,n))},hide:function(){return e({type:Fe})},showSignUp:function(){return e({type:Me})}}})(aa),sa={name:"",password:"",passwordRepeat:"",passwordsMatch:!0},ia=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state=sa,n.handleNameChange=n.handleNameChange.bind(Object(hn.a)(Object(hn.a)(n))),n.handlePasswordChange=n.handlePasswordChange.bind(Object(hn.a)(Object(hn.a)(n))),n.handlePasswordRepeatChange=n.handlePasswordRepeatChange.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidUpdate",value:function(e){e.show!==this.props.show&&!1===this.props.show&&this.setState(sa)}},{key:"handleNameChange",value:function(e){this.setState({name:e})}},{key:"handlePasswordChange",value:function(e){var t=e===this.state.passwordRepeat;this.setState({password:e,passwordsMatch:t})}},{key:"handlePasswordRepeatChange",value:function(e){var t=e===this.state.password;this.setState({passwordRepeat:e,passwordsMatch:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(V.k,{bsSize:"small",backdrop:"static",show:this.props.show,onHide:this.props.hide},r.a.createElement(V.k.Body,{style:{textAlign:"center"}},r.a.createElement(V.k.Title,{style:{marginBottom:10}},"Registrieren"),r.a.createElement(V.g,{style:{marginBottom:5},type:"text",value:this.state.name,onChange:function(t){return e.handleNameChange(t.target.value)},onKeyDown:z(function(){e.isSignupDisabled()||e.doSignUp()}),placeholder:"Benutzername",autoFocus:!0}),r.a.createElement(V.g,{style:{marginBottom:5},type:"password",value:this.state.password,onChange:function(t){return e.handlePasswordChange(t.target.value)},onKeyDown:z(function(){e.isSignupDisabled()||e.doSignUp()}),placeholder:"Passwort"}),r.a.createElement(V.g,{type:"password",value:this.state.passwordRepeat,onChange:function(t){return e.handlePasswordRepeatChange(t.target.value)},onKeyDown:z(function(){e.isSignupDisabled()||e.doSignUp()}),placeholder:"Passwort wiederholen"}),!this.state.passwordsMatch&&r.a.createElement("div",{style:{color:"red"}},r.a.createElement(V.h,{glyph:"remove"})," Passwort muss \xfcbereinstimmen")),r.a.createElement(V.k.Footer,{style:{textAlign:"center"}},r.a.createElement(V.c,{style:{width:100},bsStyle:"primary",disabled:this.isSignupDisabled(),onClick:function(){return e.doSignUp()}},"Registrieren"),r.a.createElement(V.c,{style:{width:100},bsStyle:"primary",onClick:this.props.hide},"Abbrechen")))}},{key:"isSignupDisabled",value:function(){return!this.state.passwordsMatch||this.props.isSigningUp||""===this.state.name||""===this.state.password||""===this.state.passwordRepeat}},{key:"doSignUp",value:function(){this.props.signUp(this.state.name,this.state.password)}}]),t}(r.a.Component),oa=Object(l.b)(function(e){return{show:e.user.showSignUpModal,isSigningUp:e.user.isSigningUp}},function(e){return{signUp:function(t,n){return e(function(e,t){return function(n){return n(pt()),j(F().resourceUrls.user,{name:e,password:t},function(a){n(dt()),n(St(e,t))},function(e){n(mt(e.message)),X(n,e,Z("Sign-up failed",e.message))},function(e){n(mt(e.message)),n(Z("Sign-up failed",e.message))})}}(t,n))},hide:function(){return e({type:_e})}}})(ia),la=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchServerVersion()}},{key:"render",value:function(){return r.a.createElement("div",null,"Client: ","".concat("1.2.0")," ",r.a.createElement("br",null),"Server: ",this.props.serverVersion?this.props.serverVersion:"Lade...")}}]),t}(r.a.Component),ca=Object(l.b)(function(e){return{serverVersion:e.serverInformation.version,isFetchingServerVersion:e.serverInformation.isFetchingVersion}},function(e){return{fetchServerVersion:function(){return e(function(e){return e(Zt()),I(F().resourceUrls.serverInformation,function(t){return e(Xt(t))},function(t){e($t(t.message)),X(e,t,Z("Could not fetch server version",t.message))},function(t){e($t(t.message)),e(Z("Could not fetch server version",t.message))})})}}})(la),ua=Object(l.b)(function(e){return{show:e.modal.show,item:e.modal.show?e.modal.items[0]:{}}},function(e){return{hide:function(){return e({type:K})}}})(Y),ha=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement(V.c,{bsStyle:"primary",disabled:this.props.disabled,style:Object(c.a)({margin:5,fontSize:40,display:"inherit"},this.props.style),onClick:this.props.onClick},this.props.icon,this.props.text,this.props.children)}}]),t}(r.a.Component),pa=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ha,{style:this.props.style,onClick:function(){return e.props.history.push(e.props.navigationItem.route)},icon:this.props.navigationItem.icon,text:this.props.navigationItem.text,disabled:this.props.disabled},this.props.children)}}]),t}(r.a.Component),da=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){for(var e="",t=0;t<this.props.columns.length;t++)this.props.columns[t].fixedSize?e+=this.props.columns[t].width+"px":e+="minmax("+this.props.columns[t].width+"px, 1fr)",e+=" ";return r.a.createElement("div",{style:{display:"grid",gridGap:this.props.gridGap?this.props.gridGap+"px":0,gridTemplateColumns:"repeat(auto-fit, "+e+")"}},this.props.children)}}]),t}(r.a.Component),ma=[{width:300}],ga=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){fn.setTitlePrefix("")}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(da,{columns:ma},r.a.createElement(pa,{navigationItem:mn.NEW_GAME,history:this.props.history}),r.a.createElement(pa,{navigationItem:mn.NEW_TRAINING,history:this.props.history}),this.props.gameRunning&&r.a.createElement(pa,{navigationItem:mn.GAME,history:this.props.history})),r.a.createElement(da,{columns:ma},r.a.createElement(pa,{navigationItem:mn.SETTINGS,history:this.props.history}),this.props.isLoggedIn&&r.a.createElement(pa,{navigationItem:mn.NOTIFICATIONS,history:this.props.history,style:{position:"relative"}},this.props.unreadNotificationsCount>0&&r.a.createElement(V.b,{style:{backgroundColor:"#222",color:"white",position:"absolute",top:5,left:"54%"}},this.props.unreadNotificationsCount)),this.props.isLoggedIn&&r.a.createElement(pa,{navigationItem:mn.STATISTICS,history:this.props.history})),r.a.createElement(da,{columns:ma},this.props.isLoggedIn?r.a.createElement(ha,{onClick:this.props.logout,disabled:this.props.isLoggingOut,icon:mn.LOGOUT.icon,text:mn.LOGOUT.text}):r.a.createElement(ha,{onClick:this.props.showLogin,disabled:this.props.isLoggingIn,icon:mn.LOGIN.icon,text:mn.LOGIN.text})))}}]),t}(r.a.Component),fa=Object(l.b)(function(e){return{isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn,isLoggingOut:e.user.isLoggingOut,gameRunning:null!==e.game,unreadNotificationsCount:e.notifications.unreadNotifications.length}},function(e){return{showLogin:function(){return e(nt())},logout:function(){return e(wt())}}})(ga);function ya(e,t){return t&&t.replaceToday&&function(e){return ba(new Date,e)}(e)?"Heute":t&&t.replaceYesterday&&function(e){var t=new Date;return t.setDate(t.getDate()-1),ba(t,e)}(e)?"Gestern":Ea(e.getDate().toString())+"."+Ea((e.getMonth()+1).toString())+"."+e.getFullYear().toString()}function ba(e,t){return e.toDateString()===t.toDateString()}function Ea(e){return e<10?"0"+e:e}var va=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){fn.setTitlePrefix("Mitteilungen")}},{key:"render",value:function(){var e=this;return r.a.createElement(Rn,{text:"Mitteilungen k\xf6nnen nur von angemeldeten Benutzern eingesehen werden"},r.a.createElement(V.r,{style:{paddingBottom:0,textAlign:"center"}},r.a.createElement(V.c,{bsStyle:"primary",style:{marginRight:5},onClick:this.props.fetchNotifications,disabled:this.props.isFetchingNotifications},r.a.createElement(V.h,{glyph:"refresh"})," Neu Laden"),r.a.createElement(V.c,{bsStyle:"primary",onClick:function(){return e.props.markAsRead(e.props.unreadNotifications.map(function(e){return e.id}))},disabled:this.props.isFetchingNotifications||0===this.props.unreadNotifications.length},r.a.createElement(V.h,{glyph:"check"})," Alle als gelesen markieren"),r.a.createElement(V.n,{hover:!0,style:{textAlign:"initial"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{whiteSpace:"normal",width:100}},"Zeitpunkt"),r.a.createElement("th",{style:{whiteSpace:"normal"}},"Mitteilung"))),r.a.createElement("tbody",null,this.props.notifications.map(function(e){return r.a.createElement("tr",{key:"notification_row_"+e.id},r.a.createElement("td",{style:{whiteSpace:"normal",width:100,verticalAlign:"middle",textAlign:"center"}},ya(new Date(e.timestamp),{replaceToday:!0,replaceYesterday:!0}),r.a.createElement("br",null),Ea((t=new Date(e.timestamp)).getHours().toString())+":"+Ea(t.getMinutes().toString())+" Uhr",r.a.createElement("br",null),!e.read&&r.a.createElement(V.b,{style:{backgroundColor:"#337ab7"}},"Neu")),r.a.createElement("td",{style:{verticalAlign:"middle"}},e.message));var t}),0===this.props.notifications.length&&r.a.createElement("tr",null,r.a.createElement("td",{style:{whiteSpace:"normal",width:100}}),r.a.createElement("td",null,"Keine Mitteilungen vorhanden")))),this.props.isFetchingNotifications&&r.a.createElement(Fn,{label:"Lade Mitteilungen..."})))}}]),t}(r.a.Component),Sa=Object(l.b)(function(e){return{notifications:e.notifications.notifications.slice().reverse(),unreadNotifications:e.notifications.unreadNotifications,isFetchingNotifications:e.notifications.isFetching,isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn}},function(e){return{showLogin:function(){return e(nt())},fetchNotifications:function(){return e(De())},markAsRead:function(t){return e((n=t,function(e){return e(Pe(n)),U(F().resourceUrls.notification,{ids:n,read:!0},function(t){return e(Ne(t))},function(t){e(Le(t.message)),X(e,t,Z("Failed to update notifications",t.message))},function(t){e(Le(t.message)),e(Z("Failed to update notifications",t.message))})}));var n}}})(va),Oa=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={fullscreen:!1},n.toggleFullscreen=n.toggleFullscreen.bind(Object(hn.a)(Object(hn.a)(n))),n.fullscreenchangeEventListener=n.fullscreenchangeEventListener.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("fullscreenchange",this.fullscreenchangeEventListener),document.addEventListener("webkitfullscreenchange",this.fullscreenchangeEventListener),document.addEventListener("msfullscreenchange",this.fullscreenchangeEventListener)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("fullscreenchange",this.fullscreenchangeEventListener),document.addEventListener("webkitfullscreenchange",this.fullscreenchangeEventListener),document.addEventListener("msfullscreenchange",this.fullscreenchangeEventListener)}},{key:"fullscreenchangeEventListener",value:function(e){this.setState({fullscreen:this.isFullscreen()})}},{key:"toggleFullscreen",value:function(){var e=document.documentElement;this.isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"isFullscreen",value:function(){return document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement}},{key:"render",value:function(){return r.a.createElement(V.c,{onClick:this.toggleFullscreen,className:this.props.className},this.state.fullscreen?r.a.createElement(V.h,{className:this.props.className+"-icon",glyph:"resize-small"}):r.a.createElement(V.h,{className:this.props.className+"-icon",glyph:"resize-full"}))}}]),t}(r.a.Component),wa=(n(452),function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar-login-loader"})}}]),t}(r.a.Component)),Ca=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=[r.a.createElement(Oa,{key:"fullscreen-button",className:"navigation-bar-bordered-item"}),r.a.createElement(pn.b,{key:"brand",className:"navigation-bar-item navigation-bar-header",to:"/"},"Pheru-Darts")],t=this.createGameLinks(),n=new Yn("game_dropdown",r.a.createElement(V.h,{glyph:"expand"}),"Spielmen\xfc"),a=new Hn(t,t,n),s=this.createUserLinks(!1),i=this.createUserLinks(!0),o=new Yn("user_dropdown",r.a.createElement(V.h,{glyph:"user"}),this.props.userName?this.props.userName:"Benutzer"),l=new Hn(s,i,o),c=new Yn("hamburger_dropdown",r.a.createElement(V.h,{className:"navigation-bar-bordered-item-icon",glyph:"menu-hamburger"}),null,!1);return r.a.createElement(Kn,{style:{zIndex:1030},fixedItems:e,leftContainer:a,rightContainer:l,singleDropdown:c})}},{key:"createGameLinks",value:function(){return[r.a.createElement(qn,{key:"new-game-link",navigationItem:mn.NEW_GAME}),r.a.createElement(qn,{key:"new-training-link",navigationItem:mn.NEW_TRAINING}),this.props.gameRunning&&r.a.createElement(qn,{key:"game-link",navigationItem:mn.GAME})]}},{key:"createUserLinks",value:function(e){var t=this;return[r.a.createElement(qn,{key:"settings-link",navigationItem:mn.SETTINGS,showText:e}),this.props.isLoggedIn&&r.a.createElement(qn,{key:"notifications-link",navigationItem:mn.NOTIFICATIONS,showText:e},this.props.unreadNotificationsCount>0&&r.a.createElement(V.b,{style:{marginLeft:2,backgroundColor:"#337ab7"}},this.props.unreadNotificationsCount)),this.props.isLoggedIn&&r.a.createElement(qn,{key:"statistics-link",navigationItem:mn.STATISTICS,showText:e}),!this.props.isLoggedIn&&r.a.createElement(V.c,{key:"login-link",className:"navigation-bar-item",onClick:this.props.showLogin,disabled:this.props.isLoggingIn},r.a.createElement("div",{style:{position:"relative"}},mn.LOGIN.icon," ",this.props.isLoggingIn?"Melde an...":mn.LOGIN.text,this.props.isLoggingIn&&r.a.createElement(wa,null))),this.props.isLoggedIn&&r.a.createElement(V.c,{key:"logout-link",className:"navigation-bar-item",onClick:function(){t.props.gameRunning?t.props.showConfirmation("Wirklich abmelden?","Das aktuelle Spiel wird dadurch abgebrochen.",function(){t.props.exitGame(),t.props.logout()}):t.props.logout()},disabled:this.props.isLoggingOut},r.a.createElement("div",{style:{position:"relative"}},mn.LOGOUT.icon," ",mn.LOGOUT.text," (",this.props.userName,")"))]}}]),t}(r.a.Component),ka=Object(pn.g)(Object(l.b)(function(e){return{userName:e.user.name,isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn,isLoggingOut:e.user.isLoggingOut,gameRunning:null!==e.game,unreadNotificationsCount:e.notifications.unreadNotifications.length}},function(e){return{showLogin:function(){return e(nt())},logout:function(){return e(wt())},showConfirmation:function(t,n,a,r){return e(Q(t,n,a,r))},exitGame:function(){return e(g())}}})(Ca)),Ia=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(A.a)(this,Object(B.a)(t).call(this,e))).appContainerRef=r.a.createRef(),n.onBeforeUnload=n.onBeforeUnload.bind(Object(hn.a)(Object(hn.a)(n))),n.onUnload=n.onUnload.bind(Object(hn.a)(Object(hn.a)(n))),n}return Object(G.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.onunload=this.onUnload,window.onbeforeunload=this.onBeforeUnload,this.props.setPossibleVoices(window.speechSynthesis.getVoices()),this.props.setSelectedVoiceByName(Pn()),void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=function(){e.props.setPossibleVoices(window.speechSynthesis.getVoices()),void 0===e.props.selectedVoice&&e.props.setSelectedVoiceByName(Pn())}),this.props.loginByToken(!1)}},{key:"onUnload",value:function(e){this.props.selectedVoice&&Nn(this.props.selectedVoice.name)}},{key:"onBeforeUnload",value:function(e){if(this.props.gameRunning){return e.returnValue="Seite wirklich verlassen?","Seite wirklich verlassen?"}}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.appContainerRef.current.scrollTo(0,0)}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(ka,null),r.a.createElement("div",{ref:this.appContainerRef,style:{position:"absolute",top:0,left:0,right:0,bottom:0,paddingTop:10,paddingLeft:20,paddingRight:20,marginTop:40,overflowY:"auto"}},r.a.createElement(pn.f,null,r.a.createElement(pn.e,{path:mn.NEW_GAME.route,render:function(e){return r.a.createElement(Sn,Object.assign({},e,{key:"newgameconfig"}))}}),r.a.createElement(pn.e,{path:mn.NEW_TRAINING.route,render:function(e){return r.a.createElement(Sn,Object.assign({},e,{key:"newgameconfig_training",training:!0}))}}),this.props.gameRunning&&r.a.createElement(pn.e,{path:mn.GAME.route,component:Tn}),r.a.createElement(pn.e,{path:mn.NOTIFICATIONS.route,component:Sa}),r.a.createElement(pn.e,{path:mn.STATISTICS.route,component:Gn}),r.a.createElement(pn.e,{path:mn.SETTINGS.route,component:ta}),r.a.createElement(pn.e,{path:mn.ABOUT.route,component:ca}),r.a.createElement(pn.e,{component:fa}))),r.a.createElement(ra,null),r.a.createElement(oa,null),r.a.createElement(ua,null))}}]),t}(r.a.Component),ja=Object(pn.g)(Object(l.b)(function(e){return{userName:e.user.name,isLoggedIn:e.user.isLoggedIn,isLoggingIn:e.user.isLoggingIn,isLoggingOut:e.user.isLoggingOut,gameRunning:null!==e.game,fetchPlayableUsersFailed:e.playerPermission.fetchPlayableUsersFailed,fetchPermittedUsersFailed:e.playerPermission.fetchPermittedUsersFailed,unreadNotificationsCount:e.notifications.unreadNotifications.length,selectedVoice:e.speech.selectedVoice}},function(e){return{fetchPlayableUsers:function(){return e(Ee())},fetchPermittedUsers:function(){return e(ve())},showLogin:function(){return e(nt())},loginByToken:function(t){return e(Ot(t))},logout:function(){return e(wt())},showConfirmation:function(t,n,a,r){return e(Q(t,n,a,r))},exitGame:function(){return e(g())},setPossibleVoices:function(t){return e(function(e){return{type:rn,voices:e}}(t))},setSelectedVoiceByName:function(t){return e(ln(t))}}})(Ia)),Ua=Object(o.d)(un,Object(o.a)(i.a));Object(s.render)(r.a.createElement(l.a,{store:Ua},r.a.createElement(pn.a,null,r.a.createElement(ja,null))),document.getElementById("root"))}},[[206,2,1]]]);
//# sourceMappingURL=main.ec6a8eb8.chunk.js.map